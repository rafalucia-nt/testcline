{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/dom-mutator/dist/dom-mutator.esm.js","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/dom-mutator/src/index.ts"],"sourcesContent":["export const validAttributeName = /^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/;\nconst nullController: MutationController = {\n  revert: () => {},\n};\n\nconst elements: Map<Element, ElementRecord> = new Map();\nconst mutations: Set<Mutation> = new Set();\n\nfunction getObserverInit(attr: string): MutationObserverInit {\n  return attr === 'html'\n    ? {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        characterData: true,\n      }\n    : {\n        childList: false,\n        subtree: false,\n        attributes: true,\n        attributeFilter: [attr],\n      };\n}\n\nfunction getElementRecord(element: Element): ElementRecord {\n  let record = elements.get(element);\n\n  if (!record) {\n    record = { element, attributes: {} };\n    elements.set(element, record);\n  }\n\n  return record;\n}\n\nfunction createElementPropertyRecord(\n  el: Element,\n  attr: string,\n  getCurrentValue: (el: Element) => any,\n  setValue: (el: Element, val: any) => void,\n  mutationRunner: (record: ElementPropertyRecord<any, any>) => void\n) {\n  const currentValue = getCurrentValue(el);\n  const record: ElementPropertyRecord<any, any> = {\n    isDirty: false,\n    originalValue: currentValue,\n    virtualValue: currentValue,\n    mutations: [],\n    el,\n    _positionTimeout: null,\n    observer: new MutationObserver(() => {\n      // enact a 1 second timeout that blocks subsequent firing of the\n      // observer until the timeout is complete. This will prevent multiple\n      // mutations from firing in quick succession, which can cause the\n      // mutation to be reverted before the DOM has a chance to update.\n      if (attr === 'position' && record._positionTimeout) return;\n      else if (attr === 'position')\n        record._positionTimeout = setTimeout(() => {\n          record._positionTimeout = null;\n        }, 1000);\n\n      const currentValue = getCurrentValue(el);\n      if (\n        attr === 'position' &&\n        currentValue.parentNode === record.virtualValue.parentNode &&\n        currentValue.insertBeforeNode === record.virtualValue.insertBeforeNode\n      )\n        return;\n      if (currentValue === record.virtualValue) return;\n      record.originalValue = currentValue;\n      mutationRunner(record);\n    }),\n    mutationRunner,\n    setValue,\n    getCurrentValue,\n  };\n  if (attr === 'position' && el.parentNode) {\n    record.observer.observe(el.parentNode, {\n      childList: true,\n      subtree: true,\n      attributes: false,\n      characterData: false,\n    });\n  } else {\n    record.observer.observe(el, getObserverInit(attr));\n  }\n  return record;\n}\n\nfunction queueIfNeeded(\n  val: string | null | ElementPositionWithDomNode,\n  record: ElementPropertyRecord<any, any>\n) {\n  const currentVal = record.getCurrentValue(record.el);\n  record.virtualValue = val;\n  if (val && typeof val !== 'string') {\n    if (\n      !currentVal ||\n      val.parentNode !== currentVal.parentNode ||\n      val.insertBeforeNode !== currentVal.insertBeforeNode\n    ) {\n      record.isDirty = true;\n      runDOMUpdates();\n    }\n  } else if (val !== currentVal) {\n    record.isDirty = true;\n    runDOMUpdates();\n  }\n}\n\nfunction htmlMutationRunner(record: HTMLRecord) {\n  let val = record.originalValue;\n  record.mutations.forEach(m => (val = m.mutate(val)));\n  queueIfNeeded(getTransformedHTML(val), record);\n}\nfunction classMutationRunner(record: ClassnameRecord) {\n  const val = new Set(record.originalValue.split(/\\s+/).filter(Boolean));\n  record.mutations.forEach(m => m.mutate(val));\n  queueIfNeeded(\n    Array.from(val)\n      .filter(Boolean)\n      .join(' '),\n    record\n  );\n}\n\nfunction attrMutationRunner(record: AttributeRecord) {\n  let val: string | null = record.originalValue;\n  record.mutations.forEach(m => (val = m.mutate(val)));\n  queueIfNeeded(val, record);\n}\n\nfunction _loadDOMNodes({\n  parentSelector,\n  insertBeforeSelector,\n}: ElementPosition): ElementPositionWithDomNode | null {\n  const parentNode = document.querySelector<HTMLElement>(parentSelector);\n  if (!parentNode) return null;\n  const insertBeforeNode = insertBeforeSelector\n    ? document.querySelector<HTMLElement>(insertBeforeSelector)\n    : null;\n  if (insertBeforeSelector && !insertBeforeNode) return null;\n  return {\n    parentNode,\n    insertBeforeNode,\n  };\n}\n\nfunction positionMutationRunner(record: PositionRecord) {\n  let val = record.originalValue;\n  record.mutations.forEach(m => {\n    const selectors = m.mutate();\n    const newNodes = _loadDOMNodes(selectors);\n    val = newNodes || val;\n  });\n  queueIfNeeded(val, record);\n}\n\nconst getHTMLValue = (el: Element) => el.innerHTML;\nconst setHTMLValue = (el: Element, value: string) => (el.innerHTML = value);\nfunction getElementHTMLRecord(element: Element): HTMLRecord {\n  const elementRecord = getElementRecord(element);\n  if (!elementRecord.html) {\n    elementRecord.html = createElementPropertyRecord(\n      element,\n      'html',\n      getHTMLValue,\n      setHTMLValue,\n      htmlMutationRunner\n    );\n  }\n  return elementRecord.html;\n}\n\nconst getElementPosition = (el: Element): ElementPositionWithDomNode => {\n  return {\n    parentNode: el.parentElement as HTMLElement,\n    insertBeforeNode: el.nextElementSibling as HTMLElement | null,\n  };\n};\nconst setElementPosition = (el: Element, value: ElementPositionWithDomNode) => {\n  if (\n    value.insertBeforeNode &&\n    !value.parentNode.contains(value.insertBeforeNode)\n  ) {\n    // skip position mutation - insertBeforeNode not a child of parent. happens\n    // when mutation observer for indvidual element fires out of order\n    return;\n  }\n  value.parentNode.insertBefore(el, value.insertBeforeNode);\n};\nfunction getElementPositionRecord(element: Element): PositionRecord {\n  const elementRecord = getElementRecord(element);\n  if (!elementRecord.position) {\n    elementRecord.position = createElementPropertyRecord(\n      element,\n      'position',\n      getElementPosition,\n      setElementPosition,\n      positionMutationRunner\n    );\n  }\n  return elementRecord.position;\n}\n\nconst setClassValue = (el: Element, val: string) =>\n  val ? (el.className = val) : el.removeAttribute('class');\nconst getClassValue = (el: Element) => el.className;\nfunction getElementClassRecord(el: Element): ClassnameRecord {\n  const elementRecord = getElementRecord(el);\n  if (!elementRecord.classes) {\n    elementRecord.classes = createElementPropertyRecord(\n      el,\n      'class',\n      getClassValue,\n      setClassValue,\n      classMutationRunner\n    );\n  }\n  return elementRecord.classes;\n}\n\nconst getAttrValue = (attrName: string) => (el: Element) =>\n  el.getAttribute(attrName) ?? null;\nconst setAttrValue = (attrName: string) => (el: Element, val: string | null) =>\n  val !== null ? el.setAttribute(attrName, val) : el.removeAttribute(attrName);\nfunction getElementAttributeRecord(el: Element, attr: string): AttributeRecord {\n  const elementRecord = getElementRecord(el);\n  if (!elementRecord.attributes[attr]) {\n    elementRecord.attributes[attr] = createElementPropertyRecord(\n      el,\n      attr,\n      getAttrValue(attr),\n      setAttrValue(attr),\n      attrMutationRunner\n    );\n  }\n  return elementRecord.attributes[attr];\n}\n\nfunction deleteElementPropertyRecord(el: Element, attr: string) {\n  const element = elements.get(el);\n  if (!element) return;\n  if (attr === 'html') {\n    element.html?.observer?.disconnect();\n    delete element.html;\n  } else if (attr === 'class') {\n    element.classes?.observer?.disconnect();\n    delete element.classes;\n  } else if (attr === 'position') {\n    element.position?.observer?.disconnect();\n    delete element.position;\n  } else {\n    element.attributes?.[attr]?.observer?.disconnect();\n    delete element.attributes[attr];\n  }\n}\n\nlet transformContainer: HTMLDivElement;\nfunction getTransformedHTML(html: string) {\n  if (!transformContainer) {\n    transformContainer = document.createElement('div');\n  }\n  transformContainer.innerHTML = html;\n  return transformContainer.innerHTML;\n}\n\nfunction setPropertyValue<T extends ElementPropertyRecord<any, any>>(\n  el: Element,\n  attr: string,\n  m: T\n) {\n  if (!m.isDirty) return;\n  m.isDirty = false;\n  const val = m.virtualValue;\n  if (!m.mutations.length) {\n    deleteElementPropertyRecord(el, attr);\n  }\n  m.setValue(el, val);\n}\n\nfunction setValue(m: ElementRecord, el: Element) {\n  m.html && setPropertyValue<HTMLRecord>(el, 'html', m.html);\n  m.classes && setPropertyValue<ClassnameRecord>(el, 'class', m.classes);\n  m.position && setPropertyValue<PositionRecord>(el, 'position', m.position);\n  Object.keys(m.attributes).forEach(attr => {\n    setPropertyValue<AttributeRecord>(el, attr, m.attributes[attr]);\n  });\n}\n\nfunction runDOMUpdates() {\n  elements.forEach(setValue);\n}\n\n// find or create ElementPropertyRecord, add mutation to it, then run\nfunction startMutating(mutation: Mutation, element: Element) {\n  let record: ElementPropertyRecord<any, any> | null = null;\n  if (mutation.kind === 'html') {\n    record = getElementHTMLRecord(element);\n  } else if (mutation.kind === 'class') {\n    record = getElementClassRecord(element);\n  } else if (mutation.kind === 'attribute') {\n    record = getElementAttributeRecord(element, mutation.attribute);\n  } else if (mutation.kind === 'position') {\n    record = getElementPositionRecord(element);\n  }\n  if (!record) return;\n  record.mutations.push(mutation);\n  record.mutationRunner(record);\n}\n\n// get (existing) ElementPropertyRecord, remove mutation from it, then run\nfunction stopMutating(mutation: Mutation, el: Element) {\n  let record: ElementPropertyRecord<any, any> | null = null;\n  if (mutation.kind === 'html') {\n    record = getElementHTMLRecord(el);\n  } else if (mutation.kind === 'class') {\n    record = getElementClassRecord(el);\n  } else if (mutation.kind === 'attribute') {\n    record = getElementAttributeRecord(el, mutation.attribute);\n  } else if (mutation.kind === 'position') {\n    record = getElementPositionRecord(el);\n  }\n  if (!record) return;\n  const index = record.mutations.indexOf(mutation);\n  if (index !== -1) record.mutations.splice(index, 1);\n  record.mutationRunner(record);\n}\n\n// maintain list of elements associated with mutation\nfunction refreshElementsSet(mutation: Mutation) {\n  // if a position mutation has already found an element to move, don't move\n  // any more elements\n  if (mutation.kind === 'position' && mutation.elements.size === 1) return;\n\n  const existingElements = new Set(mutation.elements);\n  const matchingElements = document.querySelectorAll(mutation.selector);\n\n  matchingElements.forEach(el => {\n    if (!existingElements.has(el)) {\n      mutation.elements.add(el);\n      startMutating(mutation, el);\n    }\n  });\n}\n\nfunction revertMutation(mutation: Mutation) {\n  mutation.elements.forEach(el => stopMutating(mutation, el));\n  mutation.elements.clear();\n  mutations.delete(mutation);\n}\n\nfunction refreshAllElementSets() {\n  mutations.forEach(refreshElementsSet);\n}\n\n// Observer for elements that don't exist in the DOM yet\nlet observer: MutationObserver;\nexport function disconnectGlobalObserver() {\n  observer && observer.disconnect();\n}\nexport function connectGlobalObserver() {\n  if (typeof document === 'undefined') return;\n\n  if (!observer) {\n    observer = new MutationObserver(() => {\n      refreshAllElementSets();\n    });\n  }\n\n  refreshAllElementSets();\n  observer.observe(document.documentElement, {\n    childList: true,\n    subtree: true,\n    attributes: false,\n    characterData: false,\n  });\n}\n\n// run on init\nconnectGlobalObserver();\n\nfunction newMutation(m: Mutation): MutationController {\n  // Not in a browser\n  if (typeof document === 'undefined') return nullController;\n  // add to global index of mutations\n  mutations.add(m);\n  // run refresh on init to establish list of elements associated w/ mutation\n  refreshElementsSet(m);\n  return {\n    revert: () => {\n      revertMutation(m);\n    },\n  };\n}\n\nfunction html(\n  selector: HTMLMutation['selector'],\n  mutate: HTMLMutation['mutate']\n) {\n  return newMutation({\n    kind: 'html',\n    elements: new Set(),\n    mutate,\n    selector,\n  });\n}\n\nfunction position(\n  selector: PositionMutation['selector'],\n  mutate: PositionMutation['mutate']\n) {\n  return newMutation({\n    kind: 'position',\n    elements: new Set(),\n    mutate,\n    selector,\n  });\n}\n\nfunction classes(\n  selector: ClassnameMutation['selector'],\n  mutate: ClassnameMutation['mutate']\n) {\n  return newMutation({\n    kind: 'class',\n    elements: new Set(),\n    mutate,\n    selector,\n  });\n}\n\nfunction attribute(\n  selector: AttrMutation['selector'],\n  attribute: AttrMutation['attribute'],\n  mutate: AttrMutation['mutate']\n) {\n  if (!validAttributeName.test(attribute)) return nullController;\n\n  if (attribute === 'class' || attribute === 'className') {\n    return classes(selector, classnames => {\n      const mutatedClassnames = mutate(Array.from(classnames).join(' '));\n      classnames.clear();\n      if (!mutatedClassnames) return;\n      mutatedClassnames\n        .split(/\\s+/g)\n        .filter(Boolean)\n        .forEach(c => classnames.add(c));\n    });\n  }\n\n  return newMutation({\n    kind: 'attribute',\n    attribute,\n    elements: new Set(),\n    mutate,\n    selector,\n  });\n}\n\nfunction declarative({\n  selector,\n  action,\n  value,\n  attribute: attr,\n  parentSelector,\n  insertBeforeSelector,\n}: DeclarativeMutation): MutationController {\n  if (attr === 'html') {\n    if (action === 'append') {\n      return html(selector, val => val + (value ?? ''));\n    } else if (action === 'set') {\n      return html(selector, () => value ?? '');\n    }\n  } else if (attr === 'class') {\n    if (action === 'append') {\n      return classes(selector, val => {\n        if (value) val.add(value);\n      });\n    } else if (action === 'remove') {\n      return classes(selector, val => {\n        if (value) val.delete(value);\n      });\n    } else if (action === 'set') {\n      return classes(selector, val => {\n        val.clear();\n        if (value) val.add(value);\n      });\n    }\n  } else if (attr === 'position') {\n    if (action === 'set' && parentSelector) {\n      return position(selector, () => ({\n        insertBeforeSelector,\n        parentSelector,\n      }));\n    }\n  } else {\n    if (action === 'append') {\n      return attribute(selector, attr, val =>\n        val !== null ? val + (value ?? '') : value ?? ''\n      );\n    } else if (action === 'set') {\n      return attribute(selector, attr, () => value ?? '');\n    } else if (action === 'remove') {\n      return attribute(selector, attr, () => null);\n    }\n  }\n  return nullController;\n}\n\nexport type MutationController = {\n  revert: () => void;\n};\n\nexport type DeclarativeMutation = {\n  selector: string;\n  attribute: string;\n  action: 'append' | 'set' | 'remove';\n  value?: string;\n  parentSelector?: string;\n  insertBeforeSelector?: string;\n};\n\nexport default {\n  html,\n  classes,\n  attribute,\n  position,\n  declarative,\n};\n"],"names":["validAttributeName","nullController","revert","elements","Map","mutations","Set","getObserverInit","attr","childList","subtree","attributes","characterData","attributeFilter","getElementRecord","element","record","get","set","createElementPropertyRecord","el","getCurrentValue","setValue","mutationRunner","currentValue","isDirty","originalValue","virtualValue","_positionTimeout","observer","MutationObserver","setTimeout","parentNode","insertBeforeNode","observe","queueIfNeeded","val","currentVal","runDOMUpdates","htmlMutationRunner","forEach","m","mutate","getTransformedHTML","classMutationRunner","split","filter","Boolean","Array","from","join","attrMutationRunner","_loadDOMNodes","parentSelector","insertBeforeSelector","document","querySelector","positionMutationRunner","selectors","newNodes","getHTMLValue","innerHTML","setHTMLValue","value","getElementHTMLRecord","elementRecord","html","getElementPosition","parentElement","nextElementSibling","setElementPosition","contains","insertBefore","getElementPositionRecord","position","setClassValue","className","removeAttribute","getClassValue","getElementClassRecord","classes","getAttrValue","attrName","getAttribute","setAttrValue","setAttribute","getElementAttributeRecord","deleteElementPropertyRecord","disconnect","transformContainer","createElement","setPropertyValue","length","Object","keys","startMutating","mutation","kind","attribute","push","stopMutating","index","indexOf","splice","refreshElementsSet","size","existingElements","matchingElements","querySelectorAll","selector","has","add","revertMutation","clear","refreshAllElementSets","disconnectGlobalObserver","connectGlobalObserver","documentElement","newMutation","test","classnames","mutatedClassnames","c","declarative","action"],"mappings":"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","debugId":null}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook/dist/esm/util.mjs","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook/src/util.ts"],"sourcesContent":["import {\n  AutoExperiment,\n  AutoExperimentChangeType,\n  Polyfills,\n  UrlTarget,\n  UrlTargetType,\n  VariationRange,\n} from \"./types/growthbook\";\n\nconst polyfills: Polyfills = {\n  fetch: globalThis.fetch ? globalThis.fetch.bind(globalThis) : undefined,\n  SubtleCrypto: globalThis.crypto ? globalThis.crypto.subtle : undefined,\n  EventSource: globalThis.EventSource,\n};\nexport function getPolyfills(): Polyfills {\n  return polyfills;\n}\n\nfunction hashFnv32a(str: string): number {\n  let hval = 0x811c9dc5;\n  const l = str.length;\n\n  for (let i = 0; i < l; i++) {\n    hval ^= str.charCodeAt(i);\n    hval +=\n      (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n  }\n  return hval >>> 0;\n}\n\nexport function hash(\n  seed: string,\n  value: string,\n  version: number\n): number | null {\n  // New unbiased hashing algorithm\n  if (version === 2) {\n    return (hashFnv32a(hashFnv32a(seed + value) + \"\") % 10000) / 10000;\n  }\n  // Original biased hashing algorithm (keep for backwards compatibility)\n  if (version === 1) {\n    return (hashFnv32a(value + seed) % 1000) / 1000;\n  }\n\n  // Unknown hash version\n  return null;\n}\n\nexport function getEqualWeights(n: number): number[] {\n  if (n <= 0) return [];\n  return new Array(n).fill(1 / n);\n}\n\nexport function inRange(n: number, range: VariationRange): boolean {\n  return n >= range[0] && n < range[1];\n}\n\nexport function inNamespace(\n  hashValue: string,\n  namespace: [string, number, number]\n): boolean {\n  const n = hash(\"__\" + namespace[0], hashValue, 1);\n  if (n === null) return false;\n  return n >= namespace[1] && n < namespace[2];\n}\n\nexport function chooseVariation(n: number, ranges: VariationRange[]): number {\n  for (let i = 0; i < ranges.length; i++) {\n    if (inRange(n, ranges[i])) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nexport function getUrlRegExp(regexString: string): RegExp | undefined {\n  try {\n    const escaped = regexString.replace(/([^\\\\])\\//g, \"$1\\\\/\");\n    return new RegExp(escaped);\n  } catch (e) {\n    console.error(e);\n    return undefined;\n  }\n}\n\nexport function isURLTargeted(url: string, targets: UrlTarget[]) {\n  if (!targets.length) return false;\n  let hasIncludeRules = false;\n  let isIncluded = false;\n\n  for (let i = 0; i < targets.length; i++) {\n    const match = _evalURLTarget(url, targets[i].type, targets[i].pattern);\n    if (targets[i].include === false) {\n      if (match) return false;\n    } else {\n      hasIncludeRules = true;\n      if (match) isIncluded = true;\n    }\n  }\n\n  return isIncluded || !hasIncludeRules;\n}\n\nfunction _evalSimpleUrlPart(\n  actual: string,\n  pattern: string,\n  isPath: boolean\n): boolean {\n  try {\n    // Escape special regex characters and change wildcard `_____` to `.*`\n    let escaped = pattern\n      .replace(/[*.+?^${}()|[\\]\\\\]/g, \"\\\\$&\")\n      .replace(/_____/g, \".*\");\n\n    if (isPath) {\n      // When matching pathname, make leading/trailing slashes optional\n      escaped = \"\\\\/?\" + escaped.replace(/(^\\/|\\/$)/g, \"\") + \"\\\\/?\";\n    }\n\n    const regex = new RegExp(\"^\" + escaped + \"$\", \"i\");\n    return regex.test(actual);\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _evalSimpleUrlTarget(actual: URL, pattern: string) {\n  try {\n    // If a protocol is missing, but a host is specified, add `https://` to the front\n    // Use \"_____\" as the wildcard since `*` is not a valid hostname in some browsers\n    const expected = new URL(\n      pattern.replace(/^([^:/?]*)\\./i, \"https://$1.\").replace(/\\*/g, \"_____\"),\n      \"https://_____\"\n    );\n\n    // Compare each part of the URL separately\n    const comps: Array<[string, string, boolean]> = [\n      [actual.host, expected.host, false],\n      [actual.pathname, expected.pathname, true],\n    ];\n    // We only want to compare hashes if it's explicitly being targeted\n    if (expected.hash) {\n      comps.push([actual.hash, expected.hash, false]);\n    }\n\n    expected.searchParams.forEach((v, k) => {\n      comps.push([actual.searchParams.get(k) || \"\", v, false]);\n    });\n\n    // If any comparisons fail, the whole thing fails\n    return !comps.some(\n      (data) => !_evalSimpleUrlPart(data[0], data[1], data[2])\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _evalURLTarget(\n  url: string,\n  type: UrlTargetType,\n  pattern: string\n): boolean {\n  try {\n    const parsed = new URL(url, \"https://_\");\n\n    if (type === \"regex\") {\n      const regex = getUrlRegExp(pattern);\n      if (!regex) return false;\n      return (\n        regex.test(parsed.href) ||\n        regex.test(parsed.href.substring(parsed.origin.length))\n      );\n    } else if (type === \"simple\") {\n      return _evalSimpleUrlTarget(parsed, pattern);\n    }\n\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function getBucketRanges(\n  numVariations: number,\n  coverage: number | undefined,\n  weights?: number[]\n): VariationRange[] {\n  coverage = coverage === undefined ? 1 : coverage;\n\n  // Make sure coverage is within bounds\n  if (coverage < 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.coverage must be greater than or equal to 0\");\n    }\n    coverage = 0;\n  } else if (coverage > 1) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.coverage must be less than or equal to 1\");\n    }\n    coverage = 1;\n  }\n\n  // Default to equal weights if missing or invalid\n  const equal = getEqualWeights(numVariations);\n  weights = weights || equal;\n  if (weights.length !== numVariations) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\n        \"Experiment.weights array must be the same length as Experiment.variations\"\n      );\n    }\n    weights = equal;\n  }\n\n  // If weights don't add up to 1 (or close to it), default to equal weights\n  const totalWeight = weights.reduce((w, sum) => sum + w, 0);\n  if (totalWeight < 0.99 || totalWeight > 1.01) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.weights must add up to 1\");\n    }\n    weights = equal;\n  }\n\n  // Covert weights to ranges\n  let cumulative = 0;\n  return weights.map((w) => {\n    const start = cumulative;\n    cumulative += w;\n    return [start, start + (coverage as number) * w];\n  }) as VariationRange[];\n}\n\nexport function getQueryStringOverride(\n  id: string,\n  url: string,\n  numVariations: number\n) {\n  if (!url) {\n    return null;\n  }\n\n  const search = url.split(\"?\")[1];\n  if (!search) {\n    return null;\n  }\n\n  const match = search\n    .replace(/#.*/, \"\") // Get rid of anchor\n    .split(\"&\") // Split into key/value pairs\n    .map((kv) => kv.split(\"=\", 2))\n    .filter(([k]) => k === id) // Look for key that matches the experiment id\n    .map(([, v]) => parseInt(v)); // Parse the value into an integer\n\n  if (match.length > 0 && match[0] >= 0 && match[0] < numVariations)\n    return match[0];\n\n  return null;\n}\n\nexport function isIncluded(include: () => boolean) {\n  try {\n    return include();\n  } catch (e) {\n    console.error(e);\n    return false;\n  }\n}\n\nconst base64ToBuf = (b: string) =>\n  Uint8Array.from(atob(b), (c) => c.charCodeAt(0));\n\nexport async function decrypt(\n  encryptedString: string,\n  decryptionKey?: string,\n  subtle?: SubtleCrypto\n): Promise<string> {\n  decryptionKey = decryptionKey || \"\";\n  subtle =\n    subtle ||\n    (globalThis.crypto && globalThis.crypto.subtle) ||\n    polyfills.SubtleCrypto;\n  if (!subtle) {\n    throw new Error(\"No SubtleCrypto implementation found\");\n  }\n  try {\n    const key = await subtle.importKey(\n      \"raw\",\n      base64ToBuf(decryptionKey),\n      { name: \"AES-CBC\", length: 128 },\n      true,\n      [\"encrypt\", \"decrypt\"]\n    );\n    const [iv, cipherText] = encryptedString.split(\".\");\n    const plainTextBuffer = await subtle.decrypt(\n      { name: \"AES-CBC\", iv: base64ToBuf(iv) },\n      key,\n      base64ToBuf(cipherText)\n    );\n\n    return new TextDecoder().decode(plainTextBuffer);\n  } catch (e) {\n    throw new Error(\"Failed to decrypt\");\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toString(input: any): string {\n  if (typeof input === \"string\") return input;\n  return JSON.stringify(input);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function paddedVersionString(input: any): string {\n  if (typeof input === \"number\") {\n    input = input + \"\";\n  }\n  if (!input || typeof input !== \"string\") {\n    input = \"0\";\n  }\n  // Remove build info and leading `v` if any\n  // Split version into parts (both core version numbers and pre-release tags)\n  // \"v1.2.3-rc.1+build123\" -> [\"1\",\"2\",\"3\",\"rc\",\"1\"]\n  const parts = (input as string).replace(/(^v|\\+.*$)/g, \"\").split(/[-.]/);\n\n  // If it's SemVer without a pre-release, add `~` to the end\n  // [\"1\",\"0\",\"0\"] -> [\"1\",\"0\",\"0\",\"~\"]\n  // \"~\" is the largest ASCII character, so this will make \"1.0.0\" greater than \"1.0.0-beta\" for example\n  if (parts.length === 3) {\n    parts.push(\"~\");\n  }\n\n  // Left pad each numeric part with spaces so string comparisons will work (\"9\">\"10\", but \" 9\"<\"10\")\n  // Then, join back together into a single string\n  return parts\n    .map((v) => (v.match(/^[0-9]+$/) ? v.padStart(5, \" \") : v))\n    .join(\"-\");\n}\n\nexport function loadSDKVersion(): string {\n  let version: string;\n  try {\n    // @ts-expect-error right-hand value to be replaced by build with string literal\n    version = __SDK_VERSION__;\n  } catch (e) {\n    version = \"\";\n  }\n  return version;\n}\n\nexport function mergeQueryStrings(oldUrl: string, newUrl: string): string {\n  let currUrl: URL;\n  let redirectUrl: URL;\n  try {\n    currUrl = new URL(oldUrl);\n    redirectUrl = new URL(newUrl);\n  } catch (e) {\n    console.error(`Unable to merge query strings: ${e}`);\n    return newUrl;\n  }\n\n  currUrl.searchParams.forEach((value, key) => {\n    // skip  if search param already exists in redirectUrl\n    if (redirectUrl.searchParams.has(key)) {\n      return;\n    }\n    redirectUrl.searchParams.set(key, value);\n  });\n\n  return redirectUrl.toString();\n}\n\nfunction isObj(x: unknown): x is Record<string, unknown> {\n  return typeof x === \"object\" && x !== null;\n}\n\nexport function getAutoExperimentChangeType(\n  exp: AutoExperiment\n): AutoExperimentChangeType {\n  if (\n    exp.urlPatterns &&\n    exp.variations.some(\n      (variation) => isObj(variation) && \"urlRedirect\" in variation\n    )\n  ) {\n    return \"redirect\";\n  } else if (\n    exp.variations.some(\n      (variation) =>\n        isObj(variation) &&\n        (variation.domMutations || \"js\" in variation || \"css\" in variation)\n    )\n  ) {\n    return \"visual\";\n  }\n\n  return \"unknown\";\n}\n\n// Guarantee the promise always resolves within {timeout} ms\n// Resolved value will be `null` when there's an error or it takes too long\n// Note: The promise will continue running in the background, even if the timeout is hit\nexport async function promiseTimeout<T>(\n  promise: Promise<T>,\n  timeout?: number\n): Promise<T | null> {\n  return new Promise((resolve) => {\n    let resolved = false;\n    let timer: NodeJS.Timeout | undefined;\n    const finish = (data?: T) => {\n      if (resolved) return;\n      resolved = true;\n      timer && clearTimeout(timer);\n      resolve(data || null);\n    };\n\n    if (timeout) {\n      timer = setTimeout(() => finish(), timeout);\n    }\n\n    promise.then((data) => finish(data)).catch(() => finish());\n  });\n}\n"],"names":["polyfills","fetch","globalThis","bind","undefined","SubtleCrypto","crypto","subtle","EventSource","getPolyfills","hashFnv32a","str","hval","l","length","i","charCodeAt","hash","seed","value","version","getEqualWeights","n","Array","fill","inRange","range","inNamespace","hashValue","namespace","chooseVariation","ranges","getUrlRegExp","regexString","escaped","replace","RegExp","e","console","error","isURLTargeted","url","targets","hasIncludeRules","isIncluded","match","_evalURLTarget","type","pattern","include","_evalSimpleUrlPart","actual","isPath","regex","test","_evalSimpleUrlTarget","expected","URL","comps","host","pathname","push","searchParams","forEach","v","k","get","some","data","parsed","href","substring","origin","getBucketRanges","numVariations","coverage","weights","process","env","NODE_ENV","equal","totalWeight","reduce","w","sum","cumulative","map","start","getQueryStringOverride","id","search","split","kv","filter","parseInt","base64ToBuf","b","Uint8Array","from","atob","c","decrypt","encryptedString","decryptionKey","Error","key","importKey","name","iv","cipherText","plainTextBuffer","TextDecoder","decode","toString","input","JSON","stringify","paddedVersionString","parts","padStart","join","loadSDKVersion","mergeQueryStrings","oldUrl","newUrl","currUrl","redirectUrl","has","set","isObj","x","getAutoExperimentChangeType","exp","urlPatterns","variations","variation","domMutations","promiseTimeout","promise","timeout","Promise","resolve","resolved","timer","finish","clearTimeout","setTimeout","then","catch"],"mappings":"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","debugId":null}},
    {"offset": {"line": 810, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook/dist/esm/feature-repository.mjs","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook/src/feature-repository.ts"],"sourcesContent":["import {\n  Attributes,\n  CacheSettings,\n  FeatureApiResponse,\n  FetchResponse,\n  Helpers,\n  Polyfills,\n} from \"./types/growthbook\";\nimport { getPolyfills, promiseTimeout } from \"./util\";\nimport type {\n  GrowthBook,\n  InitOptions,\n  InitSyncOptions,\n  GrowthBookClient,\n} from \".\";\n\ntype CacheEntry = {\n  data: FeatureApiResponse;\n  sse?: boolean;\n  version: string;\n  staleAt: Date;\n};\ntype ScopedChannel = {\n  src: EventSource | null;\n  cb: (event: MessageEvent<string>) => void;\n  host: string;\n  clientKey: string;\n  headers?: Record<string, string>;\n  errors: number;\n  state: \"active\" | \"idle\" | \"disabled\";\n};\n\n// Config settings\nconst cacheSettings: CacheSettings = {\n  // Consider a fetch stale after 1 minute\n  staleTTL: 1000 * 60,\n  // Max time to keep a fetch in cache (4 hours default)\n  maxAge: 1000 * 60 * 60 * 4,\n  cacheKey: \"gbFeaturesCache\",\n  backgroundSync: true,\n  maxEntries: 10,\n  disableIdleStreams: false,\n  idleStreamInterval: 20000,\n  disableCache: false,\n};\n\nconst polyfills = getPolyfills();\n\nexport const helpers: Helpers = {\n  fetchFeaturesCall: ({ host, clientKey, headers }) => {\n    return (polyfills.fetch as typeof globalThis.fetch)(\n      `${host}/api/features/${clientKey}`,\n      { headers }\n    );\n  },\n  fetchRemoteEvalCall: ({ host, clientKey, payload, headers }) => {\n    const options = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", ...headers },\n      body: JSON.stringify(payload),\n    };\n    return (polyfills.fetch as typeof globalThis.fetch)(\n      `${host}/api/eval/${clientKey}`,\n      options\n    );\n  },\n  eventSourceCall: ({ host, clientKey, headers }) => {\n    if (headers) {\n      return new polyfills.EventSource(`${host}/sub/${clientKey}`, {\n        headers,\n      });\n    }\n    return new polyfills.EventSource(`${host}/sub/${clientKey}`);\n  },\n  startIdleListener: () => {\n    let idleTimeout: number | undefined;\n    const isBrowser =\n      typeof window !== \"undefined\" && typeof document !== \"undefined\";\n    if (!isBrowser) return;\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"visible\") {\n        window.clearTimeout(idleTimeout);\n        onVisible();\n      } else if (document.visibilityState === \"hidden\") {\n        idleTimeout = window.setTimeout(\n          onHidden,\n          cacheSettings.idleStreamInterval\n        );\n      }\n    };\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n    return () =>\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n  },\n  stopIdleListener: () => {\n    // No-op, replaced by startIdleListener\n  },\n};\n\ntry {\n  if (globalThis.localStorage) {\n    polyfills.localStorage = globalThis.localStorage;\n  }\n} catch (e) {\n  // Ignore localStorage errors\n}\n\n// Global state\nconst subscribedInstances: Map<\n  string,\n  Set<GrowthBook | GrowthBookClient>\n> = new Map();\nlet cacheInitialized = false;\nconst cache: Map<string, CacheEntry> = new Map();\nconst activeFetches: Map<string, Promise<FetchResponse>> = new Map();\nconst streams: Map<string, ScopedChannel> = new Map();\nconst supportsSSE: Set<string> = new Set();\n\n// Public functions\nexport function setPolyfills(overrides: Partial<Polyfills>): void {\n  Object.assign(polyfills, overrides);\n}\nexport function configureCache(overrides: Partial<CacheSettings>): void {\n  Object.assign(cacheSettings, overrides);\n  if (!cacheSettings.backgroundSync) {\n    clearAutoRefresh();\n  }\n}\n\nexport async function clearCache(): Promise<void> {\n  cache.clear();\n  activeFetches.clear();\n  clearAutoRefresh();\n  cacheInitialized = false;\n  await updatePersistentCache();\n}\n\n// Get or fetch features and refresh the SDK instance\nexport async function refreshFeatures({\n  instance,\n  timeout,\n  skipCache,\n  allowStale,\n  backgroundSync,\n}: {\n  instance: GrowthBook | GrowthBookClient;\n  timeout?: number;\n  skipCache?: boolean;\n  allowStale?: boolean;\n  backgroundSync?: boolean;\n}): Promise<FetchResponse> {\n  if (!backgroundSync) {\n    cacheSettings.backgroundSync = false;\n  }\n\n  return fetchFeaturesWithCache({\n    instance,\n    allowStale,\n    timeout,\n    skipCache,\n  });\n}\n\n// Subscribe a GrowthBook instance to feature changes\nfunction subscribe(instance: GrowthBook | GrowthBookClient): void {\n  const key = getKey(instance);\n  const subs = subscribedInstances.get(key) || new Set();\n  subs.add(instance);\n  subscribedInstances.set(key, subs);\n}\nexport function unsubscribe(instance: GrowthBook | GrowthBookClient): void {\n  subscribedInstances.forEach((s) => s.delete(instance));\n}\n\nexport function onHidden() {\n  streams.forEach((channel) => {\n    if (!channel) return;\n    channel.state = \"idle\";\n    disableChannel(channel);\n  });\n}\n\nexport function onVisible() {\n  streams.forEach((channel) => {\n    if (!channel) return;\n    if (channel.state !== \"idle\") return;\n    enableChannel(channel);\n  });\n}\n\n// Private functions\n\nasync function updatePersistentCache() {\n  try {\n    if (!polyfills.localStorage) return;\n    await polyfills.localStorage.setItem(\n      cacheSettings.cacheKey,\n      JSON.stringify(Array.from(cache.entries()))\n    );\n  } catch (e) {\n    // Ignore localStorage errors\n  }\n}\n\n// SWR wrapper for fetching features. May indirectly or directly start SSE streaming.\nasync function fetchFeaturesWithCache({\n  instance,\n  allowStale,\n  timeout,\n  skipCache,\n}: {\n  instance: GrowthBook | GrowthBookClient;\n  allowStale?: boolean;\n  timeout?: number;\n  skipCache?: boolean;\n}): Promise<FetchResponse> {\n  const key = getKey(instance);\n  const cacheKey = getCacheKey(instance);\n  const now = new Date();\n\n  const minStaleAt = new Date(\n    now.getTime() - cacheSettings.maxAge + cacheSettings.staleTTL\n  );\n\n  await initializeCache();\n  const existing =\n    !cacheSettings.disableCache && !skipCache ? cache.get(cacheKey) : undefined;\n  if (\n    existing &&\n    (allowStale || existing.staleAt > now) &&\n    existing.staleAt > minStaleAt\n  ) {\n    // Restore from cache whether SSE is supported\n    if (existing.sse) supportsSSE.add(key);\n\n    // Reload features in the background if stale\n    if (existing.staleAt < now) {\n      fetchFeatures(instance);\n    }\n    // Otherwise, if we don't need to refresh now, start a background sync\n    else {\n      startAutoRefresh(instance);\n    }\n    return { data: existing.data, success: true, source: \"cache\" };\n  } else {\n    const res = await promiseTimeout(fetchFeatures(instance), timeout);\n    return (\n      res || {\n        data: null,\n        success: false,\n        source: \"timeout\",\n        error: new Error(\"Timeout\"),\n      }\n    );\n  }\n}\n\nfunction getKey(instance: GrowthBook | GrowthBookClient): string {\n  const [apiHost, clientKey] = instance.getApiInfo();\n  return `${apiHost}||${clientKey}`;\n}\n\nfunction getCacheKey(instance: GrowthBook | GrowthBookClient): string {\n  const baseKey = getKey(instance);\n  if (!(\"isRemoteEval\" in instance) || !instance.isRemoteEval()) return baseKey;\n\n  const attributes = instance.getAttributes();\n  const cacheKeyAttributes =\n    instance.getCacheKeyAttributes() || Object.keys(instance.getAttributes());\n  const ca: Attributes = {};\n  cacheKeyAttributes.forEach((key) => {\n    ca[key] = attributes[key];\n  });\n\n  const fv = instance.getForcedVariations();\n  const url = instance.getUrl();\n\n  return `${baseKey}||${JSON.stringify({\n    ca,\n    fv,\n    url,\n  })}`;\n}\n\n// Populate cache from localStorage (if available)\nasync function initializeCache(): Promise<void> {\n  if (cacheInitialized) return;\n  cacheInitialized = true;\n  try {\n    if (polyfills.localStorage) {\n      const value = await polyfills.localStorage.getItem(\n        cacheSettings.cacheKey\n      );\n      if (!cacheSettings.disableCache && value) {\n        const parsed: [string, CacheEntry][] = JSON.parse(value);\n        if (parsed && Array.isArray(parsed)) {\n          parsed.forEach(([key, data]) => {\n            cache.set(key, {\n              ...data,\n              staleAt: new Date(data.staleAt),\n            });\n          });\n        }\n        cleanupCache();\n      }\n    }\n  } catch (e) {\n    // Ignore localStorage errors\n  }\n  if (!cacheSettings.disableIdleStreams) {\n    const cleanupFn = helpers.startIdleListener();\n    if (cleanupFn) {\n      helpers.stopIdleListener = cleanupFn;\n    }\n  }\n}\n\n// Enforce the maxEntries limit\nfunction cleanupCache() {\n  const entriesWithTimestamps = Array.from(cache.entries())\n    .map(([key, value]) => ({\n      key,\n      staleAt: value.staleAt.getTime(),\n    }))\n    .sort((a, b) => a.staleAt - b.staleAt);\n\n  const entriesToRemoveCount = Math.min(\n    Math.max(0, cache.size - cacheSettings.maxEntries),\n    cache.size\n  );\n\n  for (let i = 0; i < entriesToRemoveCount; i++) {\n    cache.delete(entriesWithTimestamps[i].key);\n  }\n}\n\n// Called whenever new features are fetched from the API\nfunction onNewFeatureData(\n  key: string,\n  cacheKey: string,\n  data: FeatureApiResponse\n): void {\n  // If contents haven't changed, ignore the update, extend the stale TTL\n  const version = data.dateUpdated || \"\";\n  const staleAt = new Date(Date.now() + cacheSettings.staleTTL);\n  const existing = !cacheSettings.disableCache\n    ? cache.get(cacheKey)\n    : undefined;\n  if (existing && version && existing.version === version) {\n    existing.staleAt = staleAt;\n    updatePersistentCache();\n    return;\n  }\n\n  if (!cacheSettings.disableCache) {\n    // Update in-memory cache\n    cache.set(cacheKey, {\n      data,\n      version,\n      staleAt,\n      sse: supportsSSE.has(key),\n    });\n    cleanupCache();\n  }\n  // Update local storage (don't await this, just update asynchronously)\n  updatePersistentCache();\n\n  // Update features for all subscribed GrowthBook instances\n  const instances = subscribedInstances.get(key);\n  instances && instances.forEach((instance) => refreshInstance(instance, data));\n}\n\nasync function refreshInstance(\n  instance: GrowthBook | GrowthBookClient,\n  data: FeatureApiResponse | null\n): Promise<void> {\n  await instance.setPayload(data || instance.getPayload());\n}\n\n// Fetch the features payload from helper function or from in-mem injected payload\nasync function fetchFeatures(\n  instance: GrowthBook | GrowthBookClient\n): Promise<FetchResponse> {\n  const { apiHost, apiRequestHeaders } = instance.getApiHosts();\n  const clientKey = instance.getClientKey();\n  const remoteEval = \"isRemoteEval\" in instance && instance.isRemoteEval();\n  const key = getKey(instance);\n  const cacheKey = getCacheKey(instance);\n\n  let promise = activeFetches.get(cacheKey);\n  if (!promise) {\n    const fetcher: Promise<Response> = remoteEval\n      ? helpers.fetchRemoteEvalCall({\n          host: apiHost,\n          clientKey,\n          payload: {\n            attributes: instance.getAttributes(),\n            forcedVariations: instance.getForcedVariations(),\n            forcedFeatures: Array.from(instance.getForcedFeatures().entries()),\n            url: instance.getUrl(),\n          },\n          headers: apiRequestHeaders,\n        })\n      : helpers.fetchFeaturesCall({\n          host: apiHost,\n          clientKey,\n          headers: apiRequestHeaders,\n        });\n\n    // TODO: auto-retry if status code indicates a temporary error\n    promise = fetcher\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(`HTTP error: ${res.status}`);\n        }\n        if (res.headers.get(\"x-sse-support\") === \"enabled\") {\n          supportsSSE.add(key);\n        }\n        return res.json();\n      })\n      .then((data: FeatureApiResponse) => {\n        onNewFeatureData(key, cacheKey, data);\n        startAutoRefresh(instance);\n        activeFetches.delete(cacheKey);\n        return { data, success: true, source: \"network\" as const };\n      })\n      .catch((e) => {\n        process.env.NODE_ENV !== \"production\" &&\n          instance.log(\"Error fetching features\", {\n            apiHost,\n            clientKey,\n            error: e ? e.message : null,\n          });\n        activeFetches.delete(cacheKey);\n\n        return {\n          data: null,\n          source: \"error\" as const,\n          success: false,\n          error: e,\n        };\n      });\n    activeFetches.set(cacheKey, promise);\n  }\n  return promise;\n}\n\n// Start SSE streaming, listens to feature payload changes and triggers a refresh or re-fetch\nfunction startAutoRefresh(\n  instance: GrowthBook | GrowthBookClient,\n  forceSSE: boolean = false\n): void {\n  const key = getKey(instance);\n  const cacheKey = getCacheKey(instance);\n  const { streamingHost, streamingHostRequestHeaders } = instance.getApiHosts();\n  const clientKey = instance.getClientKey();\n\n  if (forceSSE) {\n    supportsSSE.add(key);\n  }\n\n  if (\n    cacheSettings.backgroundSync &&\n    supportsSSE.has(key) &&\n    polyfills.EventSource\n  ) {\n    if (streams.has(key)) return;\n    const channel: ScopedChannel = {\n      src: null,\n      host: streamingHost,\n      clientKey,\n      headers: streamingHostRequestHeaders,\n      cb: (event: MessageEvent<string>) => {\n        try {\n          if (event.type === \"features-updated\") {\n            const instances = subscribedInstances.get(key);\n            instances &&\n              instances.forEach((instance) => {\n                fetchFeatures(instance);\n              });\n          } else if (event.type === \"features\") {\n            const json: FeatureApiResponse = JSON.parse(event.data);\n            onNewFeatureData(key, cacheKey, json);\n          }\n          // Reset error count on success\n          channel.errors = 0;\n        } catch (e) {\n          process.env.NODE_ENV !== \"production\" &&\n            instance.log(\"SSE Error\", {\n              streamingHost,\n              clientKey,\n              error: e ? (e as Error).message : null,\n            });\n          onSSEError(channel);\n        }\n      },\n      errors: 0,\n      state: \"active\",\n    };\n    streams.set(key, channel);\n    enableChannel(channel);\n  }\n}\n\nfunction onSSEError(channel: ScopedChannel) {\n  if (channel.state === \"idle\") return;\n  channel.errors++;\n  if (channel.errors > 3 || (channel.src && channel.src.readyState === 2)) {\n    // exponential backoff after 4 errors, with jitter\n    const delay =\n      Math.pow(3, channel.errors - 3) * (1000 + Math.random() * 1000);\n    disableChannel(channel);\n    setTimeout(() => {\n      if ([\"idle\", \"active\"].includes(channel.state)) return;\n      enableChannel(channel);\n    }, Math.min(delay, 300000)); // 5 minutes max\n  }\n}\n\nfunction disableChannel(channel: ScopedChannel) {\n  if (!channel.src) return;\n  channel.src.onopen = null;\n  channel.src.onerror = null;\n  channel.src.close();\n  channel.src = null;\n  if (channel.state === \"active\") {\n    channel.state = \"disabled\";\n  }\n}\n\nfunction enableChannel(channel: ScopedChannel) {\n  channel.src = helpers.eventSourceCall({\n    host: channel.host,\n    clientKey: channel.clientKey,\n    headers: channel.headers,\n  }) as EventSource;\n  channel.state = \"active\";\n  channel.src.addEventListener(\"features\", channel.cb);\n  channel.src.addEventListener(\"features-updated\", channel.cb);\n  channel.src.onerror = () => onSSEError(channel);\n  channel.src.onopen = () => {\n    channel.errors = 0;\n  };\n}\n\nfunction destroyChannel(channel: ScopedChannel, key: string) {\n  disableChannel(channel);\n  streams.delete(key);\n}\n\nfunction clearAutoRefresh() {\n  // Clear list of which keys are auto-updated\n  supportsSSE.clear();\n\n  // Stop listening for any SSE events\n  streams.forEach(destroyChannel);\n\n  // Remove all references to GrowthBook instances\n  subscribedInstances.clear();\n\n  // Run the idle stream cleanup function\n  helpers.stopIdleListener();\n}\n\nexport function startStreaming(\n  instance: GrowthBook | GrowthBookClient,\n  options: InitOptions | InitSyncOptions\n) {\n  if (options.streaming) {\n    if (!instance.getClientKey()) {\n      throw new Error(\"Must specify clientKey to enable streaming\");\n    }\n    if (options.payload) {\n      startAutoRefresh(instance, true);\n    }\n    subscribe(instance);\n  }\n}\n"],"names":["getPolyfills","promiseTimeout","cacheSettings","staleTTL","maxAge","cacheKey","backgroundSync","maxEntries","disableIdleStreams","idleStreamInterval","disableCache","polyfills","helpers","fetchFeaturesCall","host","clientKey","headers","fetch","fetchRemoteEvalCall","payload","options","method","body","JSON","stringify","eventSourceCall","EventSource","startIdleListener","idleTimeout","isBrowser","window","document","onVisibilityChange","visibilityState","clearTimeout","onVisible","setTimeout","onHidden","addEventListener","removeEventListener","stopIdleListener","globalThis","localStorage","e","subscribedInstances","Map","cacheInitialized","cache","activeFetches","streams","supportsSSE","Set","setPolyfills","overrides","Object","assign","configureCache","clearAutoRefresh","clearCache","clear","updatePersistentCache","refreshFeatures","instance","timeout","skipCache","allowStale","fetchFeaturesWithCache","subscribe","key","getKey","subs","get","add","set","unsubscribe","forEach","s","delete","channel","state","disableChannel","enableChannel","setItem","Array","from","entries","getCacheKey","now","Date","minStaleAt","getTime","initializeCache","existing","undefined","staleAt","sse","fetchFeatures","startAutoRefresh","data","success","source","res","error","Error","apiHost","getApiInfo","baseKey","isRemoteEval","attributes","getAttributes","cacheKeyAttributes","getCacheKeyAttributes","keys","ca","fv","getForcedVariations","url","getUrl","value","getItem","parsed","parse","isArray","cleanupCache","cleanupFn","entriesWithTimestamps","map","sort","a","b","entriesToRemoveCount","Math","min","max","size","i","onNewFeatureData","version","dateUpdated","has","instances","refreshInstance","setPayload","getPayload","apiRequestHeaders","getApiHosts","getClientKey","remoteEval","promise","fetcher","forcedVariations","forcedFeatures","getForcedFeatures","then","ok","status","json","catch","process","env","NODE_ENV","log","message","forceSSE","streamingHost","streamingHostRequestHeaders","src","cb","event","type","errors","onSSEError","readyState","delay","pow","random","includes","onopen","onerror","close","destroyChannel","startStreaming","streaming"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook/dist/esm/mongrule.mjs","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook/src/mongrule.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { SavedGroupsValues } from \"./types/growthbook\";\nimport {\n  ConditionInterface,\n  TestedObj,\n  ConditionValue,\n  Operator,\n  OperatorConditionValue,\n  VarType,\n} from \"./types/mongrule\";\nimport { paddedVersionString } from \"./util\";\n\nconst _regexCache: { [key: string]: RegExp } = {};\n\n// The top-level condition evaluation function\nexport function evalCondition(\n  obj: TestedObj,\n  condition: ConditionInterface,\n  // Must be included for `condition` to correctly evaluate group Operators\n  savedGroups?: SavedGroupsValues\n): boolean {\n  savedGroups = savedGroups || {};\n  // Condition is an object, keys are either specific operators or object paths\n  // values are either arguments for operators or conditions for paths\n  for (const [k, v] of Object.entries(condition)) {\n    switch (k) {\n      case \"$or\":\n        if (!evalOr(obj, v as ConditionInterface[], savedGroups)) return false;\n        break;\n      case \"$nor\":\n        if (evalOr(obj, v as ConditionInterface[], savedGroups)) return false;\n        break;\n      case \"$and\":\n        if (!evalAnd(obj, v as ConditionInterface[], savedGroups)) return false;\n        break;\n      case \"$not\":\n        if (evalCondition(obj, v as ConditionInterface, savedGroups))\n          return false;\n        break;\n      default:\n        if (!evalConditionValue(v, getPath(obj, k), savedGroups)) return false;\n    }\n  }\n  return true;\n}\n\n// Return value at dot-separated path of an object\nfunction getPath(obj: TestedObj, path: string) {\n  const parts = path.split(\".\");\n  let current: any = obj;\n  for (let i = 0; i < parts.length; i++) {\n    if (current && typeof current === \"object\" && parts[i] in current) {\n      current = current[parts[i]];\n    } else {\n      return null;\n    }\n  }\n  return current;\n}\n\n// Transform a regex string into a real RegExp object\nfunction getRegex(regex: string): RegExp {\n  if (!_regexCache[regex]) {\n    _regexCache[regex] = new RegExp(regex.replace(/([^\\\\])\\//g, \"$1\\\\/\"));\n  }\n  return _regexCache[regex];\n}\n\n// Evaluate a single value against a condition\nfunction evalConditionValue(\n  condition: ConditionValue,\n  value: any,\n  savedGroups: SavedGroupsValues\n) {\n  // Simple equality comparisons\n  if (typeof condition === \"string\") {\n    return value + \"\" === condition;\n  }\n  if (typeof condition === \"number\") {\n    return value * 1 === condition;\n  }\n  if (typeof condition === \"boolean\") {\n    return value !== null && !!value === condition;\n  }\n\n  if (condition === null) {\n    return value === null;\n  }\n\n  if (Array.isArray(condition) || !isOperatorObject(condition)) {\n    return JSON.stringify(value) === JSON.stringify(condition);\n  }\n\n  // This is a special operator condition and we should evaluate each one separately\n  for (const op in condition) {\n    if (\n      !evalOperatorCondition(\n        op as Operator,\n        value,\n        condition[op as keyof OperatorConditionValue],\n        savedGroups\n      )\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// If the object has only keys that start with '$'\nfunction isOperatorObject(obj: any): boolean {\n  const keys = Object.keys(obj);\n  return (\n    keys.length > 0 && keys.filter((k) => k[0] === \"$\").length === keys.length\n  );\n}\n\n// Return the data type of a value\nfunction getType(v: any): VarType | \"unknown\" {\n  if (v === null) return \"null\";\n  if (Array.isArray(v)) return \"array\";\n  const t = typeof v;\n  if ([\"string\", \"number\", \"boolean\", \"object\", \"undefined\"].includes(t)) {\n    return t as VarType;\n  }\n  return \"unknown\";\n}\n\n// At least one element of actual must match the expected condition/value\nfunction elemMatch(actual: any, expected: any, savedGroups: SavedGroupsValues) {\n  if (!Array.isArray(actual)) return false;\n  const check = isOperatorObject(expected)\n    ? (v: any) => evalConditionValue(expected, v, savedGroups)\n    : (v: any) => evalCondition(v, expected, savedGroups);\n  for (let i = 0; i < actual.length; i++) {\n    if (actual[i] && check(actual[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isIn(actual: any, expected: Array<any>): boolean {\n  // Do an intersection if attribute is an array\n  if (Array.isArray(actual)) {\n    return actual.some((el) => expected.includes(el));\n  }\n  return expected.includes(actual);\n}\n\n// Evaluate a single operator condition\nfunction evalOperatorCondition(\n  operator: Operator,\n  actual: any,\n  expected: any,\n  savedGroups: SavedGroupsValues\n): boolean {\n  switch (operator) {\n    case \"$veq\":\n      return paddedVersionString(actual) === paddedVersionString(expected);\n    case \"$vne\":\n      return paddedVersionString(actual) !== paddedVersionString(expected);\n    case \"$vgt\":\n      return paddedVersionString(actual) > paddedVersionString(expected);\n    case \"$vgte\":\n      return paddedVersionString(actual) >= paddedVersionString(expected);\n    case \"$vlt\":\n      return paddedVersionString(actual) < paddedVersionString(expected);\n    case \"$vlte\":\n      return paddedVersionString(actual) <= paddedVersionString(expected);\n    case \"$eq\":\n      return actual === expected;\n    case \"$ne\":\n      return actual !== expected;\n    case \"$lt\":\n      return actual < expected;\n    case \"$lte\":\n      return actual <= expected;\n    case \"$gt\":\n      return actual > expected;\n    case \"$gte\":\n      return actual >= expected;\n    case \"$exists\":\n      // Using `!=` and `==` instead of strict checks so it also matches for undefined\n      return expected ? actual != null : actual == null;\n    case \"$in\":\n      if (!Array.isArray(expected)) return false;\n      return isIn(actual, expected);\n    case \"$inGroup\":\n      return isIn(actual, savedGroups[expected] || []);\n    case \"$notInGroup\":\n      return !isIn(actual, savedGroups[expected] || []);\n    case \"$nin\":\n      if (!Array.isArray(expected)) return false;\n      return !isIn(actual, expected);\n    case \"$not\":\n      return !evalConditionValue(expected, actual, savedGroups);\n    case \"$size\":\n      if (!Array.isArray(actual)) return false;\n      return evalConditionValue(expected, actual.length, savedGroups);\n    case \"$elemMatch\":\n      return elemMatch(actual, expected, savedGroups);\n    case \"$all\":\n      if (!Array.isArray(actual)) return false;\n      for (let i = 0; i < expected.length; i++) {\n        let passed = false;\n        for (let j = 0; j < actual.length; j++) {\n          if (evalConditionValue(expected[i], actual[j], savedGroups)) {\n            passed = true;\n            break;\n          }\n        }\n        if (!passed) return false;\n      }\n      return true;\n    case \"$regex\":\n      try {\n        return getRegex(expected).test(actual);\n      } catch (e) {\n        return false;\n      }\n    case \"$type\":\n      return getType(actual) === expected;\n    default:\n      console.error(\"Unknown operator: \" + operator);\n      return false;\n  }\n}\n\n// Recursive $or rule\nfunction evalOr(\n  obj: TestedObj,\n  conditions: ConditionInterface[],\n  savedGroups: SavedGroupsValues\n): boolean {\n  if (!conditions.length) return true;\n  for (let i = 0; i < conditions.length; i++) {\n    if (evalCondition(obj, conditions[i], savedGroups)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// Recursive $and rule\nfunction evalAnd(\n  obj: TestedObj,\n  conditions: ConditionInterface[],\n  savedGroups: SavedGroupsValues\n): boolean {\n  for (let i = 0; i < conditions.length; i++) {\n    if (!evalCondition(obj, conditions[i], savedGroups)) {\n      return false;\n    }\n  }\n  return true;\n}\n"],"names":["paddedVersionString","_regexCache","evalCondition","obj","condition","savedGroups","k","v","Object","entries","evalOr","evalAnd","evalConditionValue","getPath","path","parts","split","current","i","length","getRegex","regex","RegExp","replace","value","Array","isArray","isOperatorObject","JSON","stringify","op","evalOperatorCondition","keys","filter","getType","t","includes","elemMatch","actual","expected","check","isIn","some","el","operator","passed","j","test","e","console","error","conditions"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1478, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook/dist/esm/core.mjs","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook/src/core.ts"],"sourcesContent":["import {\n  EvalContext,\n  FeatureDefinition,\n  FeatureResult,\n  Experiment,\n  FeatureResultSource,\n  Result,\n  Filter,\n  VariationRange,\n  VariationMeta,\n  StickyExperimentKey,\n  StickyAssignments,\n  StickyAttributeKey,\n  StickyAssignmentsDocument,\n  FeatureApiResponse,\n  Options,\n  ClientOptions,\n} from \"./types/growthbook\";\nimport { evalCondition } from \"./mongrule\";\nimport { ConditionInterface } from \"./types/mongrule\";\nimport {\n  chooseVariation,\n  decrypt,\n  getBucketRanges,\n  getQueryStringOverride,\n  getUrlRegExp,\n  hash,\n  inNamespace,\n  inRange,\n  isIncluded,\n  isURLTargeted,\n  toString,\n} from \"./util\";\nimport { StickyBucketService } from \"./sticky-bucket-service\";\n\nexport const EVENT_FEATURE_EVALUATED = \"Feature Evaluated\";\nexport const EVENT_EXPERIMENT_VIEWED = \"Experiment Viewed\";\n\nfunction getForcedFeatureValues(ctx: EvalContext) {\n  // Merge user and global values\n  const ret: typeof ctx.global.forcedFeatureValues = new Map();\n  if (ctx.global.forcedFeatureValues) {\n    ctx.global.forcedFeatureValues.forEach((v, k) => ret.set(k, v));\n  }\n  if (ctx.user.forcedFeatureValues) {\n    ctx.user.forcedFeatureValues.forEach((v, k) => ret.set(k, v));\n  }\n  return ret;\n}\n\nfunction getForcedVariations(ctx: EvalContext) {\n  // Merge user and global values\n  if (ctx.global.forcedVariations && ctx.user.forcedVariations) {\n    return { ...ctx.global.forcedVariations, ...ctx.user.forcedVariations };\n  } else if (ctx.global.forcedVariations) {\n    return ctx.global.forcedVariations;\n  } else if (ctx.user.forcedVariations) {\n    return ctx.user.forcedVariations;\n  } else {\n    return {};\n  }\n}\n\nasync function safeCall(fn: () => void | Promise<void>) {\n  try {\n    await fn();\n  } catch (e) {\n    // Do nothing\n  }\n}\n\nfunction onExperimentViewed(\n  ctx: EvalContext,\n  experiment: Experiment<unknown>,\n  result: Result<unknown>\n): Promise<void>[] {\n  // Make sure a tracking callback is only fired once per unique experiment\n  if (ctx.user.trackedExperiments) {\n    const k = getExperimentDedupeKey(experiment, result);\n    if (ctx.user.trackedExperiments.has(k)) {\n      return [];\n    }\n    ctx.user.trackedExperiments.add(k);\n  }\n\n  if (ctx.user.enableDevMode && ctx.user.devLogs) {\n    ctx.user.devLogs.push({\n      experiment,\n      result,\n      timestamp: Date.now().toString(),\n      logType: \"experiment\",\n    });\n  }\n\n  const calls: Promise<void>[] = [];\n\n  if (ctx.global.trackingCallback) {\n    const cb = ctx.global.trackingCallback;\n    calls.push(safeCall(() => cb(experiment, result, ctx.user)));\n  }\n  if (ctx.user.trackingCallback) {\n    const cb = ctx.user.trackingCallback;\n    calls.push(safeCall(() => cb(experiment, result)));\n  }\n  if (ctx.global.eventLogger) {\n    const cb = ctx.global.eventLogger;\n    calls.push(\n      safeCall(() =>\n        cb(\n          EVENT_EXPERIMENT_VIEWED,\n          {\n            experimentId: experiment.key,\n            variationId: result.key,\n            hashAttribute: result.hashAttribute,\n            hashValue: result.hashValue,\n          },\n          ctx.user\n        )\n      )\n    );\n  }\n  return calls;\n}\n\nfunction onFeatureUsage(\n  ctx: EvalContext,\n  key: string,\n  ret: FeatureResult<unknown>\n): void {\n  // Only track a feature once, unless the assigned value changed\n  if (ctx.user.trackedFeatureUsage) {\n    const stringifiedValue = JSON.stringify(ret.value);\n    if (ctx.user.trackedFeatureUsage[key] === stringifiedValue) return;\n    ctx.user.trackedFeatureUsage[key] = stringifiedValue;\n\n    if (ctx.user.enableDevMode && ctx.user.devLogs) {\n      ctx.user.devLogs.push({\n        featureKey: key,\n        result: ret,\n        timestamp: Date.now().toString(),\n        logType: \"feature\",\n      });\n    }\n  }\n\n  if (ctx.global.onFeatureUsage) {\n    const cb = ctx.global.onFeatureUsage;\n    safeCall(() => cb(key, ret, ctx.user));\n  }\n  if (ctx.user.onFeatureUsage) {\n    const cb = ctx.user.onFeatureUsage;\n    safeCall(() => cb(key, ret));\n  }\n  if (ctx.global.eventLogger) {\n    const cb = ctx.global.eventLogger;\n    safeCall(() =>\n      cb(\n        EVENT_FEATURE_EVALUATED,\n        {\n          feature: key,\n          source: ret.source,\n          value: ret.value,\n          ruleId: ret.source === \"defaultValue\" ? \"$default\" : ret.ruleId || \"\",\n          variationId: ret.experimentResult ? ret.experimentResult.key : \"\",\n        },\n        ctx.user\n      )\n    );\n  }\n}\n\nexport function evalFeature<V = unknown>(\n  id: string,\n  ctx: EvalContext\n): FeatureResult<V | null> {\n  if (ctx.stack.evaluatedFeatures.has(id)) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\n        `evalFeature: circular dependency detected: ${ctx.stack.id} -> ${id}`,\n        {\n          from: ctx.stack.id,\n          to: id,\n        }\n      );\n    return getFeatureResult(ctx, id, null, \"cyclicPrerequisite\");\n  }\n  ctx.stack.evaluatedFeatures.add(id);\n  ctx.stack.id = id;\n\n  // Global override\n  const forcedValues = getForcedFeatureValues(ctx);\n  if (forcedValues.has(id)) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Global override\", {\n        id,\n        value: forcedValues.get(id),\n      });\n    return getFeatureResult(ctx, id, forcedValues.get(id), \"override\");\n  }\n\n  // Unknown feature id\n  if (!ctx.global.features || !ctx.global.features[id]) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Unknown feature\", { id });\n    return getFeatureResult(ctx, id, null, \"unknownFeature\");\n  }\n\n  // Get the feature\n  const feature: FeatureDefinition<V> = ctx.global.features[id];\n\n  // Loop through the rules\n  if (feature.rules) {\n    const evaluatedFeatures = new Set(ctx.stack.evaluatedFeatures);\n    rules: for (const rule of feature.rules) {\n      // If there are prerequisite flag(s), evaluate them\n      if (rule.parentConditions) {\n        for (const parentCondition of rule.parentConditions) {\n          ctx.stack.evaluatedFeatures = new Set(evaluatedFeatures);\n          const parentResult = evalFeature(parentCondition.id, ctx);\n          // break out for cyclic prerequisites\n          if (parentResult.source === \"cyclicPrerequisite\") {\n            return getFeatureResult(ctx, id, null, \"cyclicPrerequisite\");\n          }\n\n          const evalObj = { value: parentResult.value };\n          const evaled = evalCondition(\n            evalObj,\n            parentCondition.condition || {}\n          );\n          if (!evaled) {\n            // blocking prerequisite eval failed: feature evaluation fails\n            if (parentCondition.gate) {\n              process.env.NODE_ENV !== \"production\" &&\n                ctx.global.log(\"Feature blocked by prerequisite\", { id, rule });\n              return getFeatureResult(ctx, id, null, \"prerequisite\");\n            }\n            // non-blocking prerequisite eval failed: break out of parentConditions loop, jump to the next rule\n            process.env.NODE_ENV !== \"production\" &&\n              ctx.global.log(\n                \"Skip rule because prerequisite evaluation fails\",\n                {\n                  id,\n                  rule,\n                }\n              );\n            continue rules;\n          }\n        }\n      }\n\n      // If there are filters for who is included (e.g. namespaces)\n      if (rule.filters && isFilteredOut(rule.filters, ctx)) {\n        process.env.NODE_ENV !== \"production\" &&\n          ctx.global.log(\"Skip rule because of filters\", {\n            id,\n            rule,\n          });\n        continue;\n      }\n\n      // Feature value is being forced\n      if (\"force\" in rule) {\n        // If it's a conditional rule, skip if the condition doesn't pass\n        if (rule.condition && !conditionPasses(rule.condition, ctx)) {\n          process.env.NODE_ENV !== \"production\" &&\n            ctx.global.log(\"Skip rule because of condition ff\", {\n              id,\n              rule,\n            });\n          continue;\n        }\n\n        // If this is a percentage rollout, skip if not included\n        if (\n          !isIncludedInRollout(\n            ctx,\n            rule.seed || id,\n            rule.hashAttribute,\n            ctx.user.saveStickyBucketAssignmentDoc &&\n              !rule.disableStickyBucketing\n              ? rule.fallbackAttribute\n              : undefined,\n            rule.range,\n            rule.coverage,\n            rule.hashVersion\n          )\n        ) {\n          process.env.NODE_ENV !== \"production\" &&\n            ctx.global.log(\"Skip rule because user not included in rollout\", {\n              id,\n              rule,\n            });\n          continue;\n        }\n\n        process.env.NODE_ENV !== \"production\" &&\n          ctx.global.log(\"Force value from rule\", {\n            id,\n            rule,\n          });\n\n        // If this was a remotely evaluated experiment, fire the tracking callbacks\n        if (rule.tracks) {\n          rule.tracks.forEach((t) => {\n            const calls = onExperimentViewed(ctx, t.experiment, t.result);\n            if (!calls.length && ctx.global.saveDeferredTrack) {\n              ctx.global.saveDeferredTrack({\n                experiment: t.experiment,\n                result: t.result,\n              });\n            }\n          });\n        }\n\n        return getFeatureResult(ctx, id, rule.force as V, \"force\", rule.id);\n      }\n      if (!rule.variations) {\n        process.env.NODE_ENV !== \"production\" &&\n          ctx.global.log(\"Skip invalid rule\", {\n            id,\n            rule,\n          });\n\n        continue;\n      }\n\n      // For experiment rules, run an experiment\n      const exp: Experiment<V> = {\n        variations: rule.variations as [V, V, ...V[]],\n        key: rule.key || id,\n      };\n      if (\"coverage\" in rule) exp.coverage = rule.coverage;\n      if (rule.weights) exp.weights = rule.weights;\n      if (rule.hashAttribute) exp.hashAttribute = rule.hashAttribute;\n      if (rule.fallbackAttribute)\n        exp.fallbackAttribute = rule.fallbackAttribute;\n      if (rule.disableStickyBucketing)\n        exp.disableStickyBucketing = rule.disableStickyBucketing;\n      if (rule.bucketVersion !== undefined)\n        exp.bucketVersion = rule.bucketVersion;\n      if (rule.minBucketVersion !== undefined)\n        exp.minBucketVersion = rule.minBucketVersion;\n      if (rule.namespace) exp.namespace = rule.namespace;\n      if (rule.meta) exp.meta = rule.meta;\n      if (rule.ranges) exp.ranges = rule.ranges;\n      if (rule.name) exp.name = rule.name;\n      if (rule.phase) exp.phase = rule.phase;\n      if (rule.seed) exp.seed = rule.seed;\n      if (rule.hashVersion) exp.hashVersion = rule.hashVersion;\n      if (rule.filters) exp.filters = rule.filters;\n      if (rule.condition) exp.condition = rule.condition;\n\n      // Only return a value if the user is part of the experiment\n      const { result } = runExperiment(exp, id, ctx);\n      ctx.global.onExperimentEval && ctx.global.onExperimentEval(exp, result);\n      if (result.inExperiment && !result.passthrough) {\n        return getFeatureResult(\n          ctx,\n          id,\n          result.value,\n          \"experiment\",\n          rule.id,\n          exp,\n          result\n        );\n      }\n    }\n  }\n\n  process.env.NODE_ENV !== \"production\" &&\n    ctx.global.log(\"Use default value\", {\n      id,\n      value: feature.defaultValue,\n    });\n\n  // Fall back to using the default value\n  return getFeatureResult(\n    ctx,\n    id,\n    feature.defaultValue === undefined ? null : feature.defaultValue,\n    \"defaultValue\"\n  );\n}\n\nexport function runExperiment<T>(\n  experiment: Experiment<T>,\n  featureId: string | null,\n  ctx: EvalContext\n): {\n  result: Result<T>;\n  trackingCall?: Promise<void>;\n} {\n  const key = experiment.key;\n  const numVariations = experiment.variations.length;\n\n  // 1. If experiment has less than 2 variations, return immediately\n  if (numVariations < 2) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Invalid experiment\", { id: key });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 2. If the context is disabled, return immediately\n  if (ctx.global.enabled === false || ctx.user.enabled === false) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Context disabled\", { id: key });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 2.5. Merge in experiment overrides from the context\n  experiment = mergeOverrides(experiment, ctx);\n\n  // 2.6 New, more powerful URL targeting\n  if (\n    experiment.urlPatterns &&\n    !isURLTargeted(ctx.user.url || \"\", experiment.urlPatterns)\n  ) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because of url targeting\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 3. If a variation is forced from a querystring, return the forced variation\n  const qsOverride = getQueryStringOverride(\n    key,\n    ctx.user.url || \"\",\n    numVariations\n  );\n  if (qsOverride !== null) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Force via querystring\", {\n        id: key,\n        variation: qsOverride,\n      });\n    return {\n      result: getExperimentResult(\n        ctx,\n        experiment,\n        qsOverride,\n        false,\n        featureId\n      ),\n    };\n  }\n\n  // 4. If a variation is forced in the context, return the forced variation\n  const forcedVariations = getForcedVariations(ctx);\n  if (key in forcedVariations) {\n    const variation = forcedVariations[key];\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Force via dev tools\", {\n        id: key,\n        variation,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, variation, false, featureId),\n    };\n  }\n\n  // 5. Exclude if a draft experiment or not active\n  if (experiment.status === \"draft\" || experiment.active === false) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because inactive\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 6. Get the hash attribute and return if empty\n  const { hashAttribute, hashValue } = getHashAttribute(\n    ctx,\n    experiment.hashAttribute,\n    ctx.user.saveStickyBucketAssignmentDoc && !experiment.disableStickyBucketing\n      ? experiment.fallbackAttribute\n      : undefined\n  );\n  if (!hashValue) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because missing hashAttribute\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  let assigned = -1;\n\n  let foundStickyBucket = false;\n  let stickyBucketVersionIsBlocked = false;\n  if (\n    ctx.user.saveStickyBucketAssignmentDoc &&\n    !experiment.disableStickyBucketing\n  ) {\n    const { variation, versionIsBlocked } = getStickyBucketVariation({\n      ctx,\n      expKey: experiment.key,\n      expBucketVersion: experiment.bucketVersion,\n      expHashAttribute: experiment.hashAttribute,\n      expFallbackAttribute: experiment.fallbackAttribute,\n      expMinBucketVersion: experiment.minBucketVersion,\n      expMeta: experiment.meta,\n    });\n    foundStickyBucket = variation >= 0;\n    assigned = variation;\n    stickyBucketVersionIsBlocked = !!versionIsBlocked;\n  }\n\n  // Some checks are not needed if we already have a sticky bucket\n  if (!foundStickyBucket) {\n    // 7. Exclude if user is filtered out (used to be called \"namespace\")\n    if (experiment.filters) {\n      if (isFilteredOut(experiment.filters, ctx)) {\n        process.env.NODE_ENV !== \"production\" &&\n          ctx.global.log(\"Skip because of filters\", {\n            id: key,\n          });\n        return {\n          result: getExperimentResult(ctx, experiment, -1, false, featureId),\n        };\n      }\n    } else if (\n      experiment.namespace &&\n      !inNamespace(hashValue, experiment.namespace)\n    ) {\n      process.env.NODE_ENV !== \"production\" &&\n        ctx.global.log(\"Skip because of namespace\", {\n          id: key,\n        });\n      return {\n        result: getExperimentResult(ctx, experiment, -1, false, featureId),\n      };\n    }\n\n    // 7.5. Exclude if experiment.include returns false or throws\n    if (experiment.include && !isIncluded(experiment.include)) {\n      process.env.NODE_ENV !== \"production\" &&\n        ctx.global.log(\"Skip because of include function\", {\n          id: key,\n        });\n      return {\n        result: getExperimentResult(ctx, experiment, -1, false, featureId),\n      };\n    }\n\n    // 8. Exclude if condition is false\n    if (experiment.condition && !conditionPasses(experiment.condition, ctx)) {\n      process.env.NODE_ENV !== \"production\" &&\n        ctx.global.log(\"Skip because of condition exp\", {\n          id: key,\n        });\n      return {\n        result: getExperimentResult(ctx, experiment, -1, false, featureId),\n      };\n    }\n\n    // 8.05. Exclude if prerequisites are not met\n    if (experiment.parentConditions) {\n      const evaluatedFeatures = new Set(ctx.stack.evaluatedFeatures);\n      for (const parentCondition of experiment.parentConditions) {\n        ctx.stack.evaluatedFeatures = new Set(evaluatedFeatures);\n        const parentResult = evalFeature(parentCondition.id, ctx);\n        // break out for cyclic prerequisites\n        if (parentResult.source === \"cyclicPrerequisite\") {\n          return {\n            result: getExperimentResult(ctx, experiment, -1, false, featureId),\n          };\n        }\n\n        const evalObj = { value: parentResult.value };\n        if (!evalCondition(evalObj, parentCondition.condition || {})) {\n          process.env.NODE_ENV !== \"production\" &&\n            ctx.global.log(\"Skip because prerequisite evaluation fails\", {\n              id: key,\n            });\n          return {\n            result: getExperimentResult(ctx, experiment, -1, false, featureId),\n          };\n        }\n      }\n    }\n\n    // 8.1. Exclude if user is not in a required group\n    if (\n      experiment.groups &&\n      !hasGroupOverlap(experiment.groups as string[], ctx)\n    ) {\n      process.env.NODE_ENV !== \"production\" &&\n        ctx.global.log(\"Skip because of groups\", {\n          id: key,\n        });\n      return {\n        result: getExperimentResult(ctx, experiment, -1, false, featureId),\n      };\n    }\n  }\n\n  // 8.2. Old style URL targeting\n  if (experiment.url && !urlIsValid(experiment.url as RegExp, ctx)) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because of url\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 9. Get the variation from the sticky bucket or get bucket ranges and choose variation\n  const n = hash(\n    experiment.seed || key,\n    hashValue,\n    experiment.hashVersion || 1\n  );\n  if (n === null) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because of invalid hash version\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  if (!foundStickyBucket) {\n    const ranges =\n      experiment.ranges ||\n      getBucketRanges(\n        numVariations,\n        experiment.coverage === undefined ? 1 : experiment.coverage,\n        experiment.weights\n      );\n    assigned = chooseVariation(n, ranges);\n  }\n\n  // 9.5 Unenroll if any prior sticky buckets are blocked by version\n  if (stickyBucketVersionIsBlocked) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because sticky bucket version is blocked\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(\n        ctx,\n        experiment,\n        -1,\n        false,\n        featureId,\n        undefined,\n        true\n      ),\n    };\n  }\n\n  // 10. Return if not in experiment\n  if (assigned < 0) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because of coverage\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 11. Experiment has a forced variation\n  if (\"force\" in experiment) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Force variation\", {\n        id: key,\n        variation: experiment.force,\n      });\n    return {\n      result: getExperimentResult(\n        ctx,\n        experiment,\n        experiment.force === undefined ? -1 : experiment.force,\n        false,\n        featureId\n      ),\n    };\n  }\n\n  // 12. Exclude if in QA mode\n  if (ctx.global.qaMode || ctx.user.qaMode) {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because QA mode\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 12.5. Exclude if experiment is stopped\n  if (experiment.status === \"stopped\") {\n    process.env.NODE_ENV !== \"production\" &&\n      ctx.global.log(\"Skip because stopped\", {\n        id: key,\n      });\n    return {\n      result: getExperimentResult(ctx, experiment, -1, false, featureId),\n    };\n  }\n\n  // 13. Build the result object\n  const result = getExperimentResult(\n    ctx,\n    experiment,\n    assigned,\n    true,\n    featureId,\n    n,\n    foundStickyBucket\n  );\n\n  // 13.5. Persist sticky bucket\n  if (\n    ctx.user.saveStickyBucketAssignmentDoc &&\n    !experiment.disableStickyBucketing\n  ) {\n    const { changed, key: attrKey, doc } = generateStickyBucketAssignmentDoc(\n      ctx,\n      hashAttribute,\n      toString(hashValue),\n      {\n        [getStickyBucketExperimentKey(\n          experiment.key,\n          experiment.bucketVersion\n        )]: result.key,\n      }\n    );\n    if (changed) {\n      // update local docs\n      ctx.user.stickyBucketAssignmentDocs =\n        ctx.user.stickyBucketAssignmentDocs || {};\n      ctx.user.stickyBucketAssignmentDocs[attrKey] = doc;\n      // save doc\n      ctx.user.saveStickyBucketAssignmentDoc(doc);\n    }\n  }\n\n  // 14. Fire the tracking callback(s)\n  // Store the promise in case we're awaiting it (ex: browser url redirects)\n  const trackingCalls = onExperimentViewed(ctx, experiment, result);\n  if (trackingCalls.length === 0 && ctx.global.saveDeferredTrack) {\n    ctx.global.saveDeferredTrack({\n      experiment,\n      result,\n    });\n  }\n  const trackingCall = !trackingCalls.length\n    ? undefined\n    : trackingCalls.length === 1\n    ? trackingCalls[0]\n    : Promise.all(trackingCalls).then(() => {});\n\n  // 14.1 Keep track of completed changeIds\n  \"changeId\" in experiment &&\n    experiment.changeId &&\n    ctx.global.recordChangeId &&\n    ctx.global.recordChangeId(experiment.changeId as string);\n\n  // 15. Return the result\n  process.env.NODE_ENV !== \"production\" &&\n    ctx.global.log(\"In experiment\", {\n      id: key,\n      variation: result.variationId,\n    });\n  return { result, trackingCall };\n}\n\nfunction getFeatureResult<T>(\n  ctx: EvalContext,\n  key: string,\n  value: T,\n  source: FeatureResultSource,\n  ruleId?: string,\n  experiment?: Experiment<T>,\n  result?: Result<T>\n): FeatureResult<T> {\n  const ret: FeatureResult = {\n    value,\n    on: !!value,\n    off: !value,\n    source,\n    ruleId: ruleId || \"\",\n  };\n  if (experiment) ret.experiment = experiment;\n  if (result) ret.experimentResult = result;\n\n  // Track the usage of this feature in real-time\n  if (source !== \"override\") {\n    onFeatureUsage(ctx, key, ret);\n  }\n\n  return ret;\n}\n\nfunction getAttributes(ctx: EvalContext) {\n  return {\n    ...ctx.user.attributes,\n    ...ctx.user.attributeOverrides,\n  };\n}\n\nfunction conditionPasses(\n  condition: ConditionInterface,\n  ctx: EvalContext\n): boolean {\n  return evalCondition(\n    getAttributes(ctx),\n    condition,\n    ctx.global.savedGroups || {}\n  );\n}\n\nfunction isFilteredOut(filters: Filter[], ctx: EvalContext): boolean {\n  return filters.some((filter) => {\n    const { hashValue } = getHashAttribute(ctx, filter.attribute);\n    if (!hashValue) return true;\n    const n = hash(filter.seed, hashValue, filter.hashVersion || 2);\n    if (n === null) return true;\n    return !filter.ranges.some((r) => inRange(n, r));\n  });\n}\n\nfunction isIncludedInRollout(\n  ctx: EvalContext,\n  seed: string,\n  hashAttribute: string | undefined,\n  fallbackAttribute: string | undefined,\n  range: VariationRange | undefined,\n  coverage: number | undefined,\n  hashVersion: number | undefined\n): boolean {\n  if (!range && coverage === undefined) return true;\n\n  if (!range && coverage === 0) return false;\n\n  const { hashValue } = getHashAttribute(ctx, hashAttribute, fallbackAttribute);\n  if (!hashValue) {\n    return false;\n  }\n\n  const n = hash(seed, hashValue, hashVersion || 1);\n  if (n === null) return false;\n\n  return range\n    ? inRange(n, range)\n    : coverage !== undefined\n    ? n <= coverage\n    : true;\n}\n\nexport function getExperimentResult<T>(\n  ctx: EvalContext,\n  experiment: Experiment<T>,\n  variationIndex: number,\n  hashUsed: boolean,\n  featureId: string | null,\n  bucket?: number,\n  stickyBucketUsed?: boolean\n): Result<T> {\n  let inExperiment = true;\n  // If assigned variation is not valid, use the baseline and mark the user as not in the experiment\n  if (variationIndex < 0 || variationIndex >= experiment.variations.length) {\n    variationIndex = 0;\n    inExperiment = false;\n  }\n\n  const { hashAttribute, hashValue } = getHashAttribute(\n    ctx,\n    experiment.hashAttribute,\n    ctx.user.saveStickyBucketAssignmentDoc && !experiment.disableStickyBucketing\n      ? experiment.fallbackAttribute\n      : undefined\n  );\n\n  const meta: Partial<VariationMeta> = experiment.meta\n    ? experiment.meta[variationIndex]\n    : {};\n\n  const res: Result<T> = {\n    key: meta.key || \"\" + variationIndex,\n    featureId,\n    inExperiment,\n    hashUsed,\n    variationId: variationIndex,\n    value: experiment.variations[variationIndex],\n    hashAttribute,\n    hashValue,\n    stickyBucketUsed: !!stickyBucketUsed,\n  };\n\n  if (meta.name) res.name = meta.name;\n  if (bucket !== undefined) res.bucket = bucket;\n  if (meta.passthrough) res.passthrough = meta.passthrough;\n\n  return res;\n}\n\nfunction mergeOverrides<T>(\n  experiment: Experiment<T>,\n  ctx: EvalContext\n): Experiment<T> {\n  const key = experiment.key;\n  const o = ctx.global.overrides;\n  if (o && o[key]) {\n    experiment = Object.assign({}, experiment, o[key]);\n    if (typeof experiment.url === \"string\") {\n      experiment.url = getUrlRegExp(\n        // eslint-disable-next-line\n        experiment.url as any\n      );\n    }\n  }\n\n  return experiment;\n}\n\nexport function getHashAttribute(\n  ctx: EvalContext,\n  attr?: string,\n  fallback?: string\n) {\n  let hashAttribute = attr || \"id\";\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let hashValue: any = \"\";\n\n  const attributes = getAttributes(ctx);\n\n  if (attributes[hashAttribute]) {\n    hashValue = attributes[hashAttribute];\n  }\n\n  // if no match, try fallback\n  if (!hashValue && fallback) {\n    if (attributes[fallback]) {\n      hashValue = attributes[fallback];\n    }\n    if (hashValue) {\n      hashAttribute = fallback;\n    }\n  }\n\n  return { hashAttribute, hashValue };\n}\n\nfunction urlIsValid(urlRegex: RegExp, ctx: EvalContext): boolean {\n  const url = ctx.user.url;\n  if (!url) return false;\n\n  const pathOnly = url.replace(/^https?:\\/\\//, \"\").replace(/^[^/]*\\//, \"/\");\n\n  if (urlRegex.test(url)) return true;\n  if (urlRegex.test(pathOnly)) return true;\n  return false;\n}\n\nfunction hasGroupOverlap(expGroups: string[], ctx: EvalContext): boolean {\n  const groups = ctx.global.groups || {};\n  for (let i = 0; i < expGroups.length; i++) {\n    if (groups[expGroups[i]]) return true;\n  }\n  return false;\n}\n\nfunction getStickyBucketVariation({\n  ctx,\n  expKey,\n  expBucketVersion,\n  expHashAttribute,\n  expFallbackAttribute,\n  expMinBucketVersion,\n  expMeta,\n}: {\n  ctx: EvalContext;\n  expKey: string;\n  expBucketVersion?: number;\n  expHashAttribute?: string;\n  expFallbackAttribute?: string;\n  expMinBucketVersion?: number;\n  expMeta?: VariationMeta[];\n}): {\n  variation: number;\n  versionIsBlocked?: boolean;\n} {\n  expBucketVersion = expBucketVersion || 0;\n  expMinBucketVersion = expMinBucketVersion || 0;\n  expHashAttribute = expHashAttribute || \"id\";\n  expMeta = expMeta || [];\n  const id = getStickyBucketExperimentKey(expKey, expBucketVersion);\n  const assignments = getStickyBucketAssignments(\n    ctx,\n    expHashAttribute,\n    expFallbackAttribute\n  );\n\n  // users with any blocked bucket version (0 to minExperimentBucketVersion) are excluded from the test\n  if (expMinBucketVersion > 0) {\n    for (let i = 0; i <= expMinBucketVersion; i++) {\n      const blockedKey = getStickyBucketExperimentKey(expKey, i);\n      if (assignments[blockedKey] !== undefined) {\n        return {\n          variation: -1,\n          versionIsBlocked: true,\n        };\n      }\n    }\n  }\n  const variationKey = assignments[id];\n  if (variationKey === undefined)\n    // no assignment found\n    return { variation: -1 };\n  const variation = expMeta.findIndex((m) => m.key === variationKey);\n  if (variation < 0)\n    // invalid assignment, treat as \"no assignment found\"\n    return { variation: -1 };\n\n  return { variation };\n}\n\nfunction getStickyBucketExperimentKey(\n  experimentKey: string,\n  experimentBucketVersion?: number\n): StickyExperimentKey {\n  experimentBucketVersion = experimentBucketVersion || 0;\n  return `${experimentKey}__${experimentBucketVersion}`;\n}\n\nexport function getStickyBucketAttributeKey(\n  attributeName: string,\n  attributeValue: string\n): StickyAttributeKey {\n  return `${attributeName}||${attributeValue}`;\n}\n\nfunction getStickyBucketAssignments(\n  ctx: EvalContext,\n  expHashAttribute: string,\n  expFallbackAttribute?: string\n): StickyAssignments {\n  if (!ctx.user.stickyBucketAssignmentDocs) return {};\n  const { hashAttribute, hashValue } = getHashAttribute(ctx, expHashAttribute);\n  const hashKey = getStickyBucketAttributeKey(\n    hashAttribute,\n    toString(hashValue)\n  );\n\n  const {\n    hashAttribute: fallbackAttribute,\n    hashValue: fallbackValue,\n  } = getHashAttribute(ctx, expFallbackAttribute);\n  const fallbackKey = fallbackValue\n    ? getStickyBucketAttributeKey(fallbackAttribute, toString(fallbackValue))\n    : null;\n\n  const assignments: StickyAssignments = {};\n  if (fallbackKey && ctx.user.stickyBucketAssignmentDocs[fallbackKey]) {\n    Object.assign(\n      assignments,\n      ctx.user.stickyBucketAssignmentDocs[fallbackKey].assignments || {}\n    );\n  }\n  if (ctx.user.stickyBucketAssignmentDocs[hashKey]) {\n    Object.assign(\n      assignments,\n      ctx.user.stickyBucketAssignmentDocs[hashKey].assignments || {}\n    );\n  }\n  return assignments;\n}\n\nfunction generateStickyBucketAssignmentDoc(\n  ctx: EvalContext,\n  attributeName: string,\n  attributeValue: string,\n  assignments: StickyAssignments\n): {\n  key: StickyAttributeKey;\n  doc: StickyAssignmentsDocument;\n  changed: boolean;\n} {\n  const key = getStickyBucketAttributeKey(attributeName, attributeValue);\n  const existingAssignments =\n    ctx.user.stickyBucketAssignmentDocs &&\n    ctx.user.stickyBucketAssignmentDocs[key]\n      ? ctx.user.stickyBucketAssignmentDocs[key].assignments || {}\n      : {};\n  const newAssignments = { ...existingAssignments, ...assignments };\n  const changed =\n    JSON.stringify(existingAssignments) !== JSON.stringify(newAssignments);\n\n  return {\n    key,\n    doc: {\n      attributeName,\n      attributeValue,\n      assignments: newAssignments,\n    },\n    changed,\n  };\n}\n\nfunction deriveStickyBucketIdentifierAttributes(\n  ctx: EvalContext,\n  data?: FeatureApiResponse\n) {\n  const attributes = new Set<string>();\n  const features =\n    data && data.features ? data.features : ctx.global.features || {};\n  const experiments =\n    data && data.experiments ? data.experiments : ctx.global.experiments || [];\n  Object.keys(features).forEach((id) => {\n    const feature = features[id];\n    if (feature.rules) {\n      for (const rule of feature.rules) {\n        if (rule.variations) {\n          attributes.add(rule.hashAttribute || \"id\");\n          if (rule.fallbackAttribute) {\n            attributes.add(rule.fallbackAttribute);\n          }\n        }\n      }\n    }\n  });\n  experiments.map((experiment) => {\n    attributes.add(experiment.hashAttribute || \"id\");\n    if (experiment.fallbackAttribute) {\n      attributes.add(experiment.fallbackAttribute);\n    }\n  });\n  return Array.from(attributes);\n}\n\nexport async function getAllStickyBucketAssignmentDocs(\n  ctx: EvalContext,\n  stickyBucketService: StickyBucketService,\n  data?: FeatureApiResponse\n) {\n  const attributes = getStickyBucketAttributes(ctx, data);\n  return stickyBucketService.getAllAssignments(attributes);\n}\n\nexport function getStickyBucketAttributes(\n  ctx: EvalContext,\n  data?: FeatureApiResponse\n): Record<string, string> {\n  const attributes: Record<string, string> = {};\n  const stickyBucketIdentifierAttributes = deriveStickyBucketIdentifierAttributes(\n    ctx,\n    data\n  );\n  stickyBucketIdentifierAttributes.forEach((attr) => {\n    const { hashValue } = getHashAttribute(ctx, attr);\n    attributes[attr] = toString(hashValue);\n  });\n  return attributes;\n}\n\nexport async function decryptPayload(\n  data: FeatureApiResponse,\n  decryptionKey: string | undefined,\n  subtle?: SubtleCrypto\n): Promise<FeatureApiResponse> {\n  data = { ...data };\n  if (data.encryptedFeatures) {\n    try {\n      data.features = JSON.parse(\n        await decrypt(data.encryptedFeatures, decryptionKey, subtle)\n      );\n    } catch (e) {\n      console.error(e);\n    }\n    delete data.encryptedFeatures;\n  }\n  if (data.encryptedExperiments) {\n    try {\n      data.experiments = JSON.parse(\n        await decrypt(data.encryptedExperiments, decryptionKey, subtle)\n      );\n    } catch (e) {\n      console.error(e);\n    }\n    delete data.encryptedExperiments;\n  }\n  if (data.encryptedSavedGroups) {\n    try {\n      data.savedGroups = JSON.parse(\n        await decrypt(data.encryptedSavedGroups, decryptionKey, subtle)\n      );\n    } catch (e) {\n      console.error(e);\n    }\n    delete data.encryptedSavedGroups;\n  }\n  return data;\n}\n\nexport function getApiHosts(\n  options: Options | ClientOptions\n): {\n  apiHost: string;\n  streamingHost: string;\n  apiRequestHeaders?: Record<string, string>;\n  streamingHostRequestHeaders?: Record<string, string>;\n} {\n  const defaultHost = options.apiHost || \"https://cdn.growthbook.io\";\n  return {\n    apiHost: defaultHost.replace(/\\/*$/, \"\"),\n    streamingHost: (options.streamingHost || defaultHost).replace(/\\/*$/, \"\"),\n    apiRequestHeaders: options.apiHostRequestHeaders,\n    streamingHostRequestHeaders: options.streamingHostRequestHeaders,\n  };\n}\n\nexport function getExperimentDedupeKey(\n  experiment: Experiment<unknown>,\n  result: Result<unknown>\n) {\n  return (\n    result.hashAttribute +\n    result.hashValue +\n    experiment.key +\n    result.variationId\n  );\n}\n"],"names":["evalCondition","chooseVariation","decrypt","getBucketRanges","getQueryStringOverride","getUrlRegExp","hash","inNamespace","inRange","isIncluded","isURLTargeted","toString","EVENT_FEATURE_EVALUATED","EVENT_EXPERIMENT_VIEWED","getForcedFeatureValues","ctx","ret","Map","global","forcedFeatureValues","forEach","v","k","set","user","getForcedVariations","forcedVariations","safeCall","fn","e","onExperimentViewed","experiment","result","trackedExperiments","getExperimentDedupeKey","has","add","enableDevMode","devLogs","push","timestamp","Date","now","logType","calls","trackingCallback","cb","eventLogger","experimentId","key","variationId","hashAttribute","hashValue","onFeatureUsage","trackedFeatureUsage","stringifiedValue","JSON","stringify","value","featureKey","feature","source","ruleId","experimentResult","evalFeature","id","stack","evaluatedFeatures","process","env","NODE_ENV","log","from","to","getFeatureResult","forcedValues","get","features","rules","Set","rule","parentConditions","parentCondition","parentResult","evalObj","evaled","condition","gate","filters","isFilteredOut","conditionPasses","isIncludedInRollout","seed","saveStickyBucketAssignmentDoc","disableStickyBucketing","fallbackAttribute","undefined","range","coverage","hashVersion","tracks","t","length","saveDeferredTrack","force","variations","exp","weights","bucketVersion","minBucketVersion","namespace","meta","ranges","name","phase","runExperiment","onExperimentEval","inExperiment","passthrough","defaultValue","featureId","numVariations","getExperimentResult","enabled","mergeOverrides","urlPatterns","url","qsOverride","variation","status","active","getHashAttribute","assigned","foundStickyBucket","stickyBucketVersionIsBlocked","versionIsBlocked","getStickyBucketVariation","expKey","expBucketVersion","expHashAttribute","expFallbackAttribute","expMinBucketVersion","expMeta","include","groups","hasGroupOverlap","urlIsValid","n","qaMode","changed","attrKey","doc","generateStickyBucketAssignmentDoc","getStickyBucketExperimentKey","stickyBucketAssignmentDocs","trackingCalls","trackingCall","Promise","all","then","changeId","recordChangeId","on","off","getAttributes","attributes","attributeOverrides","savedGroups","some","filter","attribute","r","variationIndex","hashUsed","bucket","stickyBucketUsed","res","o","overrides","Object","assign","attr","fallback","urlRegex","pathOnly","replace","test","expGroups","i","assignments","getStickyBucketAssignments","blockedKey","variationKey","findIndex","m","experimentKey","experimentBucketVersion","getStickyBucketAttributeKey","attributeName","attributeValue","hashKey","fallbackValue","fallbackKey","existingAssignments","newAssignments","deriveStickyBucketIdentifierAttributes","data","experiments","keys","map","Array","getAllStickyBucketAssignmentDocs","stickyBucketService","getStickyBucketAttributes","getAllAssignments","stickyBucketIdentifierAttributes","decryptPayload","decryptionKey","subtle","encryptedFeatures","parse","console","error","encryptedExperiments","encryptedSavedGroups","getApiHosts","options","defaultHost","apiHost","streamingHost","apiRequestHeaders","apiHostRequestHeaders","streamingHostRequestHeaders"],"mappings":"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","debugId":null}},
    {"offset": {"line": 2311, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook/dist/esm/GrowthBook.mjs","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook/src/GrowthBook.ts"],"sourcesContent":["import mutate, { DeclarativeMutation } from \"dom-mutator\";\nimport type {\n  ApiHost,\n  Attributes,\n  AutoExperiment,\n  AutoExperimentVariation,\n  ClientKey,\n  Options,\n  Experiment,\n  FeatureApiResponse,\n  FeatureDefinition,\n  FeatureResult,\n  LoadFeaturesOptions,\n  RefreshFeaturesOptions,\n  RenderFunction,\n  Result,\n  SubscriptionFunction,\n  TrackingCallback,\n  TrackingData,\n  WidenPrimitives,\n  EvalContext,\n  InitOptions,\n  InitResponse,\n  InitSyncOptions,\n  PrefetchOptions,\n  GlobalContext,\n  UserContext,\n  StickyAssignmentsDocument,\n  EventLogger,\n  LogUnion,\n} from \"./types/growthbook\";\nimport {\n  decrypt,\n  getAutoExperimentChangeType,\n  isURLTargeted,\n  loadSDKVersion,\n  mergeQueryStrings,\n  promiseTimeout,\n} from \"./util\";\nimport {\n  configureCache,\n  refreshFeatures,\n  startStreaming,\n  unsubscribe,\n} from \"./feature-repository\";\nimport {\n  runExperiment,\n  evalFeature as _evalFeature,\n  getExperimentResult,\n  getAllStickyBucketAssignmentDocs,\n  decryptPayload,\n  getApiHosts,\n  getExperimentDedupeKey,\n  getStickyBucketAttributes,\n} from \"./core\";\nimport { StickyBucketServiceSync } from \"./sticky-bucket-service\";\n\nconst isBrowser =\n  typeof window !== \"undefined\" && typeof document !== \"undefined\";\n\nconst SDK_VERSION = loadSDKVersion();\n\nexport class GrowthBook<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  AppFeatures extends Record<string, any> = Record<string, any>\n> {\n  // context is technically private, but some tools depend on it so we can't mangle the name\n  private context: Options;\n  public debug: boolean;\n  public ready: boolean;\n  public version: string;\n  public logs: Array<LogUnion>;\n\n  // Properties and methods that start with \"_\" are mangled by Terser (saves ~150 bytes)\n  private _options: Options;\n  private _renderer: null | RenderFunction;\n  private _redirectedUrl: string;\n  private _trackedExperiments: Set<string>;\n  private _completedChangeIds: Set<string>;\n  private _trackedFeatures: Record<string, string>;\n  private _subscriptions: Set<SubscriptionFunction>;\n  private _assigned: Map<\n    string,\n    {\n      // eslint-disable-next-line\n      experiment: Experiment<any>;\n      // eslint-disable-next-line\n      result: Result<any>;\n    }\n  >;\n  private _activeAutoExperiments: Map<\n    AutoExperiment,\n    { valueHash: string; undo: () => void }\n  >;\n  private _triggeredExpKeys: Set<string>;\n  private _initialized: boolean;\n  private _deferredTrackingCalls: Map<string, TrackingData>;\n  private _saveStickyBucketAssignmentDoc:\n    | undefined\n    | ((doc: StickyAssignmentsDocument) => Promise<unknown>);\n\n  private _payload: FeatureApiResponse | undefined;\n  private _decryptedPayload: FeatureApiResponse | undefined;\n  private _destroyCallbacks: (() => void)[];\n\n  private _autoExperimentsAllowed: boolean;\n  private _destroyed?: boolean;\n\n  constructor(options?: Options) {\n    options = options || {};\n    // These properties are all initialized in the constructor instead of above\n    // This saves ~80 bytes in the final output\n    this.version = SDK_VERSION;\n    this._options = this.context = options;\n    this._renderer = options.renderer || null;\n    this._trackedExperiments = new Set();\n    this._completedChangeIds = new Set();\n    this._trackedFeatures = {};\n    this.debug = !!options.debug;\n    this._subscriptions = new Set();\n    this.ready = false;\n    this._assigned = new Map();\n    this._activeAutoExperiments = new Map();\n    this._triggeredExpKeys = new Set();\n    this._initialized = false;\n    this._redirectedUrl = \"\";\n    this._deferredTrackingCalls = new Map();\n    this._autoExperimentsAllowed = !options.disableExperimentsOnLoad;\n    this._destroyCallbacks = [];\n    this.logs = [];\n\n    this.log = this.log.bind(this);\n    this._saveDeferredTrack = this._saveDeferredTrack.bind(this);\n    this._fireSubscriptions = this._fireSubscriptions.bind(this);\n    this._recordChangedId = this._recordChangedId.bind(this);\n\n    if (options.remoteEval) {\n      if (options.decryptionKey) {\n        throw new Error(\"Encryption is not available for remoteEval\");\n      }\n      if (!options.clientKey) {\n        throw new Error(\"Missing clientKey\");\n      }\n      let isGbHost = false;\n      try {\n        isGbHost = !!new URL(options.apiHost || \"\").hostname.match(\n          /growthbook\\.io$/i\n        );\n      } catch (e) {\n        // ignore invalid URLs\n      }\n      if (isGbHost) {\n        throw new Error(\"Cannot use remoteEval on GrowthBook Cloud\");\n      }\n    } else {\n      if (options.cacheKeyAttributes) {\n        throw new Error(\"cacheKeyAttributes are only used for remoteEval\");\n      }\n    }\n\n    if (options.stickyBucketService) {\n      const s = options.stickyBucketService;\n      this._saveStickyBucketAssignmentDoc = (doc) => {\n        return s.saveAssignments(doc);\n      };\n    }\n\n    if (options.plugins) {\n      for (const plugin of options.plugins) {\n        plugin(this);\n      }\n    }\n\n    if (options.features) {\n      this.ready = true;\n    }\n\n    if (isBrowser && options.enableDevMode) {\n      window._growthbook = this;\n      document.dispatchEvent(new Event(\"gbloaded\"));\n    }\n\n    if (options.experiments) {\n      this.ready = true;\n      this._updateAllAutoExperiments();\n    }\n\n    // Hydrate sticky bucket service\n    if (\n      this._options.stickyBucketService &&\n      this._options.stickyBucketAssignmentDocs\n    ) {\n      for (const key in this._options.stickyBucketAssignmentDocs) {\n        const doc = this._options.stickyBucketAssignmentDocs[key];\n        if (doc) {\n          this._options.stickyBucketService.saveAssignments(doc).catch(() => {\n            // Ignore hydration errors\n          });\n        }\n      }\n    }\n\n    // Legacy - passing in features/experiments into the constructor instead of using init\n    if (this.ready) {\n      this.refreshStickyBuckets(this.getPayload());\n    }\n  }\n\n  public async setPayload(payload: FeatureApiResponse): Promise<void> {\n    this._payload = payload;\n    const data = await decryptPayload(payload, this._options.decryptionKey);\n    this._decryptedPayload = data;\n    await this.refreshStickyBuckets(data);\n    if (data.features) {\n      this._options.features = data.features;\n    }\n    if (data.savedGroups) {\n      this._options.savedGroups = data.savedGroups;\n    }\n    if (data.experiments) {\n      this._options.experiments = data.experiments;\n      this._updateAllAutoExperiments();\n    }\n    this.ready = true;\n    this._render();\n  }\n\n  public initSync(options: InitSyncOptions): GrowthBook {\n    this._initialized = true;\n\n    const payload = options.payload;\n\n    if (payload.encryptedExperiments || payload.encryptedFeatures) {\n      throw new Error(\"initSync does not support encrypted payloads\");\n    }\n\n    if (\n      this._options.stickyBucketService &&\n      !this._options.stickyBucketAssignmentDocs\n    ) {\n      this._options.stickyBucketAssignmentDocs = this.generateStickyBucketAssignmentDocsSync(\n        this._options.stickyBucketService as StickyBucketServiceSync,\n        payload\n      );\n    }\n\n    this._payload = payload;\n    this._decryptedPayload = payload;\n    if (payload.features) {\n      this._options.features = payload.features;\n    }\n    if (payload.experiments) {\n      this._options.experiments = payload.experiments;\n      this._updateAllAutoExperiments();\n    }\n\n    this.ready = true;\n\n    startStreaming(this, options);\n\n    return this;\n  }\n\n  public async init(options?: InitOptions): Promise<InitResponse> {\n    this._initialized = true;\n    options = options || {};\n\n    if (options.cacheSettings) {\n      configureCache(options.cacheSettings);\n    }\n\n    if (options.payload) {\n      await this.setPayload(options.payload);\n      startStreaming(this, options);\n      return {\n        success: true,\n        source: \"init\",\n      };\n    } else {\n      const { data, ...res } = await this._refresh({\n        ...options,\n        allowStale: true,\n      });\n      startStreaming(this, options);\n      await this.setPayload(data || {});\n      return res;\n    }\n  }\n\n  /** @deprecated Use {@link init} */\n  public async loadFeatures(options?: LoadFeaturesOptions): Promise<void> {\n    options = options || {};\n    await this.init({\n      skipCache: options.skipCache,\n      timeout: options.timeout,\n      streaming:\n        (this._options.backgroundSync ?? true) &&\n        (options.autoRefresh || this._options.subscribeToChanges),\n    });\n  }\n\n  public async refreshFeatures(\n    options?: RefreshFeaturesOptions\n  ): Promise<void> {\n    const res = await this._refresh({\n      ...(options || {}),\n      allowStale: false,\n    });\n    if (res.data) {\n      await this.setPayload(res.data);\n    }\n  }\n\n  public getApiInfo(): [ApiHost, ClientKey] {\n    return [this.getApiHosts().apiHost, this.getClientKey()];\n  }\n  public getApiHosts() {\n    return getApiHosts(this._options);\n  }\n  public getClientKey(): string {\n    return this._options.clientKey || \"\";\n  }\n  public getPayload(): FeatureApiResponse {\n    return (\n      this._payload || {\n        features: this.getFeatures(),\n        experiments: this.getExperiments(),\n      }\n    );\n  }\n  public getDecryptedPayload(): FeatureApiResponse {\n    return this._decryptedPayload || this.getPayload();\n  }\n\n  public isRemoteEval(): boolean {\n    return this._options.remoteEval || false;\n  }\n\n  public getCacheKeyAttributes(): (keyof Attributes)[] | undefined {\n    return this._options.cacheKeyAttributes;\n  }\n\n  private async _refresh({\n    timeout,\n    skipCache,\n    allowStale,\n    streaming,\n  }: RefreshFeaturesOptions & {\n    allowStale?: boolean;\n    streaming?: boolean;\n  }) {\n    if (!this._options.clientKey) {\n      throw new Error(\"Missing clientKey\");\n    }\n    // Trigger refresh in feature repository\n    return refreshFeatures({\n      instance: this,\n      timeout,\n      skipCache: skipCache || this._options.disableCache,\n      allowStale,\n      backgroundSync: streaming ?? this._options.backgroundSync ?? true,\n    });\n  }\n\n  private _render() {\n    if (this._renderer) {\n      try {\n        this._renderer();\n      } catch (e) {\n        console.error(\"Failed to render\", e);\n      }\n    }\n  }\n\n  /** @deprecated Use {@link setPayload} */\n  public setFeatures(features: Record<string, FeatureDefinition>) {\n    this._options.features = features;\n    this.ready = true;\n    this._render();\n  }\n\n  /** @deprecated Use {@link setPayload} */\n  public async setEncryptedFeatures(\n    encryptedString: string,\n    decryptionKey?: string,\n    subtle?: SubtleCrypto\n  ): Promise<void> {\n    const featuresJSON = await decrypt(\n      encryptedString,\n      decryptionKey || this._options.decryptionKey,\n      subtle\n    );\n    this.setFeatures(\n      JSON.parse(featuresJSON) as Record<string, FeatureDefinition>\n    );\n  }\n\n  /** @deprecated Use {@link setPayload} */\n  public setExperiments(experiments: AutoExperiment[]): void {\n    this._options.experiments = experiments;\n    this.ready = true;\n    this._updateAllAutoExperiments();\n  }\n\n  /** @deprecated Use {@link setPayload} */\n  public async setEncryptedExperiments(\n    encryptedString: string,\n    decryptionKey?: string,\n    subtle?: SubtleCrypto\n  ): Promise<void> {\n    const experimentsJSON = await decrypt(\n      encryptedString,\n      decryptionKey || this._options.decryptionKey,\n      subtle\n    );\n    this.setExperiments(JSON.parse(experimentsJSON) as AutoExperiment[]);\n  }\n\n  public async setAttributes(attributes: Attributes) {\n    this._options.attributes = attributes;\n    if (this._options.stickyBucketService) {\n      await this.refreshStickyBuckets();\n    }\n    if (this._options.remoteEval) {\n      await this._refreshForRemoteEval();\n      return;\n    }\n    this._render();\n    this._updateAllAutoExperiments();\n  }\n\n  public async updateAttributes(attributes: Attributes) {\n    return this.setAttributes({ ...this._options.attributes, ...attributes });\n  }\n\n  public async setAttributeOverrides(overrides: Attributes) {\n    this._options.attributeOverrides = overrides;\n    if (this._options.stickyBucketService) {\n      await this.refreshStickyBuckets();\n    }\n    if (this._options.remoteEval) {\n      await this._refreshForRemoteEval();\n      return;\n    }\n    this._render();\n    this._updateAllAutoExperiments();\n  }\n\n  public async setForcedVariations(vars: Record<string, number>) {\n    this._options.forcedVariations = vars || {};\n    if (this._options.remoteEval) {\n      await this._refreshForRemoteEval();\n      return;\n    }\n    this._render();\n    this._updateAllAutoExperiments();\n  }\n\n  // eslint-disable-next-line\n  public setForcedFeatures(map: Map<string, any>) {\n    this._options.forcedFeatureValues = map;\n    this._render();\n  }\n\n  public async setURL(url: string) {\n    if (url === this._options.url) return;\n    this._options.url = url;\n    this._redirectedUrl = \"\";\n    if (this._options.remoteEval) {\n      await this._refreshForRemoteEval();\n      this._updateAllAutoExperiments(true);\n      return;\n    }\n    this._updateAllAutoExperiments(true);\n  }\n\n  public getAttributes() {\n    return { ...this._options.attributes, ...this._options.attributeOverrides };\n  }\n\n  public getForcedVariations() {\n    return this._options.forcedVariations || {};\n  }\n\n  public getForcedFeatures() {\n    // eslint-disable-next-line\n    return this._options.forcedFeatureValues || new Map<string, any>();\n  }\n\n  public getStickyBucketAssignmentDocs() {\n    return this._options.stickyBucketAssignmentDocs || {};\n  }\n\n  public getUrl() {\n    return this._options.url || \"\";\n  }\n\n  public getFeatures() {\n    return this._options.features || {};\n  }\n\n  public getExperiments() {\n    return this._options.experiments || [];\n  }\n\n  public getCompletedChangeIds(): string[] {\n    return Array.from(this._completedChangeIds);\n  }\n\n  public subscribe(cb: SubscriptionFunction): () => void {\n    this._subscriptions.add(cb);\n    return () => {\n      this._subscriptions.delete(cb);\n    };\n  }\n\n  private async _refreshForRemoteEval() {\n    if (!this._options.remoteEval) return;\n    if (!this._initialized) return;\n    const res = await this._refresh({\n      allowStale: false,\n    });\n    if (res.data) {\n      await this.setPayload(res.data);\n    }\n  }\n\n  public getAllResults() {\n    return new Map(this._assigned);\n  }\n\n  public onDestroy(cb: () => void) {\n    this._destroyCallbacks.push(cb);\n  }\n\n  public isDestroyed() {\n    return !!this._destroyed;\n  }\n\n  public destroy() {\n    this._destroyed = true;\n\n    // Custom callbacks\n    // Do this first in case it needs access to the below data that is cleared\n    this._destroyCallbacks.forEach((cb) => {\n      try {\n        cb();\n      } catch (e) {\n        console.error(e);\n      }\n    });\n\n    // Release references to save memory\n    this._subscriptions.clear();\n    this._assigned.clear();\n    this._trackedExperiments.clear();\n    this._completedChangeIds.clear();\n    this._deferredTrackingCalls.clear();\n    this._trackedFeatures = {};\n    this._destroyCallbacks = [];\n    this._payload = undefined;\n    this._saveStickyBucketAssignmentDoc = undefined;\n    unsubscribe(this);\n    this.logs = [];\n\n    if (isBrowser && window._growthbook === this) {\n      delete window._growthbook;\n    }\n\n    // Undo any active auto experiments\n    this._activeAutoExperiments.forEach((exp) => {\n      exp.undo();\n    });\n    this._activeAutoExperiments.clear();\n    this._triggeredExpKeys.clear();\n  }\n\n  public setRenderer(renderer: null | RenderFunction) {\n    this._renderer = renderer;\n  }\n\n  public forceVariation(key: string, variation: number) {\n    this._options.forcedVariations = this._options.forcedVariations || {};\n    this._options.forcedVariations[key] = variation;\n    if (this._options.remoteEval) {\n      this._refreshForRemoteEval();\n      return;\n    }\n    this._updateAllAutoExperiments();\n    this._render();\n  }\n\n  public run<T>(experiment: Experiment<T>): Result<T> {\n    const { result } = runExperiment(experiment, null, this._getEvalContext());\n    this._fireSubscriptions(experiment, result);\n    return result;\n  }\n\n  public triggerExperiment(key: string) {\n    this._triggeredExpKeys.add(key);\n    if (!this._options.experiments) return null;\n    const experiments = this._options.experiments.filter(\n      (exp) => exp.key === key\n    );\n    return experiments\n      .map((exp) => {\n        return this._runAutoExperiment(exp);\n      })\n      .filter((res) => res !== null);\n  }\n\n  public triggerAutoExperiments() {\n    this._autoExperimentsAllowed = true;\n    this._updateAllAutoExperiments(true);\n  }\n\n  private _getEvalContext(): EvalContext {\n    return {\n      user: this._getUserContext(),\n      global: this._getGlobalContext(),\n      stack: {\n        evaluatedFeatures: new Set(),\n      },\n    };\n  }\n\n  private _getUserContext(): UserContext {\n    return {\n      attributes: this._options.user\n        ? {\n            ...this._options.user,\n            ...this._options.attributes,\n          }\n        : this._options.attributes,\n      enableDevMode: this._options.enableDevMode,\n      blockedChangeIds: this._options.blockedChangeIds,\n      stickyBucketAssignmentDocs: this._options.stickyBucketAssignmentDocs,\n      url: this._getContextUrl(),\n      forcedVariations: this._options.forcedVariations,\n      forcedFeatureValues: this._options.forcedFeatureValues,\n      attributeOverrides: this._options.attributeOverrides,\n      saveStickyBucketAssignmentDoc: this._saveStickyBucketAssignmentDoc,\n      trackingCallback: this._options.trackingCallback,\n      onFeatureUsage: this._options.onFeatureUsage,\n      devLogs: this.logs,\n      trackedExperiments: this._trackedExperiments,\n      trackedFeatureUsage: this._trackedFeatures,\n    };\n  }\n  private _getGlobalContext(): GlobalContext {\n    return {\n      features: this._options.features,\n      experiments: this._options.experiments,\n      log: this.log,\n      enabled: this._options.enabled,\n      qaMode: this._options.qaMode,\n      savedGroups: this._options.savedGroups,\n      groups: this._options.groups,\n      overrides: this._options.overrides,\n      onExperimentEval:\n        this._subscriptions.size > 0 ? this._fireSubscriptions : undefined,\n      recordChangeId: this._recordChangedId,\n      saveDeferredTrack: this._saveDeferredTrack,\n      eventLogger: this._options.eventLogger,\n    };\n  }\n\n  private _runAutoExperiment(experiment: AutoExperiment, forceRerun?: boolean) {\n    const existing = this._activeAutoExperiments.get(experiment);\n\n    // If this is a manual experiment and it's not already running, skip\n    if (\n      experiment.manual &&\n      !this._triggeredExpKeys.has(experiment.key) &&\n      !existing\n    )\n      return null;\n\n    // Check if this particular experiment is blocked by options settings\n    // For example, if all visualEditor experiments are disabled\n    const isBlocked = this._isAutoExperimentBlockedByContext(experiment);\n    if (isBlocked) {\n      process.env.NODE_ENV !== \"production\" &&\n        this.log(\"Auto experiment blocked\", { id: experiment.key });\n    }\n\n    let result: Result<AutoExperimentVariation> | undefined;\n    let trackingCall: Promise<void> | undefined;\n    // Run the experiment (if blocked exclude)\n    if (isBlocked) {\n      result = getExperimentResult(\n        this._getEvalContext(),\n        experiment,\n        -1,\n        false,\n        \"\"\n      );\n    } else {\n      ({ result, trackingCall } = runExperiment(\n        experiment,\n        null,\n        this._getEvalContext()\n      ));\n      this._fireSubscriptions(experiment, result);\n    }\n\n    // A hash to quickly tell if the assigned value changed\n    const valueHash = JSON.stringify(result.value);\n\n    // If the changes are already active, no need to re-apply them\n    if (\n      !forceRerun &&\n      result.inExperiment &&\n      existing &&\n      existing.valueHash === valueHash\n    ) {\n      return result;\n    }\n\n    // Undo any existing changes\n    if (existing) this._undoActiveAutoExperiment(experiment);\n\n    // Apply new changes\n    if (result.inExperiment) {\n      const changeType = getAutoExperimentChangeType(experiment);\n\n      if (\n        changeType === \"redirect\" &&\n        result.value.urlRedirect &&\n        experiment.urlPatterns\n      ) {\n        const url = experiment.persistQueryString\n          ? mergeQueryStrings(this._getContextUrl(), result.value.urlRedirect)\n          : result.value.urlRedirect;\n\n        if (isURLTargeted(url, experiment.urlPatterns)) {\n          this.log(\n            \"Skipping redirect because original URL matches redirect URL\",\n            {\n              id: experiment.key,\n            }\n          );\n          return result;\n        }\n        this._redirectedUrl = url;\n        const { navigate, delay } = this._getNavigateFunction();\n        if (navigate) {\n          if (isBrowser) {\n            // Wait for the possibly-async tracking callback, bound by min and max delays\n            Promise.all([\n              ...(trackingCall\n                ? [\n                    promiseTimeout(\n                      trackingCall,\n                      this._options.maxNavigateDelay ?? 1000\n                    ),\n                  ]\n                : []),\n              new Promise((resolve) =>\n                window.setTimeout(resolve, this._options.navigateDelay ?? delay)\n              ),\n            ]).then(() => {\n              try {\n                navigate(url);\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          } else {\n            try {\n              navigate(url);\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        }\n      } else if (changeType === \"visual\") {\n        const undo = this._options.applyDomChangesCallback\n          ? this._options.applyDomChangesCallback(result.value)\n          : this._applyDOMChanges(result.value);\n        if (undo) {\n          this._activeAutoExperiments.set(experiment, {\n            undo,\n            valueHash,\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n\n  private _undoActiveAutoExperiment(exp: AutoExperiment) {\n    const data = this._activeAutoExperiments.get(exp);\n    if (data) {\n      data.undo();\n      this._activeAutoExperiments.delete(exp);\n    }\n  }\n\n  private _updateAllAutoExperiments(forceRerun?: boolean) {\n    if (!this._autoExperimentsAllowed) return;\n\n    const experiments = this._options.experiments || [];\n\n    // Stop any experiments that are no longer defined\n    const keys = new Set(experiments);\n    this._activeAutoExperiments.forEach((v, k) => {\n      if (!keys.has(k)) {\n        v.undo();\n        this._activeAutoExperiments.delete(k);\n      }\n    });\n\n    // Re-run all new/updated experiments\n    for (const exp of experiments) {\n      const result = this._runAutoExperiment(exp, forceRerun);\n\n      // Once you're in a redirect experiment, break out of the loop and don't run any further experiments\n      if (\n        result?.inExperiment &&\n        getAutoExperimentChangeType(exp) === \"redirect\"\n      ) {\n        break;\n      }\n    }\n  }\n\n  private _fireSubscriptions<T>(experiment: Experiment<T>, result: Result<T>) {\n    const key = experiment.key;\n\n    // If assigned variation has changed, fire subscriptions\n    const prev = this._assigned.get(key);\n    // TODO: what if the experiment definition has changed?\n    if (\n      !prev ||\n      prev.result.inExperiment !== result.inExperiment ||\n      prev.result.variationId !== result.variationId\n    ) {\n      this._assigned.set(key, { experiment, result });\n      this._subscriptions.forEach((cb) => {\n        try {\n          cb(experiment, result);\n        } catch (e) {\n          console.error(e);\n        }\n      });\n    }\n  }\n\n  private _recordChangedId(id: string) {\n    this._completedChangeIds.add(id);\n  }\n\n  public isOn<K extends string & keyof AppFeatures = string>(key: K): boolean {\n    return this.evalFeature(key).on;\n  }\n\n  public isOff<K extends string & keyof AppFeatures = string>(key: K): boolean {\n    return this.evalFeature(key).off;\n  }\n\n  public getFeatureValue<\n    V extends AppFeatures[K],\n    K extends string & keyof AppFeatures = string\n  >(key: K, defaultValue: V): WidenPrimitives<V> {\n    const value = this.evalFeature<WidenPrimitives<V>, K>(key).value;\n    return value === null ? (defaultValue as WidenPrimitives<V>) : value;\n  }\n\n  /**\n   * @deprecated Use {@link evalFeature}\n   * @param id\n   */\n  // eslint-disable-next-line\n  public feature<\n    V extends AppFeatures[K],\n    K extends string & keyof AppFeatures = string\n  >(id: K): FeatureResult<V | null> {\n    return this.evalFeature(id);\n  }\n\n  public evalFeature<\n    V extends AppFeatures[K],\n    K extends string & keyof AppFeatures = string\n  >(id: K): FeatureResult<V | null> {\n    return _evalFeature(id, this._getEvalContext());\n  }\n\n  log(msg: string, ctx: Record<string, unknown>) {\n    if (!this.debug) return;\n    if (this._options.log) this._options.log(msg, ctx);\n    else console.log(msg, ctx);\n  }\n\n  public getDeferredTrackingCalls(): TrackingData[] {\n    return Array.from(this._deferredTrackingCalls.values());\n  }\n\n  public setDeferredTrackingCalls(calls: TrackingData[]) {\n    this._deferredTrackingCalls = new Map(\n      calls\n        .filter((c) => c && c.experiment && c.result)\n        .map((c) => {\n          return [getExperimentDedupeKey(c.experiment, c.result), c];\n        })\n    );\n  }\n\n  public async fireDeferredTrackingCalls() {\n    if (!this._options.trackingCallback) return;\n\n    const promises: ReturnType<TrackingCallback>[] = [];\n    this._deferredTrackingCalls.forEach((call: TrackingData) => {\n      if (!call || !call.experiment || !call.result) {\n        console.error(\"Invalid deferred tracking call\", { call: call });\n      } else {\n        promises.push(\n          (this._options.trackingCallback as TrackingCallback)(\n            call.experiment,\n            call.result\n          )\n        );\n      }\n    });\n    this._deferredTrackingCalls.clear();\n    await Promise.all(promises);\n  }\n\n  public setTrackingCallback(callback: TrackingCallback) {\n    this._options.trackingCallback = callback;\n    this.fireDeferredTrackingCalls();\n  }\n\n  public setEventLogger(logger: EventLogger) {\n    this._options.eventLogger = logger;\n  }\n\n  public async logEvent(\n    eventName: string,\n    properties?: Record<string, unknown>\n  ) {\n    if (this._destroyed) {\n      console.error(\"Cannot log event to destroyed GrowthBook instance\");\n      return;\n    }\n    if (this._options.enableDevMode) {\n      this.logs.push({\n        eventName,\n        properties,\n        timestamp: Date.now().toString(),\n        logType: \"event\",\n      });\n    }\n    if (this._options.eventLogger) {\n      try {\n        await this._options.eventLogger(\n          eventName,\n          properties || {},\n          this._getUserContext()\n        );\n      } catch (e) {\n        console.error(e);\n      }\n    } else {\n      console.error(\"No event logger configured\");\n    }\n  }\n\n  private _saveDeferredTrack(data: TrackingData) {\n    this._deferredTrackingCalls.set(\n      getExperimentDedupeKey(data.experiment, data.result),\n      data\n    );\n  }\n\n  private _getContextUrl() {\n    return this._options.url || (isBrowser ? window.location.href : \"\");\n  }\n\n  private _isAutoExperimentBlockedByContext(\n    experiment: AutoExperiment\n  ): boolean {\n    const changeType = getAutoExperimentChangeType(experiment);\n    if (changeType === \"visual\") {\n      if (this._options.disableVisualExperiments) return true;\n\n      if (this._options.disableJsInjection) {\n        if (experiment.variations.some((v) => v.js)) {\n          return true;\n        }\n      }\n    } else if (changeType === \"redirect\") {\n      if (this._options.disableUrlRedirectExperiments) return true;\n\n      // Validate URLs\n      try {\n        const current = new URL(this._getContextUrl());\n        for (const v of experiment.variations) {\n          if (!v || !v.urlRedirect) continue;\n          const url = new URL(v.urlRedirect);\n\n          // If we're blocking cross origin redirects, block if the protocol or host is different\n          if (this._options.disableCrossOriginUrlRedirectExperiments) {\n            if (url.protocol !== current.protocol) return true;\n            if (url.host !== current.host) return true;\n          }\n        }\n      } catch (e) {\n        // Problem parsing one of the URLs\n        this.log(\"Error parsing current or redirect URL\", {\n          id: experiment.key,\n          error: e,\n        });\n        return true;\n      }\n    } else {\n      // Block any unknown changeTypes\n      return true;\n    }\n\n    if (\n      experiment.changeId &&\n      (this._options.blockedChangeIds || []).includes(experiment.changeId)\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  public getRedirectUrl(): string {\n    return this._redirectedUrl;\n  }\n\n  private _getNavigateFunction(): {\n    navigate: null | ((url: string) => void | Promise<void>);\n    delay: number;\n  } {\n    if (this._options.navigate) {\n      return {\n        navigate: this._options.navigate,\n        delay: 0,\n      };\n    } else if (isBrowser) {\n      return {\n        navigate: (url: string) => {\n          window.location.replace(url);\n        },\n        delay: 100,\n      };\n    }\n    return {\n      navigate: null,\n      delay: 0,\n    };\n  }\n\n  private _applyDOMChanges(changes: AutoExperimentVariation) {\n    if (!isBrowser) return;\n    const undo: (() => void)[] = [];\n    if (changes.css) {\n      const s = document.createElement(\"style\");\n      s.innerHTML = changes.css;\n      document.head.appendChild(s);\n      undo.push(() => s.remove());\n    }\n    if (changes.js) {\n      const script = document.createElement(\"script\");\n      script.innerHTML = changes.js;\n      if (this._options.jsInjectionNonce) {\n        script.nonce = this._options.jsInjectionNonce;\n      }\n      document.head.appendChild(script);\n      undo.push(() => script.remove());\n    }\n    if (changes.domMutations) {\n      changes.domMutations.forEach((mutation) => {\n        undo.push(mutate.declarative(mutation as DeclarativeMutation).revert);\n      });\n    }\n    return () => {\n      undo.forEach((fn) => fn());\n    };\n  }\n\n  public async refreshStickyBuckets(data?: FeatureApiResponse) {\n    if (this._options.stickyBucketService) {\n      const ctx = this._getEvalContext();\n      const docs = await getAllStickyBucketAssignmentDocs(\n        ctx,\n        this._options.stickyBucketService,\n        data\n      );\n      this._options.stickyBucketAssignmentDocs = docs;\n    }\n  }\n\n  public generateStickyBucketAssignmentDocsSync(\n    stickyBucketService: StickyBucketServiceSync,\n    payload: FeatureApiResponse\n  ) {\n    if (!(\"getAllAssignmentsSync\" in stickyBucketService)) {\n      console.error(\n        \"generating StickyBucketAssignmentDocs docs requires StickyBucketServiceSync\"\n      );\n      return;\n    }\n    const ctx = this._getEvalContext();\n    const attributes = getStickyBucketAttributes(ctx, payload);\n    return stickyBucketService.getAllAssignmentsSync(attributes);\n  }\n\n  public inDevMode(): boolean {\n    return !!this._options.enableDevMode;\n  }\n}\n\nexport async function prefetchPayload(options: PrefetchOptions) {\n  // Create a temporary instance, just to fetch the payload\n  const instance = new GrowthBook(options);\n\n  await refreshFeatures({\n    instance,\n    skipCache: options.skipCache,\n    allowStale: false,\n    backgroundSync: options.streaming,\n  });\n\n  instance.destroy();\n}\n"],"names":["mutate","decrypt","getAutoExperimentChangeType","isURLTargeted","loadSDKVersion","mergeQueryStrings","promiseTimeout","configureCache","refreshFeatures","startStreaming","unsubscribe","runExperiment","evalFeature","_evalFeature","getExperimentResult","getAllStickyBucketAssignmentDocs","decryptPayload","getApiHosts","getExperimentDedupeKey","getStickyBucketAttributes","isBrowser","window","document","SDK_VERSION","GrowthBook","constructor","options","version","_options","context","_renderer","renderer","_trackedExperiments","Set","_completedChangeIds","_trackedFeatures","debug","_subscriptions","ready","_assigned","Map","_activeAutoExperiments","_triggeredExpKeys","_initialized","_redirectedUrl","_deferredTrackingCalls","_autoExperimentsAllowed","disableExperimentsOnLoad","_destroyCallbacks","logs","log","bind","_saveDeferredTrack","_fireSubscriptions","_recordChangedId","remoteEval","decryptionKey","Error","clientKey","isGbHost","URL","apiHost","hostname","match","e","cacheKeyAttributes","stickyBucketService","s","_saveStickyBucketAssignmentDoc","doc","saveAssignments","plugins","plugin","features","enableDevMode","_growthbook","dispatchEvent","Event","experiments","_updateAllAutoExperiments","stickyBucketAssignmentDocs","key","catch","refreshStickyBuckets","getPayload","setPayload","payload","_payload","data","_decryptedPayload","savedGroups","_render","initSync","encryptedExperiments","encryptedFeatures","generateStickyBucketAssignmentDocsSync","init","cacheSettings","success","source","res","_refresh","allowStale","loadFeatures","skipCache","timeout","streaming","backgroundSync","autoRefresh","subscribeToChanges","getApiInfo","getClientKey","getFeatures","getExperiments","getDecryptedPayload","isRemoteEval","getCacheKeyAttributes","instance","disableCache","console","error","setFeatures","setEncryptedFeatures","encryptedString","subtle","featuresJSON","JSON","parse","setExperiments","setEncryptedExperiments","experimentsJSON","setAttributes","attributes","_refreshForRemoteEval","updateAttributes","setAttributeOverrides","overrides","attributeOverrides","setForcedVariations","vars","forcedVariations","setForcedFeatures","map","forcedFeatureValues","setURL","url","getAttributes","getForcedVariations","getForcedFeatures","getStickyBucketAssignmentDocs","getUrl","getCompletedChangeIds","Array","from","subscribe","cb","add","delete","getAllResults","onDestroy","push","isDestroyed","_destroyed","destroy","forEach","clear","undefined","exp","undo","setRenderer","forceVariation","variation","run","experiment","result","_getEvalContext","triggerExperiment","filter","_runAutoExperiment","triggerAutoExperiments","user","_getUserContext","global","_getGlobalContext","stack","evaluatedFeatures","blockedChangeIds","_getContextUrl","saveStickyBucketAssignmentDoc","trackingCallback","onFeatureUsage","devLogs","trackedExperiments","trackedFeatureUsage","enabled","qaMode","groups","onExperimentEval","size","recordChangeId","saveDeferredTrack","eventLogger","forceRerun","existing","get","manual","has","isBlocked","_isAutoExperimentBlockedByContext","process","env","NODE_ENV","id","trackingCall","valueHash","stringify","value","inExperiment","_undoActiveAutoExperiment","changeType","urlRedirect","urlPatterns","persistQueryString","navigate","delay","_getNavigateFunction","Promise","all","maxNavigateDelay","resolve","setTimeout","navigateDelay","then","applyDomChangesCallback","_applyDOMChanges","set","keys","v","k","prev","variationId","isOn","on","isOff","off","getFeatureValue","defaultValue","feature","msg","ctx","getDeferredTrackingCalls","values","setDeferredTrackingCalls","calls","c","fireDeferredTrackingCalls","promises","call","setTrackingCallback","callback","setEventLogger","logger","logEvent","eventName","properties","timestamp","Date","now","toString","logType","location","href","disableVisualExperiments","disableJsInjection","variations","some","js","disableUrlRedirectExperiments","current","disableCrossOriginUrlRedirectExperiments","protocol","host","changeId","includes","getRedirectUrl","replace","changes","css","createElement","innerHTML","head","appendChild","remove","script","jsInjectionNonce","nonce","domMutations","mutation","declarative","revert","fn","docs","getAllAssignmentsSync","inDevMode","prefetchPayload"],"mappings":"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","debugId":null}},
    {"offset": {"line": 3075, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@growthbook/growthbook-react/dist/esm/index.js","sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40growthbook/growthbook-react/src/GrowthBookReact.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as React from \"react\";\nimport type {\n  Experiment,\n  Result,\n  FeatureResult,\n  JSONValue,\n  FeatureDefinition,\n  Context,\n  WidenPrimitives,\n} from \"@growthbook/growthbook\";\nimport { GrowthBook } from \"@growthbook/growthbook\";\n\nexport type GrowthBookContextValue = {\n  growthbook: GrowthBook;\n};\nexport interface WithRunExperimentProps {\n  runExperiment: <T>(exp: Experiment<T>) => Result<T>;\n}\n/** @deprecated */\nexport type GrowthBookSSRData = {\n  attributes: Record<string, any>;\n  features: Record<string, FeatureDefinition>;\n};\n\nexport const GrowthBookContext = React.createContext<GrowthBookContextValue>(\n  {} as GrowthBookContextValue\n);\n\n/** @deprecated */\nexport async function getGrowthBookSSRData(\n  context: Context\n): Promise<GrowthBookSSRData> {\n  // Server-side GrowthBook instance\n  const gb = new GrowthBook({\n    ...context,\n  });\n\n  // Load feature flags from network if needed\n  if (context.clientKey) {\n    await gb.init();\n  }\n\n  const data: GrowthBookSSRData = {\n    attributes: gb.getAttributes(),\n    features: gb.getFeatures(),\n  };\n  gb.destroy();\n\n  return data;\n}\n\n/** @deprecated */\nexport function useGrowthBookSSR(data: GrowthBookSSRData) {\n  const gb = useGrowthBook();\n\n  // Only do this once to avoid infinite loops\n  const isFirst = React.useRef(true);\n  if (gb && isFirst.current) {\n    gb.setFeatures(data.features);\n    gb.setAttributes(data.attributes);\n    isFirst.current = false;\n  }\n}\n\nexport function useExperiment<T>(exp: Experiment<T>): Result<T> {\n  const { growthbook } = React.useContext(GrowthBookContext);\n  return growthbook.run(exp);\n}\n\nexport function useFeature<T extends JSONValue = any>(\n  id: string\n): FeatureResult<T | null> {\n  const growthbook = useGrowthBook();\n  return growthbook.evalFeature<T>(id);\n}\n\nexport function useFeatureIsOn<\n  AppFeatures extends Record<string, any> = Record<string, any>\n>(id: string & keyof AppFeatures): boolean {\n  const growthbook = useGrowthBook<AppFeatures>();\n  return growthbook.isOn(id);\n}\n\nexport function useFeatureValue<T extends JSONValue = any>(\n  id: string,\n  fallback: T\n): WidenPrimitives<T> {\n  const growthbook = useGrowthBook();\n  return growthbook.getFeatureValue(id, fallback);\n}\n\nexport function useGrowthBook<\n  AppFeatures extends Record<string, any> = Record<string, any>\n>(): GrowthBook<AppFeatures> {\n  const { growthbook } = React.useContext(GrowthBookContext);\n\n  if (!growthbook) {\n    throw new Error(\"Missing or invalid GrowthBookProvider\");\n  }\n\n  return growthbook as GrowthBook<AppFeatures>;\n}\n\nexport function FeaturesReady({\n  children,\n  timeout,\n  fallback,\n}: {\n  children: React.ReactNode;\n  timeout?: number;\n  fallback?: React.ReactNode;\n}): React.ReactElement {\n  const gb = useGrowthBook();\n  const [hitTimeout, setHitTimeout] = React.useState(false);\n  const ready = gb ? gb.ready : false;\n  React.useEffect(() => {\n    if (timeout && !ready) {\n      const timer = setTimeout(() => {\n        gb &&\n          gb.log(\"FeaturesReady timed out waiting for features to load\", {\n            timeout,\n          });\n        setHitTimeout(true);\n      }, timeout);\n      return () => clearTimeout(timer);\n    }\n  }, [timeout, ready, gb]);\n\n  return <>{ready || hitTimeout ? children : fallback || null}</>;\n}\n\nexport function IfFeatureEnabled({\n  children,\n  feature,\n}: {\n  children: React.ReactNode;\n  feature: string;\n}): React.ReactElement | null {\n  return useFeature(feature).on ? <>{children}</> : null;\n}\n\nexport function FeatureString(props: {\n  default: string;\n  feature: string;\n}): React.ReactElement {\n  const value = useFeature(props.feature).value;\n\n  if (value !== null) {\n    return <>{value}</>;\n  }\n\n  return <>{props.default}</>;\n}\n\nexport const withRunExperiment = <P extends WithRunExperimentProps>(\n  Component: React.ComponentType<P>\n): React.ComponentType<Omit<P, keyof WithRunExperimentProps>> => {\n  // eslint-disable-next-line\n  const withRunExperimentWrapper = (props: any): React.ReactElement => (\n    <GrowthBookContext.Consumer>\n      {({ growthbook }): React.ReactElement => {\n        return (\n          <Component\n            {...(props as P)}\n            runExperiment={(exp) => growthbook.run(exp)}\n          />\n        );\n      }}\n    </GrowthBookContext.Consumer>\n  );\n  return withRunExperimentWrapper;\n};\nwithRunExperiment.displayName = \"WithRunExperiment\";\n\nexport const GrowthBookProvider: React.FC<\n  React.PropsWithChildren<{\n    growthbook: GrowthBook;\n  }>\n> = ({ children, growthbook }) => {\n  // Tell growthbook how to re-render our app (for dev mode integration)\n  // eslint-disable-next-line\n  const [_, setRenderCount] = React.useState(0);\n  React.useEffect(() => {\n    if (!growthbook || !growthbook.setRenderer) return;\n\n    growthbook.setRenderer(() => {\n      setRenderCount((v) => v + 1);\n    });\n    return () => {\n      growthbook.setRenderer(() => {\n        // do nothing\n      });\n    };\n  }, [growthbook]);\n\n  return (\n    <GrowthBookContext.Provider\n      value={{\n        growthbook,\n      }}\n    >\n      {children}\n    </GrowthBookContext.Provider>\n  );\n};\n"],"names":["GrowthBookContext","React","createContext","getGrowthBookSSRData","context","gb","GrowthBook","clientKey","init","data","attributes","getAttributes","features","getFeatures","destroy","useGrowthBookSSR","useGrowthBook","isFirst","useRef","current","setFeatures","setAttributes","useExperiment","exp","growthbook","useContext","run","useFeature","id","evalFeature","useFeatureIsOn","isOn","useFeatureValue","fallback","getFeatureValue","Error","FeaturesReady","children","timeout","hitTimeout","setHitTimeout","useState","ready","useEffect","timer","setTimeout","log","clearTimeout","createElement","Fragment","IfFeatureEnabled","feature","on","FeatureString","props","value","default","withRunExperiment","Component","withRunExperimentWrapper","Consumer","_extends","runExperiment","displayName","GrowthBookProvider","_","setRenderCount","setRenderer","v","Provider"],"mappings":"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","debugId":null}},
    {"offset": {"line": 3231, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/react-query/src/QueryClientProvider.tsx"],"sourcesContent":["'use client'\nimport * as React from 'react'\n\nimport type { QueryClient } from '@tanstack/query-core'\n\nexport const QueryClientContext = React.createContext<QueryClient | undefined>(\n  undefined,\n)\n\nexport const useQueryClient = (queryClient?: QueryClient) => {\n  const client = React.useContext(QueryClientContext)\n\n  if (queryClient) {\n    return queryClient\n  }\n\n  if (!client) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one')\n  }\n\n  return client\n}\n\nexport type QueryClientProviderProps = {\n  client: QueryClient\n  children?: React.ReactNode\n}\n\nexport const QueryClientProvider = ({\n  client,\n  children,\n}: QueryClientProviderProps): React.JSX.Element => {\n  React.useEffect(() => {\n    client.mount()\n    return () => {\n      client.unmount()\n    }\n  }, [client])\n\n  return (\n    <QueryClientContext.Provider value={client}>\n      {children}\n    </QueryClientContext.Provider>\n  )\n}\n"],"names":[],"mappings":";;;;;;;;;AACA,YAAY,WAAW;AAuCnB;;;;AAnCG,IAAM,qBAA2B,sNAAA,CACtC,KAAA;AAGK,IAAM,iBAAiB,CAAC,gBAA8B;IAC3D,MAAM,SAAe,mNAAA,CAAW,kBAAkB;IAElD,IAAI,aAAa;QACf,OAAO;IACT;IAEA,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM,wDAAwD;IAC1E;IAEA,OAAO;AACT;AAOO,IAAM,sBAAsB,CAAC,EAClC,MAAA,EACA,QAAA,EACF,KAAmD;IAC3C,kNAAA,CAAU,MAAM;QACpB,OAAO,KAAA,CAAM;QACb,OAAO,MAAM;YACX,OAAO,OAAA,CAAQ;QACjB;IACF,GAAG;QAAC,MAAM;KAAC;IAEX,OACE,aAAA,GAAA,IAAA,8NAAA,EAAC,mBAAmB,QAAA,EAAnB;QAA4B,OAAO;QACjC;IAAA,CACH;AAEJ","debugId":null}},
    {"offset": {"line": 3276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/timeoutManager.ts"],"sourcesContent":["/**\n * {@link TimeoutManager} does not support passing arguments to the callback.\n *\n * `(_: void)` is the argument type inferred by TypeScript's default typings for\n * `setTimeout(cb, number)`.\n * If we don't accept a single void argument, then\n * `new Promise(resolve => timeoutManager.setTimeout(resolve, N))` is a type error.\n */\nexport type TimeoutCallback = (_: void) => void\n\n/**\n * Wrapping `setTimeout` is awkward from a typing perspective because platform\n * typings may extend the return type of `setTimeout`. For example, NodeJS\n * typings add `NodeJS.Timeout`; but a non-default `timeoutManager` may not be\n * able to return such a type.\n */\nexport type ManagedTimerId = number | { [Symbol.toPrimitive]: () => number }\n\n/**\n * Backend for timer functions.\n */\nexport type TimeoutProvider<TTimerId extends ManagedTimerId = ManagedTimerId> =\n  {\n    readonly setTimeout: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearTimeout: (timeoutId: TTimerId | undefined) => void\n\n    readonly setInterval: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearInterval: (intervalId: TTimerId | undefined) => void\n  }\n\nexport const defaultTimeoutProvider: TimeoutProvider<\n  ReturnType<typeof setTimeout>\n> = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId),\n}\n\n/**\n * Allows customization of how timeouts are created.\n *\n * @tanstack/query-core makes liberal use of timeouts to implement `staleTime`\n * and `gcTime`. The default TimeoutManager provider uses the platform's global\n * `setTimeout` implementation, which is known to have scalability issues with\n * thousands of timeouts on the event loop.\n *\n * If you hit this limitation, consider providing a custom TimeoutProvider that\n * coalesces timeouts.\n */\nexport class TimeoutManager implements Omit<TimeoutProvider, 'name'> {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider: TimeoutProvider<any> = defaultTimeoutProvider\n  #providerCalled = false\n\n  setTimeoutProvider<TTimerId extends ManagedTimerId>(\n    provider: TimeoutProvider<TTimerId>,\n  ): void {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.#providerCalled && provider !== this.#provider) {\n        // After changing providers, `clearTimeout` will not work as expected for\n        // timeouts from the previous provider.\n        //\n        // Since they may allocate the same timeout ID, clearTimeout may cancel an\n        // arbitrary different timeout, or unexpected no-op.\n        //\n        // We could protect against this by mixing the timeout ID bits\n        // deterministically with some per-provider bits.\n        //\n        // We could internally queue `setTimeout` calls to `TimeoutManager` until\n        // some API call to set the initial provider.\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider },\n        )\n      }\n    }\n\n    this.#provider = provider\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = false\n    }\n  }\n\n  setTimeout(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setTimeout(callback, delay)\n  }\n\n  clearTimeout(timeoutId: ManagedTimerId | undefined): void {\n    this.#provider.clearTimeout(timeoutId)\n  }\n\n  setInterval(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setInterval(callback, delay)\n  }\n\n  clearInterval(intervalId: ManagedTimerId | undefined): void {\n    this.#provider.clearInterval(intervalId)\n  }\n}\n\nexport const timeoutManager = new TimeoutManager()\n\n/**\n * In many cases code wants to delay to the next event loop tick; this is not\n * mediated by {@link timeoutManager}.\n *\n * This function is provided to make auditing the `tanstack/query-core` for\n * incorrect use of system `setTimeout` easier.\n */\nexport function systemSetTimeoutZero(callback: TimeoutCallback): void {\n  setTimeout(callback, 0)\n}\n"],"names":[],"mappings":";;;;;;;;;;;AA8BO,IAAM,yBAET;IAAA,4EAAA;IAAA,yBAAA;IAAA,EAAA;IAAA,gCAAA;IAAA,2DAAA;IAAA,EAAA;IAAA,0EAAA;IAAA,4EAAA;IAAA,6EAAA;IAAA,qBAAA;IAWF,YAAY,CAAC,UAAU,QAAU,WAAW,UAAU,KAAK;IAC3D,cAAc,CAAC,YAAc,aAAa,SAAS;IAEnD,aAAa,CAAC,UAAU,QAAU,YAAY,UAAU,KAAK;IAC7D,eAAe,CAAC,aAAe,cAAc,UAAU;AACzD;AAaO,IAAM,iBAAN,MAA8D;IAAA,6EAAA;IAAA,2EAAA;IAAA,4EAAA;IAAA,EAAA;IAAA,0EAAA;IAAA,0DAAA;KAOnE,QAAA,GAAkC,uBAAA;KAClC,cAAA,GAAkB,MAAA;IAElB,mBACE,QAAA,EACM;QACN,IAAI,QAAQ,IAAI,aAAa,WAAc;YACzC,IAAI,IAAA,EAAK,cAAA,IAAmB,aAAa,IAAA,EAAK,QAAA,EAAW;gBAYvD,QAAQ,KAAA,CACN,CAAA,0GAAA,CAAA,EACA;oBAAE,UAAU,IAAA,EAAK,QAAA;oBAAW;gBAAS;YAEzC;QACF;QAEA,IAAA,EAAK,QAAA,GAAY;QACjB,IAAI,QAAQ,IAAI,wCAAa,cAAc;YACzC,IAAA,EAAK,cAAA,GAAkB;QACzB;IACF;IAEA,WAAW,QAAA,EAA2B,KAAA,EAA+B;QACnE,IAAI,QAAQ,IAAI,wCAAa,cAAc;YACzC,IAAA,EAAK,cAAA,GAAkB;QACzB;QACA,OAAO,IAAA,EAAK,QAAA,CAAU,UAAA,CAAW,UAAU,KAAK;IAClD;IAEA,aAAa,SAAA,EAA6C;QACxD,IAAA,EAAK,QAAA,CAAU,YAAA,CAAa,SAAS;IACvC;IAEA,YAAY,QAAA,EAA2B,KAAA,EAA+B;QACpE,IAAI,QAAQ,IAAI,wCAAa,cAAc;YACzC,IAAA,EAAK,cAAA,GAAkB;QACzB;QACA,OAAO,IAAA,EAAK,QAAA,CAAU,WAAA,CAAY,UAAU,KAAK;IACnD;IAEA,cAAc,UAAA,EAA8C;QAC1D,IAAA,EAAK,QAAA,CAAU,aAAA,CAAc,UAAU;IACzC;AACF;AAEO,IAAM,iBAAiB,IAAI,eAAe;AAS1C,SAAS,qBAAqB,QAAA,EAAiC;IACpE,WAAW,UAAU,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 3355, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/utils.ts"],"sourcesContent":["import { timeoutManager } from './timeoutManager'\nimport type {\n  DefaultError,\n  Enabled,\n  FetchStatus,\n  MutationKey,\n  MutationStatus,\n  QueryFunction,\n  QueryKey,\n  QueryOptions,\n  StaleTime,\n  StaleTimeFunction,\n} from './types'\nimport type { Mutation } from './mutation'\nimport type { FetchOptions, Query } from './query'\n\n// TYPES\n\nexport interface QueryFilters<TQueryKey extends QueryKey = QueryKey> {\n  /**\n   * Filter to active queries, inactive queries or all queries\n   */\n  type?: QueryTypeFilter\n  /**\n   * Match query key exactly\n   */\n  exact?: boolean\n  /**\n   * Include queries matching this predicate function\n   */\n  predicate?: (query: Query) => boolean\n  /**\n   * Include queries matching this query key\n   */\n  queryKey?: TQueryKey\n  /**\n   * Include or exclude stale queries\n   */\n  stale?: boolean\n  /**\n   * Include queries matching their fetchStatus\n   */\n  fetchStatus?: FetchStatus\n}\n\nexport interface MutationFilters<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TContext = unknown,\n> {\n  /**\n   * Match mutation key exactly\n   */\n  exact?: boolean\n  /**\n   * Include mutations matching this predicate function\n   */\n  predicate?: (\n    mutation: Mutation<TData, TError, TVariables, TContext>,\n  ) => boolean\n  /**\n   * Include mutations matching this mutation key\n   */\n  mutationKey?: MutationKey\n  /**\n   * Filter by mutation status\n   */\n  status?: MutationStatus\n}\n\nexport type Updater<TInput, TOutput> = TOutput | ((input: TInput) => TOutput)\n\nexport type QueryTypeFilter = 'all' | 'active' | 'inactive'\n\n// UTILS\n\nexport const isServer = typeof window === 'undefined' || 'Deno' in globalThis\n\nexport function noop(): void\nexport function noop(): undefined\nexport function noop() {}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput,\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as (_: TInput) => TOutput)(input)\n    : updater\n}\n\nexport function isValidTimeout(value: unknown): value is number {\n  return typeof value === 'number' && value >= 0 && value !== Infinity\n}\n\nexport function timeUntilStale(updatedAt: number, staleTime?: number): number {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0)\n}\n\nexport function resolveStaleTime<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  staleTime:\n    | undefined\n    | StaleTimeFunction<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): StaleTime | undefined {\n  return typeof staleTime === 'function' ? staleTime(query) : staleTime\n}\n\nexport function resolveEnabled<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  enabled: undefined | Enabled<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): boolean | undefined {\n  return typeof enabled === 'function' ? enabled(query) : enabled\n}\n\nexport function matchQuery(\n  filters: QueryFilters,\n  query: Query<any, any, any, any>,\n): boolean {\n  const {\n    type = 'all',\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale,\n  } = filters\n\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false\n    }\n  }\n\n  if (type !== 'all') {\n    const isActive = query.isActive()\n    if (type === 'active' && !isActive) {\n      return false\n    }\n    if (type === 'inactive' && isActive) {\n      return false\n    }\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false\n  }\n\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false\n  }\n\n  if (predicate && !predicate(query)) {\n    return false\n  }\n\n  return true\n}\n\nexport function matchMutation(\n  filters: MutationFilters,\n  mutation: Mutation<any, any>,\n): boolean {\n  const { exact, status, predicate, mutationKey } = filters\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false\n    }\n  }\n\n  if (status && mutation.state.status !== status) {\n    return false\n  }\n\n  if (predicate && !predicate(mutation)) {\n    return false\n  }\n\n  return true\n}\n\nexport function hashQueryKeyByOptions<TQueryKey extends QueryKey = QueryKey>(\n  queryKey: TQueryKey,\n  options?: Pick<QueryOptions<any, any, any, any>, 'queryKeyHashFn'>,\n): string {\n  const hashFn = options?.queryKeyHashFn || hashKey\n  return hashFn(queryKey)\n}\n\n/**\n * Default query & mutation keys hash function.\n * Hashes the value into a stable hash.\n */\nexport function hashKey(queryKey: QueryKey | MutationKey): string {\n  return JSON.stringify(queryKey, (_, val) =>\n    isPlainObject(val)\n      ? Object.keys(val)\n          .sort()\n          .reduce((result, key) => {\n            result[key] = val[key]\n            return result\n          }, {} as any)\n      : val,\n  )\n}\n\n/**\n * Checks if key `b` partially matches with key `a`.\n */\nexport function partialMatchKey(a: QueryKey, b: QueryKey): boolean\nexport function partialMatchKey(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]))\n  }\n\n  return false\n}\n\nconst hasOwn = Object.prototype.hasOwnProperty\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceEqualDeep<T>(a: unknown, b: T): T\nexport function replaceEqualDeep(a: any, b: any): any {\n  if (a === b) {\n    return a\n  }\n\n  const array = isPlainArray(a) && isPlainArray(b)\n\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b\n\n  const aItems = array ? a : Object.keys(a)\n  const aSize = aItems.length\n  const bItems = array ? b : Object.keys(b)\n  const bSize = bItems.length\n  const copy: any = array ? new Array(bSize) : {}\n\n  let equalItems = 0\n\n  for (let i = 0; i < bSize; i++) {\n    const key: any = array ? i : bItems[i]\n    const aItem = a[key]\n    const bItem = b[key]\n\n    if (aItem === bItem) {\n      copy[key] = aItem\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++\n      continue\n    }\n\n    if (\n      aItem === null ||\n      bItem === null ||\n      typeof aItem !== 'object' ||\n      typeof bItem !== 'object'\n    ) {\n      copy[key] = bItem\n      continue\n    }\n\n    const v = replaceEqualDeep(aItem, bItem)\n    copy[key] = v\n    if (v === aItem) equalItems++\n  }\n\n  return aSize === bSize && equalItems === aSize ? a : copy\n}\n\n/**\n * Shallow compare objects.\n */\nexport function shallowEqualObjects<T extends Record<string, any>>(\n  a: T,\n  b: T | undefined,\n): boolean {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function isPlainArray(value: unknown): value is Array<unknown> {\n  return Array.isArray(value) && value.length === Object.keys(value).length\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Record<PropertyKey, unknown> {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has no constructor\n  const ctor = o.constructor\n  if (ctor === undefined) {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Handles Objects created by Object.create(<arbitrary prototype>)\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout)\n  })\n}\n\nexport function replaceData<\n  TData,\n  TOptions extends QueryOptions<any, any, any, any>,\n>(prevData: TData | undefined, data: TData, options: TOptions): TData {\n  if (typeof options.structuralSharing === 'function') {\n    return options.structuralSharing(prevData, data) as TData\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== 'production') {\n      try {\n        return replaceEqualDeep(prevData, data)\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`,\n        )\n\n        // Prevent the replaceEqualDeep from being called again down below.\n        throw error\n      }\n    }\n    // Structurally share data between prev and new data if needed\n    return replaceEqualDeep(prevData, data)\n  }\n  return data\n}\n\nexport function keepPreviousData<T>(\n  previousData: T | undefined,\n): T | undefined {\n  return previousData\n}\n\nexport function addToEnd<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [...items, item]\n  return max && newItems.length > max ? newItems.slice(1) : newItems\n}\n\nexport function addToStart<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [item, ...items]\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems\n}\n\nexport const skipToken = Symbol()\nexport type SkipToken = typeof skipToken\n\nexport function ensureQueryFn<\n  TQueryFnData = unknown,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: {\n    queryFn?: QueryFunction<TQueryFnData, TQueryKey> | SkipToken\n    queryHash?: string\n  },\n  fetchOptions?: FetchOptions<TQueryFnData>,\n): QueryFunction<TQueryFnData, TQueryKey> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`,\n      )\n    }\n  }\n\n  // if we attempt to retry a fetch that was triggered from an initialPromise\n  // when we don't have a queryFn yet, we can't retry, so we just return the already rejected initialPromise\n  // if an observer has already mounted, we will be able to retry with that queryFn\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise!\n  }\n\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () =>\n      Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`))\n  }\n\n  return options.queryFn\n}\n\nexport function shouldThrowError<T extends (...args: Array<any>) => boolean>(\n  throwOnError: boolean | T | undefined,\n  params: Parameters<T>,\n): boolean {\n  // Allow throwOnError function to override throwing behavior on a per-error basis\n  if (typeof throwOnError === 'function') {\n    return throwOnError(...params)\n  }\n\n  return !!throwOnError\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/notifyManager.ts"],"sourcesContent":["// TYPES\n\nimport { systemSetTimeoutZero } from './timeoutManager'\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\ntype BatchCallsCallback<T extends Array<unknown>> = (...args: T) => void\n\ntype ScheduleFunction = (callback: () => void) => void\n\nexport const defaultScheduler: ScheduleFunction = systemSetTimeoutZero\n\nexport function createNotifyManager() {\n  let queue: Array<NotifyCallback> = []\n  let transactions = 0\n  let notifyFn: NotifyFunction = (callback) => {\n    callback()\n  }\n  let batchNotifyFn: BatchNotifyFunction = (callback: () => void) => {\n    callback()\n  }\n  let scheduleFn = defaultScheduler\n\n  const schedule = (callback: NotifyCallback): void => {\n    if (transactions) {\n      queue.push(callback)\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback)\n      })\n    }\n  }\n  const flush = (): void => {\n    const originalQueue = queue\n    queue = []\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  return {\n    batch: <T>(callback: () => T): T => {\n      let result\n      transactions++\n      try {\n        result = callback()\n      } finally {\n        transactions--\n        if (!transactions) {\n          flush()\n        }\n      }\n      return result\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: <T extends Array<unknown>>(\n      callback: BatchCallsCallback<T>,\n    ): BatchCallsCallback<T> => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args)\n        })\n      }\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn: NotifyFunction) => {\n      notifyFn = fn\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn: BatchNotifyFunction) => {\n      batchNotifyFn = fn\n    },\n    setScheduler: (fn: ScheduleFunction) => {\n      scheduleFn = fn\n    },\n  } as const\n}\n\n// SINGLETON\nexport const notifyManager = createNotifyManager()\n"],"names":[],"mappings":";;;;;;;;;AAEA,SAAS,4BAA4B;;AAY9B,IAAM,mBAAqC,wMAAA;AAE3C,SAAS,sBAAsB;IACpC,IAAI,QAA+B,CAAC,CAAA;IACpC,IAAI,eAAe;IACnB,IAAI,WAA2B,CAAC,aAAa;QAC3C,SAAS;IACX;IACA,IAAI,gBAAqC,CAAC,aAAyB;QACjE,SAAS;IACX;IACA,IAAI,aAAa;IAEjB,MAAM,WAAW,CAAC,aAAmC;QACnD,IAAI,cAAc;YAChB,MAAM,IAAA,CAAK,QAAQ;QACrB,OAAO;YACL,WAAW,MAAM;gBACf,SAAS,QAAQ;YACnB,CAAC;QACH;IACF;IACA,MAAM,QAAQ,MAAY;QACxB,MAAM,gBAAgB;QACtB,QAAQ,CAAC,CAAA;QACT,IAAI,cAAc,MAAA,EAAQ;YACxB,WAAW,MAAM;gBACf,cAAc,MAAM;oBAClB,cAAc,OAAA,CAAQ,CAAC,aAAa;wBAClC,SAAS,QAAQ;oBACnB,CAAC;gBACH,CAAC;YACH,CAAC;QACH;IACF;IAEA,OAAO;QACL,OAAO,CAAI,aAAyB;YAClC,IAAI;YACJ;YACA,IAAI;gBACF,SAAS,SAAS;YACpB,SAAE;gBACA;gBACA,IAAI,CAAC,cAAc;oBACjB,MAAM;gBACR;YACF;YACA,OAAO;QACT;QAAA;;KAAA,GAIA,YAAY,CACV,aAC0B;YAC1B,OAAO,CAAA,GAAI,SAAS;gBAClB,SAAS,MAAM;oBACb,SAAS,GAAG,IAAI;gBAClB,CAAC;YACH;QACF;QACA;QAAA;;;KAAA,GAKA,mBAAmB,CAAC,OAAuB;YACzC,WAAW;QACb;QAAA;;;KAAA,GAKA,wBAAwB,CAAC,OAA4B;YACnD,gBAAgB;QAClB;QACA,cAAc,CAAC,OAAyB;YACtC,aAAa;QACf;IACF;AACF;AAGO,IAAM,gBAAgB,oBAAoB","debugId":null}},
    {"offset": {"line": 3726, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/subscribable.ts"],"sourcesContent":["export class Subscribable<TListener extends Function> {\n  protected listeners = new Set<TListener>()\n\n  constructor() {\n    this.subscribe = this.subscribe.bind(this)\n  }\n\n  subscribe(listener: TListener): () => void {\n    this.listeners.add(listener)\n\n    this.onSubscribe()\n\n    return () => {\n      this.listeners.delete(listener)\n      this.onUnsubscribe()\n    }\n  }\n\n  hasListeners(): boolean {\n    return this.listeners.size > 0\n  }\n\n  protected onSubscribe(): void {\n    // Do nothing\n  }\n\n  protected onUnsubscribe(): void {\n    // Do nothing\n  }\n}\n"],"names":[],"mappings":";;;;;AAAO,IAAM,eAAN,MAA+C;IAGpD,aAAc;QAFd,IAAA,CAAU,SAAA,GAAY,aAAA,GAAA,IAAI,IAAe;QAGvC,IAAA,CAAK,SAAA,GAAY,IAAA,CAAK,SAAA,CAAU,IAAA,CAAK,IAAI;IAC3C;IAEA,UAAU,QAAA,EAAiC;QACzC,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,QAAQ;QAE3B,IAAA,CAAK,WAAA,CAAY;QAEjB,OAAO,MAAM;YACX,IAAA,CAAK,SAAA,CAAU,MAAA,CAAO,QAAQ;YAC9B,IAAA,CAAK,aAAA,CAAc;QACrB;IACF;IAEA,eAAwB;QACtB,OAAO,IAAA,CAAK,SAAA,CAAU,IAAA,GAAO;IAC/B;IAEU,cAAoB,CAE9B;IAEU,gBAAsB,CAEhC;AACF","debugId":null}},
    {"offset": {"line": 3756, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/focusManager.ts"],"sourcesContent":["import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (focused: boolean) => void\n\ntype SetupFn = (\n  setFocused: (focused?: boolean) => void,\n) => (() => void) | undefined\n\nexport class FocusManager extends Subscribable<Listener> {\n  #focused?: boolean\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onFocus) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus()\n        // Listen to visibilitychange\n        window.addEventListener('visibilitychange', listener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', listener)\n        }\n      }\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === 'boolean') {\n        this.setFocused(focused)\n      } else {\n        this.onFocus()\n      }\n    })\n  }\n\n  setFocused(focused?: boolean): void {\n    const changed = this.#focused !== focused\n    if (changed) {\n      this.#focused = focused\n      this.onFocus()\n    }\n  }\n\n  onFocus(): void {\n    const isFocused = this.isFocused()\n    this.listeners.forEach((listener) => {\n      listener(isFocused)\n    })\n  }\n\n  isFocused(): boolean {\n    if (typeof this.#focused === 'boolean') {\n      return this.#focused\n    }\n\n    // document global can be unavailable in react native\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return globalThis.document?.visibilityState !== 'hidden'\n  }\n}\n\nexport const focusManager = new FocusManager()\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;;;AAQlB,IAAM,eAAN,cAA2B,8LAAA,CAAuB;KACvD,OAAA,CAAA;KACA,OAAA,CAAA;KAEA,KAAA,CAAA;IAEA,aAAc;QACZ,KAAA,CAAM;QACN,IAAA,EAAK,KAAA,GAAS,CAAC,YAAY;YAGzB,IAAI,CAAC,mLAAA,IAAY,OAAO,gBAAA,EAAkB;gBACxC,MAAM,WAAW,IAAM,QAAQ;gBAE/B,OAAO,gBAAA,CAAiB,oBAAoB,UAAU,KAAK;gBAE3D,OAAO,MAAM;oBAEX,OAAO,mBAAA,CAAoB,oBAAoB,QAAQ;gBACzD;YACF;YACA;QACF;IACF;IAEU,cAAoB;QAC5B,IAAI,CAAC,IAAA,EAAK,OAAA,EAAU;YAClB,IAAA,CAAK,gBAAA,CAAiB,IAAA,EAAK,KAAM;QACnC;IACF;IAEU,gBAAgB;QACxB,IAAI,CAAC,IAAA,CAAK,YAAA,CAAa,GAAG;YACxB,IAAA,EAAK,OAAA,GAAW;YAChB,IAAA,EAAK,OAAA,GAAW,KAAA;QAClB;IACF;IAEA,iBAAiB,KAAA,EAAsB;QACrC,IAAA,EAAK,KAAA,GAAS;QACd,IAAA,EAAK,OAAA,GAAW;QAChB,IAAA,EAAK,OAAA,GAAW,MAAM,CAAC,YAAY;YACjC,IAAI,OAAO,YAAY,WAAW;gBAChC,IAAA,CAAK,UAAA,CAAW,OAAO;YACzB,OAAO;gBACL,IAAA,CAAK,OAAA,CAAQ;YACf;QACF,CAAC;IACH;IAEA,WAAW,OAAA,EAAyB;QAClC,MAAM,UAAU,IAAA,EAAK,OAAA,KAAa;QAClC,IAAI,SAAS;YACX,IAAA,EAAK,OAAA,GAAW;YAChB,IAAA,CAAK,OAAA,CAAQ;QACf;IACF;IAEA,UAAgB;QACd,MAAM,YAAY,IAAA,CAAK,SAAA,CAAU;QACjC,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,CAAC,aAAa;YACnC,SAAS,SAAS;QACpB,CAAC;IACH;IAEA,YAAqB;QACnB,IAAI,OAAO,IAAA,EAAK,OAAA,KAAa,WAAW;YACtC,OAAO,IAAA,EAAK,OAAA;QACd;QAIA,OAAO,WAAW,QAAA,EAAU,oBAAoB;IAClD;AACF;AAEO,IAAM,eAAe,IAAI,aAAa","debugId":null}},
    {"offset": {"line": 3833, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/onlineManager.ts"],"sourcesContent":["import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (online: boolean) => void\ntype SetupFn = (setOnline: Listener) => (() => void) | undefined\n\nexport class OnlineManager extends Subscribable<Listener> {\n  #online = true\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onOnline) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true)\n        const offlineListener = () => onOnline(false)\n        // Listen to online\n        window.addEventListener('online', onlineListener, false)\n        window.addEventListener('offline', offlineListener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', onlineListener)\n          window.removeEventListener('offline', offlineListener)\n        }\n      }\n\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup(this.setOnline.bind(this))\n  }\n\n  setOnline(online: boolean): void {\n    const changed = this.#online !== online\n\n    if (changed) {\n      this.#online = online\n      this.listeners.forEach((listener) => {\n        listener(online)\n      })\n    }\n  }\n\n  isOnline(): boolean {\n    return this.#online\n  }\n}\n\nexport const onlineManager = new OnlineManager()\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;;;AAKlB,IAAM,gBAAN,cAA4B,8LAAA,CAAuB;KACxD,MAAA,GAAU,KAAA;KACV,OAAA,CAAA;KAEA,KAAA,CAAA;IAEA,aAAc;QACZ,KAAA,CAAM;QACN,IAAA,EAAK,KAAA,GAAS,CAAC,aAAa;YAG1B,IAAI,CAAC,mLAAA,IAAY,OAAO,gBAAA,EAAkB;gBACxC,MAAM,iBAAiB,IAAM,SAAS,IAAI;gBAC1C,MAAM,kBAAkB,IAAM,SAAS,KAAK;gBAE5C,OAAO,gBAAA,CAAiB,UAAU,gBAAgB,KAAK;gBACvD,OAAO,gBAAA,CAAiB,WAAW,iBAAiB,KAAK;gBAEzD,OAAO,MAAM;oBAEX,OAAO,mBAAA,CAAoB,UAAU,cAAc;oBACnD,OAAO,mBAAA,CAAoB,WAAW,eAAe;gBACvD;YACF;YAEA;QACF;IACF;IAEU,cAAoB;QAC5B,IAAI,CAAC,IAAA,EAAK,OAAA,EAAU;YAClB,IAAA,CAAK,gBAAA,CAAiB,IAAA,EAAK,KAAM;QACnC;IACF;IAEU,gBAAgB;QACxB,IAAI,CAAC,IAAA,CAAK,YAAA,CAAa,GAAG;YACxB,IAAA,EAAK,OAAA,GAAW;YAChB,IAAA,EAAK,OAAA,GAAW,KAAA;QAClB;IACF;IAEA,iBAAiB,KAAA,EAAsB;QACrC,IAAA,EAAK,KAAA,GAAS;QACd,IAAA,EAAK,OAAA,GAAW;QAChB,IAAA,EAAK,OAAA,GAAW,MAAM,IAAA,CAAK,SAAA,CAAU,IAAA,CAAK,IAAI,CAAC;IACjD;IAEA,UAAU,MAAA,EAAuB;QAC/B,MAAM,UAAU,IAAA,EAAK,MAAA,KAAY;QAEjC,IAAI,SAAS;YACX,IAAA,EAAK,MAAA,GAAU;YACf,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,CAAC,aAAa;gBACnC,SAAS,MAAM;YACjB,CAAC;QACH;IACF;IAEA,WAAoB;QAClB,OAAO,IAAA,EAAK,MAAA;IACd;AACF;AAEO,IAAM,gBAAgB,IAAI,cAAc","debugId":null}},
    {"offset": {"line": 3900, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/thenable.ts"],"sourcesContent":["/**\n * Thenable types which matches React's types for promises\n *\n * React seemingly uses `.status`, `.value` and `.reason` properties on a promises to optimistically unwrap data from promises\n *\n * @see https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L112-L138\n * @see https://github.com/facebook/react/blob/4f604941569d2e8947ce1460a0b2997e835f37b9/packages/react-debug-tools/src/ReactDebugHooks.js#L224-L227\n */\n\nimport { noop } from './utils'\n\ninterface Fulfilled<T> {\n  status: 'fulfilled'\n  value: T\n}\ninterface Rejected {\n  status: 'rejected'\n  reason: unknown\n}\ninterface Pending<T> {\n  status: 'pending'\n\n  /**\n   * Resolve the promise with a value.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  resolve: (value: T) => void\n  /**\n   * Reject the promise with a reason.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  reject: (reason: unknown) => void\n}\n\nexport type FulfilledThenable<T> = Promise<T> & Fulfilled<T>\nexport type RejectedThenable<T> = Promise<T> & Rejected\nexport type PendingThenable<T> = Promise<T> & Pending<T>\n\nexport type Thenable<T> =\n  | FulfilledThenable<T>\n  | RejectedThenable<T>\n  | PendingThenable<T>\n\nexport function pendingThenable<T>(): PendingThenable<T> {\n  let resolve: Pending<T>['resolve']\n  let reject: Pending<T>['reject']\n  // this could use `Promise.withResolvers()` in the future\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve\n    reject = _reject\n  }) as PendingThenable<T>\n\n  thenable.status = 'pending'\n  thenable.catch(() => {\n    // prevent unhandled rejection errors\n  })\n\n  function finalize(data: Fulfilled<T> | Rejected) {\n    Object.assign(thenable, data)\n\n    // clear pending props props to avoid calling them twice\n    delete (thenable as Partial<PendingThenable<T>>).resolve\n    delete (thenable as Partial<PendingThenable<T>>).reject\n  }\n\n  thenable.resolve = (value) => {\n    finalize({\n      status: 'fulfilled',\n      value,\n    })\n\n    resolve(value)\n  }\n  thenable.reject = (reason) => {\n    finalize({\n      status: 'rejected',\n      reason,\n    })\n\n    reject(reason)\n  }\n\n  return thenable\n}\n\n/**\n * This function takes a Promise-like input and detects whether the data\n * is synchronously available or not.\n *\n * It does not inspect .status, .value or .reason properties of the promise,\n * as those are not always available, and the .status of React's promises\n * should not be considered part of the public API.\n */\nexport function tryResolveSync(promise: Promise<unknown> | Thenable<unknown>) {\n  let data: unknown\n\n  promise\n    .then((result) => {\n      data = result\n      return result\n    }, noop)\n    // .catch can be unavailable on certain kinds of thenable's\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    ?.catch(noop)\n\n  if (data !== undefined) {\n    return { data }\n  }\n\n  return undefined\n}\n"],"names":[],"mappings":";;;;;;;AASA,SAAS,YAAY;;AAkCd,SAAS,kBAAyC;IACvD,IAAI;IACJ,IAAI;IAEJ,MAAM,WAAW,IAAI,QAAQ,CAAC,UAAU,YAAY;QAClD,UAAU;QACV,SAAS;IACX,CAAC;IAED,SAAS,MAAA,GAAS;IAClB,SAAS,KAAA,CAAM,KAEf,CAFqB,AAEpB;IAED,SAAS,SAAS,IAAA,EAA+B;QAC/C,OAAO,MAAA,CAAO,UAAU,IAAI;QAG5B,OAAQ,SAAyC,OAAA;QACjD,OAAQ,SAAyC,MAAA;IACnD;IAEA,SAAS,OAAA,GAAU,CAAC,UAAU;QAC5B,SAAS;YACP,QAAQ;YACR;QACF,CAAC;QAED,QAAQ,KAAK;IACf;IACA,SAAS,MAAA,GAAS,CAAC,WAAW;QAC5B,SAAS;YACP,QAAQ;YACR;QACF,CAAC;QAED,OAAO,MAAM;IACf;IAEA,OAAO;AACT;AAUO,SAAS,eAAe,OAAA,EAA+C;IAC5E,IAAI;IAEJ,QACG,IAAA,CAAK,CAAC,WAAW;QAChB,OAAO;QACP,OAAO;IACT,GAAG,+KAAI,GAGL,MAAM,+KAAI;IAEd,IAAI,SAAS,KAAA,GAAW;QACtB,OAAO;YAAE;QAAK;IAChB;IAEA,OAAO,KAAA;AACT","debugId":null}},
    {"offset": {"line": 3958, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/retryer.ts"],"sourcesContent":["import { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { pendingThenable } from './thenable'\nimport { isServer, sleep } from './utils'\nimport type { Thenable } from './thenable'\nimport type { CancelOptions, DefaultError, NetworkMode } from './types'\n\n// TYPES\n\ninterface RetryerConfig<TData = unknown, TError = DefaultError> {\n  fn: () => TData | Promise<TData>\n  initialPromise?: Promise<TData>\n  onCancel?: (error: TError) => void\n  onFail?: (failureCount: number, error: TError) => void\n  onPause?: () => void\n  onContinue?: () => void\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue<TError>\n  networkMode: NetworkMode | undefined\n  canRun: () => boolean\n}\n\nexport interface Retryer<TData = unknown> {\n  promise: Promise<TData>\n  cancel: (cancelOptions?: CancelOptions) => void\n  continue: () => Promise<unknown>\n  cancelRetry: () => void\n  continueRetry: () => void\n  canStart: () => boolean\n  start: () => Promise<TData>\n  status: () => 'pending' | 'resolved' | 'rejected'\n}\n\nexport type RetryValue<TError> = boolean | number | ShouldRetryFunction<TError>\n\ntype ShouldRetryFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => boolean\n\nexport type RetryDelayValue<TError> = number | RetryDelayFunction<TError>\n\ntype RetryDelayFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => number\n\nfunction defaultRetryDelay(failureCount: number) {\n  return Math.min(1000 * 2 ** failureCount, 30000)\n}\n\nexport function canFetch(networkMode: NetworkMode | undefined): boolean {\n  return (networkMode ?? 'online') === 'online'\n    ? onlineManager.isOnline()\n    : true\n}\n\nexport class CancelledError extends Error {\n  revert?: boolean\n  silent?: boolean\n  constructor(options?: CancelOptions) {\n    super('CancelledError')\n    this.revert = options?.revert\n    this.silent = options?.silent\n  }\n}\n\n/**\n * @deprecated Use instanceof `CancelledError` instead.\n */\nexport function isCancelledError(value: any): value is CancelledError {\n  return value instanceof CancelledError\n}\n\nexport function createRetryer<TData = unknown, TError = DefaultError>(\n  config: RetryerConfig<TData, TError>,\n): Retryer<TData> {\n  let isRetryCancelled = false\n  let failureCount = 0\n  let continueFn: ((value?: unknown) => void) | undefined\n\n  const thenable = pendingThenable<TData>()\n\n  const isResolved = () =>\n    (thenable.status as Thenable<TData>['status']) !== 'pending'\n\n  const cancel = (cancelOptions?: CancelOptions): void => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions) as TError\n      reject(error)\n\n      config.onCancel?.(error)\n    }\n  }\n  const cancelRetry = () => {\n    isRetryCancelled = true\n  }\n\n  const continueRetry = () => {\n    isRetryCancelled = false\n  }\n\n  const canContinue = () =>\n    focusManager.isFocused() &&\n    (config.networkMode === 'always' || onlineManager.isOnline()) &&\n    config.canRun()\n\n  const canStart = () => canFetch(config.networkMode) && config.canRun()\n\n  const resolve = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.resolve(value)\n    }\n  }\n\n  const reject = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.reject(value)\n    }\n  }\n\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value)\n        }\n      }\n      config.onPause?.()\n    }).then(() => {\n      continueFn = undefined\n      if (!isResolved()) {\n        config.onContinue?.()\n      }\n    })\n  }\n\n  // Create loop function\n  const run = () => {\n    // Do nothing if already resolved\n    if (isResolved()) {\n      return\n    }\n\n    let promiseOrValue: any\n\n    // we can re-use config.initialPromise on the first call of run()\n    const initialPromise =\n      failureCount === 0 ? config.initialPromise : undefined\n\n    // Execute query\n    try {\n      promiseOrValue = initialPromise ?? config.fn()\n    } catch (error) {\n      promiseOrValue = Promise.reject(error)\n    }\n\n    Promise.resolve(promiseOrValue)\n      .then(resolve)\n      .catch((error) => {\n        // Stop if the fetch is already resolved\n        if (isResolved()) {\n          return\n        }\n\n        // Do we need to retry the request?\n        const retry = config.retry ?? (isServer ? 0 : 3)\n        const retryDelay = config.retryDelay ?? defaultRetryDelay\n        const delay =\n          typeof retryDelay === 'function'\n            ? retryDelay(failureCount, error)\n            : retryDelay\n        const shouldRetry =\n          retry === true ||\n          (typeof retry === 'number' && failureCount < retry) ||\n          (typeof retry === 'function' && retry(failureCount, error))\n\n        if (isRetryCancelled || !shouldRetry) {\n          // We are done if the query does not need to be retried\n          reject(error)\n          return\n        }\n\n        failureCount++\n\n        // Notify on fail\n        config.onFail?.(failureCount, error)\n\n        // Delay\n        sleep(delay)\n          // Pause if the document is not visible or when the device is offline\n          .then(() => {\n            return canContinue() ? undefined : pause()\n          })\n          .then(() => {\n            if (isRetryCancelled) {\n              reject(error)\n            } else {\n              run()\n            }\n          })\n      })\n  }\n\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.()\n      return thenable\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      // Start loop\n      if (canStart()) {\n        run()\n      } else {\n        pause().then(run)\n      }\n      return thenable\n    },\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/removable.ts"],"sourcesContent":["import { timeoutManager } from './timeoutManager'\nimport { isServer, isValidTimeout } from './utils'\nimport type { ManagedTimerId } from './timeoutManager'\n\nexport abstract class Removable {\n  gcTime!: number\n  #gcTimeout?: ManagedTimerId\n\n  destroy(): void {\n    this.clearGcTimeout()\n  }\n\n  protected scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove()\n      }, this.gcTime)\n    }\n  }\n\n  protected updateGcTime(newGcTime: number | undefined): void {\n    // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1000),\n    )\n  }\n\n  protected clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout)\n      this.#gcTimeout = undefined\n    }\n  }\n\n  protected abstract optionalRemove(): void\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,sBAAsB;AAC/B,SAAS,UAAU,sBAAsB;;;AAGlC,IAAe,YAAf,MAAyB;KAE9B,SAAA,CAAA;IAEA,UAAgB;QACd,IAAA,CAAK,cAAA,CAAe;IACtB;IAEU,aAAmB;QAC3B,IAAA,CAAK,cAAA,CAAe;QAEpB,QAAI,yLAAA,EAAe,IAAA,CAAK,MAAM,GAAG;YAC/B,IAAA,EAAK,SAAA,GAAa,kMAAA,CAAe,UAAA,CAAW,MAAM;gBAChD,IAAA,CAAK,cAAA,CAAe;YACtB,GAAG,IAAA,CAAK,MAAM;QAChB;IACF;IAEU,aAAa,SAAA,EAAqC;QAE1D,IAAA,CAAK,MAAA,GAAS,KAAK,GAAA,CACjB,IAAA,CAAK,MAAA,IAAU,GACf,aAAA,CAAc,mLAAA,GAAW,WAAW,IAAI,KAAK,GAAA;IAEjD;IAEU,iBAAiB;QACzB,IAAI,IAAA,EAAK,SAAA,EAAY;YACnB,kMAAA,CAAe,YAAA,CAAa,IAAA,EAAK,SAAU;YAC3C,IAAA,EAAK,SAAA,GAAa,KAAA;QACpB;IACF;AAGF","debugId":null}},
    {"offset": {"line": 4142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/query.ts"],"sourcesContent":["import {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale,\n} from './utils'\nimport { notifyManager } from './notifyManager'\nimport { CancelledError, canFetch, createRetryer } from './retryer'\nimport { Removable } from './removable'\nimport type { QueryCache } from './queryCache'\nimport type { QueryClient } from './queryClient'\nimport type {\n  CancelOptions,\n  DefaultError,\n  FetchStatus,\n  InitialDataFunction,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n  QueryMeta,\n  QueryOptions,\n  QueryStatus,\n  SetDataOptions,\n  StaleTime,\n} from './types'\nimport type { QueryObserver } from './queryObserver'\nimport type { Retryer } from './retryer'\n\n// TYPES\n\ninterface QueryConfig<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  client: QueryClient\n  queryKey: TQueryKey\n  queryHash: string\n  options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state?: QueryState<TData, TError>\n}\n\nexport interface QueryState<TData = unknown, TError = DefaultError> {\n  data: TData | undefined\n  dataUpdateCount: number\n  dataUpdatedAt: number\n  error: TError | null\n  errorUpdateCount: number\n  errorUpdatedAt: number\n  fetchFailureCount: number\n  fetchFailureReason: TError | null\n  fetchMeta: FetchMeta | null\n  isInvalidated: boolean\n  status: QueryStatus\n  fetchStatus: FetchStatus\n}\n\nexport interface FetchContext<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  fetchFn: () => unknown | Promise<unknown>\n  fetchOptions?: FetchOptions\n  signal: AbortSignal\n  options: QueryOptions<TQueryFnData, TError, TData, any>\n  client: QueryClient\n  queryKey: TQueryKey\n  state: QueryState<TData, TError>\n}\n\nexport interface QueryBehavior<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  onFetch: (\n    context: FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n    query: Query,\n  ) => void\n}\n\nexport type FetchDirection = 'forward' | 'backward'\n\nexport interface FetchMeta {\n  fetchMore?: { direction: FetchDirection }\n}\n\nexport interface FetchOptions<TData = unknown> {\n  cancelRefetch?: boolean\n  meta?: FetchMeta\n  initialPromise?: Promise<TData>\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError\n}\n\ninterface FetchAction {\n  type: 'fetch'\n  meta?: FetchMeta\n}\n\ninterface SuccessAction<TData> {\n  data: TData | undefined\n  type: 'success'\n  dataUpdatedAt?: number\n  manual?: boolean\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface InvalidateAction {\n  type: 'invalidate'\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError> {\n  type: 'setState'\n  state: Partial<QueryState<TData, TError>>\n  setStateOptions?: SetStateOptions\n}\n\nexport type Action<TData, TError> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | FetchAction\n  | InvalidateAction\n  | PauseAction\n  | SetStateAction<TData, TError>\n  | SuccessAction<TData>\n\nexport interface SetStateOptions {\n  meta?: any\n}\n\n// CLASS\n\nexport class Query<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> extends Removable {\n  queryKey: TQueryKey\n  queryHash: string\n  options!: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state: QueryState<TData, TError>\n\n  #initialState: QueryState<TData, TError>\n  #revertState?: QueryState<TData, TError>\n  #cache: QueryCache\n  #client: QueryClient\n  #retryer?: Retryer<TData>\n  observers: Array<QueryObserver<any, any, any, any, any>>\n  #defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  #abortSignalConsumed: boolean\n\n  constructor(config: QueryConfig<TQueryFnData, TError, TData, TQueryKey>) {\n    super()\n\n    this.#abortSignalConsumed = false\n    this.#defaultOptions = config.defaultOptions\n    this.setOptions(config.options)\n    this.observers = []\n    this.#client = config.client\n    this.#cache = this.#client.getQueryCache()\n    this.queryKey = config.queryKey\n    this.queryHash = config.queryHash\n    this.#initialState = getDefaultState(this.options)\n    this.state = config.state ?? this.#initialState\n    this.scheduleGc()\n  }\n  get meta(): QueryMeta | undefined {\n    return this.options.meta\n  }\n\n  get promise(): Promise<TData> | undefined {\n    return this.#retryer?.promise\n  }\n\n  setOptions(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): void {\n    this.options = { ...this.#defaultOptions, ...options }\n\n    this.updateGcTime(this.options.gcTime)\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (this.state && this.state.data === undefined) {\n      const defaultState = getDefaultState(this.options)\n      if (defaultState.data !== undefined) {\n        this.setData(defaultState.data, {\n          updatedAt: defaultState.dataUpdatedAt,\n          manual: true,\n        })\n        this.#initialState = defaultState\n      }\n    }\n  }\n\n  protected optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === 'idle') {\n      this.#cache.remove(this)\n    }\n  }\n\n  setData(\n    newData: TData,\n    options?: SetDataOptions & { manual: boolean },\n  ): TData {\n    const data = replaceData(this.state.data, newData, this.options)\n\n    // Set data and mark it as cached\n    this.#dispatch({\n      data,\n      type: 'success',\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual,\n    })\n\n    return data\n  }\n\n  setState(\n    state: Partial<QueryState<TData, TError>>,\n    setStateOptions?: SetStateOptions,\n  ): void {\n    this.#dispatch({ type: 'setState', state, setStateOptions })\n  }\n\n  cancel(options?: CancelOptions): Promise<void> {\n    const promise = this.#retryer?.promise\n    this.#retryer?.cancel(options)\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve()\n  }\n\n  destroy(): void {\n    super.destroy()\n\n    this.cancel({ silent: true })\n  }\n\n  reset(): void {\n    this.destroy()\n    this.setState(this.#initialState)\n  }\n\n  isActive(): boolean {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false,\n    )\n  }\n\n  isDisabled(): boolean {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive()\n    }\n    // if a query has no observers, it should still be considered disabled if it never attempted a fetch\n    return (\n      this.options.queryFn === skipToken ||\n      this.state.dataUpdateCount + this.state.errorUpdateCount === 0\n    )\n  }\n\n  isStatic(): boolean {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) =>\n          resolveStaleTime(observer.options.staleTime, this) === 'static',\n      )\n    }\n\n    return false\n  }\n\n  isStale(): boolean {\n    // check observers first, their `isStale` has the source of truth\n    // calculated with `isStaleByTime` and it takes `enabled` into account\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale,\n      )\n    }\n\n    return this.state.data === undefined || this.state.isInvalidated\n  }\n\n  isStaleByTime(staleTime: StaleTime = 0): boolean {\n    // no data is always stale\n    if (this.state.data === undefined) {\n      return true\n    }\n    // static is never stale\n    if (staleTime === 'static') {\n      return false\n    }\n    // if the query is invalidated, it is stale\n    if (this.state.isInvalidated) {\n      return true\n    }\n\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime)\n  }\n\n  onFocus(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  onOnline(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  addObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer)\n\n      // Stop the query from being garbage collected\n      this.clearGcTimeout()\n\n      this.#cache.notify({ type: 'observerAdded', query: this, observer })\n    }\n  }\n\n  removeObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer)\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true })\n          } else {\n            this.#retryer.cancelRetry()\n          }\n        }\n\n        this.scheduleGc()\n      }\n\n      this.#cache.notify({ type: 'observerRemoved', query: this, observer })\n    }\n  }\n\n  getObserversCount(): number {\n    return this.observers.length\n  }\n\n  invalidate(): void {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: 'invalidate' })\n    }\n  }\n\n  async fetch(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    fetchOptions?: FetchOptions<TQueryFnData>,\n  ): Promise<TData> {\n    if (\n      this.state.fetchStatus !== 'idle' &&\n      // If the promise in the retyer is already rejected, we have to definitely\n      // re-start the fetch; there is a chance that the query is still in a\n      // pending state when that happens\n      this.#retryer?.status() !== 'rejected'\n    ) {\n      if (this.state.data !== undefined && fetchOptions?.cancelRefetch) {\n        // Silently cancel current fetch if the user wants to cancel refetch\n        this.cancel({ silent: true })\n      } else if (this.#retryer) {\n        // make sure that retries that were potentially cancelled due to unmounts can continue\n        this.#retryer.continueRetry()\n        // Return current promise if we are already fetching\n        return this.#retryer.promise\n      }\n    }\n\n    // Update config if passed, otherwise the config from the last execution is used\n    if (options) {\n      this.setOptions(options)\n    }\n\n    // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn)\n      if (observer) {\n        this.setOptions(observer.options)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`,\n        )\n      }\n    }\n\n    const abortController = new AbortController()\n\n    // Adds an enumerable signal property to the object that\n    // which sets abortSignalConsumed to true when the signal\n    // is read.\n    const addSignalProperty = (object: unknown) => {\n      Object.defineProperty(object, 'signal', {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true\n          return abortController.signal\n        },\n      })\n    }\n\n    // Create fetch function\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions)\n\n      // Create query function context\n      const createQueryFnContext = (): QueryFunctionContext<TQueryKey> => {\n        const queryFnContext: OmitKeyof<\n          QueryFunctionContext<TQueryKey>,\n          'signal'\n        > = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta,\n        }\n        addSignalProperty(queryFnContext)\n        return queryFnContext as QueryFunctionContext<TQueryKey>\n      }\n\n      const queryFnContext = createQueryFnContext()\n\n      this.#abortSignalConsumed = false\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this as unknown as Query,\n        )\n      }\n\n      return queryFn(queryFnContext)\n    }\n\n    // Trigger behavior hook\n    const createFetchContext = (): FetchContext<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey\n    > => {\n      const context: OmitKeyof<\n        FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n        'signal'\n      > = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn,\n      }\n\n      addSignalProperty(context)\n      return context as FetchContext<TQueryFnData, TError, TData, TQueryKey>\n    }\n\n    const context = createFetchContext()\n\n    this.options.behavior?.onFetch(context, this as unknown as Query)\n\n    // Store state in case the current fetch needs to be reverted\n    this.#revertState = this.state\n\n    // Set to fetching state if not already in it\n    if (\n      this.state.fetchStatus === 'idle' ||\n      this.state.fetchMeta !== context.fetchOptions?.meta\n    ) {\n      this.#dispatch({ type: 'fetch', meta: context.fetchOptions?.meta })\n    }\n\n    // Try to fetch the data\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise as\n        | Promise<TData>\n        | undefined,\n      fn: context.fetchFn as () => Promise<TData>,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: 'idle' as const,\n          })\n        }\n        abortController.abort()\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.#dispatch({ type: 'continue' })\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true,\n    })\n\n    try {\n      const data = await this.#retryer.start()\n      // this is more of a runtime guard\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (data === undefined) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`,\n          )\n        }\n        throw new Error(`${this.queryHash} data is undefined`)\n      }\n\n      this.setData(data)\n\n      // Notify cache callback\n      this.#cache.config.onSuccess?.(data, this as Query<any, any, any, any>)\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error as any,\n        this as Query<any, any, any, any>,\n      )\n      return data\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          // silent cancellation implies a new fetch is going to be started,\n          // so we piggyback onto that promise\n          return this.#retryer.promise\n        } else if (error.revert) {\n          // transform error into reverted state data\n          // if the initial fetch was cancelled, we have no data, so we have\n          // to get reject with a CancelledError\n          if (this.state.data === undefined) {\n            throw error\n          }\n          return this.state.data\n        }\n      }\n      this.#dispatch({\n        type: 'error',\n        error: error as TError,\n      })\n\n      // Notify cache callback\n      this.#cache.config.onError?.(\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n\n      throw error // rethrow the error for further handling\n    } finally {\n      // Schedule query gc after fetching\n      this.scheduleGc()\n    }\n  }\n\n  #dispatch(action: Action<TData, TError>): void {\n    const reducer = (\n      state: QueryState<TData, TError>,\n    ): QueryState<TData, TError> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            fetchStatus: 'paused',\n          }\n        case 'continue':\n          return {\n            ...state,\n            fetchStatus: 'fetching',\n          }\n        case 'fetch':\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null,\n          }\n        case 'success':\n          const newState = {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: 'success' as const,\n            ...(!action.manual && {\n              fetchStatus: 'idle' as const,\n              fetchFailureCount: 0,\n              fetchFailureReason: null,\n            }),\n          }\n          // If fetching ends successfully, we don't need revertState as a fallback anymore.\n          // For manual updates, capture the state to revert to it in case of a cancellation.\n          this.#revertState = action.manual ? newState : undefined\n\n          return newState\n        case 'error':\n          const error = action.error\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: 'idle',\n            status: 'error',\n          }\n        case 'invalidate':\n          return {\n            ...state,\n            isInvalidated: true,\n          }\n        case 'setState':\n          return {\n            ...state,\n            ...action.state,\n          }\n      }\n    }\n\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate()\n      })\n\n      this.#cache.notify({ query: this, type: 'updated', action })\n    })\n  }\n}\n\nexport function fetchState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  data: TData | undefined,\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? 'fetching' : 'paused',\n    ...(data === undefined &&\n      ({\n        error: null,\n        status: 'pending',\n      } as const)),\n  } as const\n}\n\nfunction getDefaultState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n): QueryState<TData, TError> {\n  const data =\n    typeof options.initialData === 'function'\n      ? (options.initialData as InitialDataFunction<TData>)()\n      : options.initialData\n\n  const hasData = data !== undefined\n\n  const initialDataUpdatedAt = hasData\n    ? typeof options.initialDataUpdatedAt === 'function'\n      ? (options.initialDataUpdatedAt as () => number | undefined)()\n      : options.initialDataUpdatedAt\n    : 0\n\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? (initialDataUpdatedAt ?? Date.now()) : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? 'success' : 'pending',\n    fetchStatus: 'idle',\n  }\n}\n"],"names":["queryFnContext","context"],"mappings":"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","debugId":null}},
    {"offset": {"line": 4589, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/queryCache.ts"],"sourcesContent":["import { hashQueryKeyByOptions, matchQuery } from './utils'\nimport { Query } from './query'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport type { QueryFilters } from './utils'\nimport type { Action, QueryState } from './query'\nimport type {\n  DefaultError,\n  NotifyEvent,\n  QueryKey,\n  QueryOptions,\n  WithRequired,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { QueryObserver } from './queryObserver'\n\n// TYPES\n\ninterface QueryCacheConfig {\n  onError?: (\n    error: DefaultError,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n  onSuccess?: (data: unknown, query: Query<unknown, unknown, unknown>) => void\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n}\n\ninterface NotifyEventQueryAdded extends NotifyEvent {\n  type: 'added'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryRemoved extends NotifyEvent {\n  type: 'removed'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryUpdated extends NotifyEvent {\n  type: 'updated'\n  query: Query<any, any, any, any>\n  action: Action<any, any>\n}\n\ninterface NotifyEventQueryObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverResultsUpdated extends NotifyEvent {\n  type: 'observerResultsUpdated'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\nexport type QueryCacheNotifyEvent =\n  | NotifyEventQueryAdded\n  | NotifyEventQueryRemoved\n  | NotifyEventQueryUpdated\n  | NotifyEventQueryObserverAdded\n  | NotifyEventQueryObserverRemoved\n  | NotifyEventQueryObserverResultsUpdated\n  | NotifyEventQueryObserverOptionsUpdated\n\ntype QueryCacheListener = (event: QueryCacheNotifyEvent) => void\n\nexport interface QueryStore {\n  has: (queryHash: string) => boolean\n  set: (queryHash: string, query: Query) => void\n  get: (queryHash: string) => Query | undefined\n  delete: (queryHash: string) => void\n  values: () => IterableIterator<Query>\n}\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  #queries: QueryStore\n\n  constructor(public config: QueryCacheConfig = {}) {\n    super()\n    this.#queries = new Map<string, Query>()\n  }\n\n  build<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    client: QueryClient,\n    options: WithRequired<\n      QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n      'queryKey'\n    >,\n    state?: QueryState<TData, TError>,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> {\n    const queryKey = options.queryKey\n    const queryHash =\n      options.queryHash ?? hashQueryKeyByOptions(queryKey, options)\n    let query = this.get<TQueryFnData, TError, TData, TQueryKey>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any, any, any>): void {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query)\n\n      this.notify({\n        type: 'added',\n        query,\n      })\n    }\n  }\n\n  remove(query: Query<any, any, any, any>): void {\n    const queryInMap = this.#queries.get(query.queryHash)\n\n    if (queryInMap) {\n      query.destroy()\n\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash)\n      }\n\n      this.notify({ type: 'removed', query })\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query)\n      })\n    })\n  }\n\n  get<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    queryHash: string,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> | undefined {\n    return this.#queries.get(queryHash) as\n      | Query<TQueryFnData, TError, TData, TQueryKey>\n      | undefined\n  }\n\n  getAll(): Array<Query> {\n    return [...this.#queries.values()]\n  }\n\n  find<TQueryFnData = unknown, TError = DefaultError, TData = TQueryFnData>(\n    filters: WithRequired<QueryFilters, 'queryKey'>,\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((query) =>\n      matchQuery(defaultedFilters, query),\n    ) as Query<TQueryFnData, TError, TData> | undefined\n  }\n\n  findAll(filters: QueryFilters<any> = {}): Array<Query> {\n    const queries = this.getAll()\n    return Object.keys(filters).length > 0\n      ? queries.filter((query) => matchQuery(filters, query))\n      : queries\n  }\n\n  notify(event: QueryCacheNotifyEvent): void {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  onFocus(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus()\n      })\n    })\n  }\n\n  onOnline(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline()\n      })\n    })\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4702, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/mutation.ts"],"sourcesContent":["import { notifyManager } from './notifyManager'\nimport { Removable } from './removable'\nimport { createRetryer } from './retryer'\nimport type {\n  DefaultError,\n  MutationMeta,\n  MutationOptions,\n  MutationStatus,\n} from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport type { Retryer } from './retryer'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TContext> {\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TContext>\n  state?: MutationState<TData, TError, TVariables, TContext>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TContext = unknown,\n> {\n  context: TContext | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  failureReason: TError | null\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n  submittedAt: number\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError | null\n}\n\ninterface PendingAction<TVariables, TContext> {\n  type: 'pending'\n  isPaused: boolean\n  variables?: TVariables\n  context?: TContext\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\nexport type Action<TData, TError, TVariables, TContext> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | PendingAction<TVariables, TContext>\n  | PauseAction\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TContext = unknown,\n> extends Removable {\n  state: MutationState<TData, TError, TVariables, TContext>\n  options!: MutationOptions<TData, TError, TVariables, TContext>\n  readonly mutationId: number\n\n  #observers: Array<MutationObserver<TData, TError, TVariables, TContext>>\n  #mutationCache: MutationCache\n  #retryer?: Retryer<TData>\n\n  constructor(config: MutationConfig<TData, TError, TVariables, TContext>) {\n    super()\n\n    this.mutationId = config.mutationId\n    this.#mutationCache = config.mutationCache\n    this.#observers = []\n    this.state = config.state || getDefaultState()\n\n    this.setOptions(config.options)\n    this.scheduleGc()\n  }\n\n  setOptions(\n    options: MutationOptions<TData, TError, TVariables, TContext>,\n  ): void {\n    this.options = options\n\n    this.updateGcTime(this.options.gcTime)\n  }\n\n  get meta(): MutationMeta | undefined {\n    return this.options.meta\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer)\n\n      // Stop the mutation from being garbage collected\n      this.clearGcTimeout()\n\n      this.#mutationCache.notify({\n        type: 'observerAdded',\n        mutation: this,\n        observer,\n      })\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.#observers = this.#observers.filter((x) => x !== observer)\n\n    this.scheduleGc()\n\n    this.#mutationCache.notify({\n      type: 'observerRemoved',\n      mutation: this,\n      observer,\n    })\n  }\n\n  protected optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === 'pending') {\n        this.scheduleGc()\n      } else {\n        this.#mutationCache.remove(this)\n      }\n    }\n  }\n\n  continue(): Promise<unknown> {\n    return (\n      this.#retryer?.continue() ??\n      // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n      this.execute(this.state.variables!)\n    )\n  }\n\n  async execute(variables: TVariables): Promise<TData> {\n    const onContinue = () => {\n      this.#dispatch({ type: 'continue' })\n    }\n\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error('No mutationFn found'))\n        }\n        return this.options.mutationFn(variables)\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this),\n    })\n\n    const restored = this.state.status === 'pending'\n    const isPaused = !this.#retryer.canStart()\n\n    try {\n      if (restored) {\n        // Dispatch continue action to unpause restored mutation\n        onContinue()\n      } else {\n        this.#dispatch({ type: 'pending', variables, isPaused })\n        // Notify cache callback\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n        )\n        const context = await this.options.onMutate?.(variables)\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: 'pending',\n            context,\n            variables,\n            isPaused,\n          })\n        }\n      }\n      const data = await this.#retryer.start()\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n      )\n\n      await this.options.onSuccess?.(data, variables, this.state.context!)\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n      )\n\n      await this.options.onSettled?.(data, null, variables, this.state.context)\n\n      this.#dispatch({ type: 'success', data })\n      return data\n    } catch (error) {\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onError?.(\n          error as any,\n          variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n        )\n\n        await this.options.onError?.(\n          error as TError,\n          variables,\n          this.state.context,\n        )\n\n        // Notify cache callback\n        await this.#mutationCache.config.onSettled?.(\n          undefined,\n          error as any,\n          this.state.variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n        )\n\n        await this.options.onSettled?.(\n          undefined,\n          error as TError,\n          variables,\n          this.state.context,\n        )\n        throw error\n      } finally {\n        this.#dispatch({ type: 'error', error: error as TError })\n      }\n    } finally {\n      this.#mutationCache.runNext(this)\n    }\n  }\n\n  #dispatch(action: Action<TData, TError, TVariables, TContext>): void {\n    const reducer = (\n      state: MutationState<TData, TError, TVariables, TContext>,\n    ): MutationState<TData, TError, TVariables, TContext> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            isPaused: true,\n          }\n        case 'continue':\n          return {\n            ...state,\n            isPaused: false,\n          }\n        case 'pending':\n          return {\n            ...state,\n            context: action.context,\n            data: undefined,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: 'pending',\n            variables: action.variables,\n            submittedAt: Date.now(),\n          }\n        case 'success':\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: 'success',\n            isPaused: false,\n          }\n        case 'error':\n          return {\n            ...state,\n            data: undefined,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: 'error',\n          }\n      }\n    }\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action)\n      })\n      this.#mutationCache.notify({\n        mutation: this,\n        type: 'updated',\n        action,\n      })\n    })\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TContext,\n>(): MutationState<TData, TError, TVariables, TContext> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n    submittedAt: 0,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4934, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/mutationCache.ts"],"sourcesContent":["import { notifyManager } from './notifyManager'\nimport { Mutation } from './mutation'\nimport { matchMutation, noop } from './utils'\nimport { Subscribable } from './subscribable'\nimport type { MutationObserver } from './mutationObserver'\nimport type { DefaultError, MutationOptions, NotifyEvent } from './types'\nimport type { QueryClient } from './queryClient'\nimport type { Action, MutationState } from './mutation'\nimport type { MutationFilters } from './utils'\n\n// TYPES\n\ninterface MutationCacheConfig {\n  onError?: (\n    error: DefaultError,\n    variables: unknown,\n    context: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n  ) => Promise<unknown> | unknown\n  onSuccess?: (\n    data: unknown,\n    variables: unknown,\n    context: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n  ) => Promise<unknown> | unknown\n  onMutate?: (\n    variables: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n  ) => Promise<unknown> | unknown\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    variables: unknown,\n    context: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n  ) => Promise<unknown> | unknown\n}\n\ninterface NotifyEventMutationAdded extends NotifyEvent {\n  type: 'added'\n  mutation: Mutation<any, any, any, any>\n}\ninterface NotifyEventMutationRemoved extends NotifyEvent {\n  type: 'removed'\n  mutation: Mutation<any, any, any, any>\n}\n\ninterface NotifyEventMutationObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  mutation?: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any, any>\n}\n\ninterface NotifyEventMutationUpdated extends NotifyEvent {\n  type: 'updated'\n  mutation: Mutation<any, any, any, any>\n  action: Action<any, any, any, any>\n}\n\nexport type MutationCacheNotifyEvent =\n  | NotifyEventMutationAdded\n  | NotifyEventMutationRemoved\n  | NotifyEventMutationObserverAdded\n  | NotifyEventMutationObserverRemoved\n  | NotifyEventMutationObserverOptionsUpdated\n  | NotifyEventMutationUpdated\n\ntype MutationCacheListener = (event: MutationCacheNotifyEvent) => void\n\n// CLASS\n\nexport class MutationCache extends Subscribable<MutationCacheListener> {\n  #mutations: Set<Mutation<any, any, any, any>>\n  #scopes: Map<string, Array<Mutation<any, any, any, any>>>\n  #mutationId: number\n\n  constructor(public config: MutationCacheConfig = {}) {\n    super()\n    this.#mutations = new Set()\n    this.#scopes = new Map()\n    this.#mutationId = 0\n  }\n\n  build<TData, TError, TVariables, TContext>(\n    client: QueryClient,\n    options: MutationOptions<TData, TError, TVariables, TContext>,\n    state?: MutationState<TData, TError, TVariables, TContext>,\n  ): Mutation<TData, TError, TVariables, TContext> {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state,\n    })\n\n    this.add(mutation)\n\n    return mutation\n  }\n\n  add(mutation: Mutation<any, any, any, any>): void {\n    this.#mutations.add(mutation)\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const scopedMutations = this.#scopes.get(scope)\n      if (scopedMutations) {\n        scopedMutations.push(mutation)\n      } else {\n        this.#scopes.set(scope, [mutation])\n      }\n    }\n    this.notify({ type: 'added', mutation })\n  }\n\n  remove(mutation: Mutation<any, any, any, any>): void {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation)\n      if (typeof scope === 'string') {\n        const scopedMutations = this.#scopes.get(scope)\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation)\n            if (index !== -1) {\n              scopedMutations.splice(index, 1)\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope)\n          }\n        }\n      }\n    }\n\n    // Currently we notify the removal even if the mutation was already removed.\n    // Consider making this an error or not notifying of the removal depending on the desired semantics.\n    this.notify({ type: 'removed', mutation })\n  }\n\n  canRun(mutation: Mutation<any, any, any, any>): boolean {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const mutationsWithSameScope = this.#scopes.get(scope)\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === 'pending',\n      )\n      // we can run if there is no current pending mutation (start use-case)\n      // or if WE are the first pending mutation (continue use-case)\n      return !firstPendingMutation || firstPendingMutation === mutation\n    } else {\n      // For unscoped mutations there are never any pending mutations in front of the\n      // current mutation\n      return true\n    }\n  }\n\n  runNext(mutation: Mutation<any, any, any, any>): Promise<unknown> {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const foundMutation = this.#scopes\n        .get(scope)\n        ?.find((m) => m !== mutation && m.state.isPaused)\n\n      return foundMutation?.continue() ?? Promise.resolve()\n    } else {\n      return Promise.resolve()\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: 'removed', mutation })\n      })\n      this.#mutations.clear()\n      this.#scopes.clear()\n    })\n  }\n\n  getAll(): Array<Mutation> {\n    return Array.from(this.#mutations)\n  }\n\n  find<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = any,\n    TContext = unknown,\n  >(\n    filters: MutationFilters,\n  ): Mutation<TData, TError, TVariables, TContext> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((mutation) =>\n      matchMutation(defaultedFilters, mutation),\n    ) as Mutation<TData, TError, TVariables, TContext> | undefined\n  }\n\n  findAll(filters: MutationFilters = {}): Array<Mutation> {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation))\n  }\n\n  notify(event: MutationCacheNotifyEvent) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused)\n\n    return notifyManager.batch(() =>\n      Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop)),\n      ),\n    )\n  }\n}\n\nfunction scopeFor(mutation: Mutation<any, any, any, any>) {\n  return mutation.options.scope?.id\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5073, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/infiniteQueryBehavior.ts"],"sourcesContent":["import { addToEnd, addToStart, ensureQueryFn } from './utils'\nimport type { QueryBehavior } from './query'\nimport type {\n  InfiniteData,\n  InfiniteQueryPageParamsOptions,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n} from './types'\n\nexport function infiniteQueryBehavior<TQueryFnData, TError, TData, TPageParam>(\n  pages?: number,\n): QueryBehavior<TQueryFnData, TError, InfiniteData<TData, TPageParam>> {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options as InfiniteQueryPageParamsOptions<TData>\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction\n      const oldPages = context.state.data?.pages || []\n      const oldPageParams = context.state.data?.pageParams || []\n      let result: InfiniteData<unknown> = { pages: [], pageParams: [] }\n      let currentPage = 0\n\n      const fetchFn = async () => {\n        let cancelled = false\n        const addSignalProperty = (object: unknown) => {\n          Object.defineProperty(object, 'signal', {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true\n              } else {\n                context.signal.addEventListener('abort', () => {\n                  cancelled = true\n                })\n              }\n              return context.signal\n            },\n          })\n        }\n\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions)\n\n        // Create function to fetch a page\n        const fetchPage = async (\n          data: InfiniteData<unknown>,\n          param: unknown,\n          previous?: boolean,\n        ): Promise<InfiniteData<unknown>> => {\n          if (cancelled) {\n            return Promise.reject()\n          }\n\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data)\n          }\n\n          const createQueryFnContext = () => {\n            const queryFnContext: OmitKeyof<\n              QueryFunctionContext<QueryKey, unknown>,\n              'signal'\n            > = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? 'backward' : 'forward',\n              meta: context.options.meta,\n            }\n            addSignalProperty(queryFnContext)\n            return queryFnContext as QueryFunctionContext<QueryKey, unknown>\n          }\n\n          const queryFnContext = createQueryFnContext()\n\n          const page = await queryFn(queryFnContext)\n\n          const { maxPages } = context.options\n          const addTo = previous ? addToStart : addToEnd\n\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages),\n          }\n        }\n\n        // fetch next / previous page?\n        if (direction && oldPages.length) {\n          const previous = direction === 'backward'\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams,\n          }\n          const param = pageParamFn(options, oldData)\n\n          result = await fetchPage(oldData, param, previous)\n        } else {\n          const remainingPages = pages ?? oldPages.length\n\n          // Fetch all pages\n          do {\n            const param =\n              currentPage === 0\n                ? (oldPageParams[0] ?? options.initialPageParam)\n                : getNextPageParam(options, result)\n            if (currentPage > 0 && param == null) {\n              break\n            }\n            result = await fetchPage(result, param)\n            currentPage++\n          } while (currentPage < remainingPages)\n        }\n\n        return result\n      }\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn as any,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal,\n            },\n            query,\n          )\n        }\n      } else {\n        context.fetchFn = fetchFn\n      }\n    },\n  }\n}\n\nfunction getNextPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  const lastIndex = pages.length - 1\n  return pages.length > 0\n    ? options.getNextPageParam(\n        pages[lastIndex],\n        pages,\n        pageParams[lastIndex],\n        pageParams,\n      )\n    : undefined\n}\n\nfunction getPreviousPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  return pages.length > 0\n    ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams)\n    : undefined\n}\n\n/**\n * Checks if there is a next page.\n */\nexport function hasNextPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data) return false\n  return getNextPageParam(options, data) != null\n}\n\n/**\n * Checks if there is a previous page.\n */\nexport function hasPreviousPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data || !options.getPreviousPageParam) return false\n  return getPreviousPageParam(options, data) != null\n}\n"],"names":["queryFnContext"],"mappings":"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","debugId":null}},
    {"offset": {"line": 5199, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Guille/Documents/Ntasys-Automate/frontend/node_modules/%40tanstack/query-core/src/queryClient.ts"],"sourcesContent":["import {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken,\n} from './utils'\nimport { QueryCache } from './queryCache'\nimport { MutationCache } from './mutationCache'\nimport { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { notifyManager } from './notifyManager'\nimport { infiniteQueryBehavior } from './infiniteQueryBehavior'\nimport type {\n  CancelOptions,\n  DefaultError,\n  DefaultOptions,\n  DefaultedQueryObserverOptions,\n  EnsureInfiniteQueryDataOptions,\n  EnsureQueryDataOptions,\n  FetchInfiniteQueryOptions,\n  FetchQueryOptions,\n  InferDataFromTag,\n  InferErrorFromTag,\n  InfiniteData,\n  InvalidateOptions,\n  InvalidateQueryFilters,\n  MutationKey,\n  MutationObserverOptions,\n  MutationOptions,\n  NoInfer,\n  OmitKeyof,\n  QueryClientConfig,\n  QueryKey,\n  QueryObserverOptions,\n  QueryOptions,\n  RefetchOptions,\n  RefetchQueryFilters,\n  ResetOptions,\n  SetDataOptions,\n} from './types'\nimport type { QueryState } from './query'\nimport type { MutationFilters, QueryFilters, Updater } from './utils'\n\n// TYPES\n\ninterface QueryDefaults {\n  queryKey: QueryKey\n  defaultOptions: OmitKeyof<QueryOptions<any, any, any>, 'queryKey'>\n}\n\ninterface MutationDefaults {\n  mutationKey: MutationKey\n  defaultOptions: MutationOptions<any, any, any, any>\n}\n\n// CLASS\n\nexport class QueryClient {\n  #queryCache: QueryCache\n  #mutationCache: MutationCache\n  #defaultOptions: DefaultOptions\n  #queryDefaults: Map<string, QueryDefaults>\n  #mutationDefaults: Map<string, MutationDefaults>\n  #mountCount: number\n  #unsubscribeFocus?: () => void\n  #unsubscribeOnline?: () => void\n\n  constructor(config: QueryClientConfig = {}) {\n    this.#queryCache = config.queryCache || new QueryCache()\n    this.#mutationCache = config.mutationCache || new MutationCache()\n    this.#defaultOptions = config.defaultOptions || {}\n    this.#queryDefaults = new Map()\n    this.#mutationDefaults = new Map()\n    this.#mountCount = 0\n  }\n\n  mount(): void {\n    this.#mountCount++\n    if (this.#mountCount !== 1) return\n\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations()\n        this.#queryCache.onFocus()\n      }\n    })\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations()\n        this.#queryCache.onOnline()\n      }\n    })\n  }\n\n  unmount(): void {\n    this.#mountCount--\n    if (this.#mountCount !== 0) return\n\n    this.#unsubscribeFocus?.()\n    this.#unsubscribeFocus = undefined\n\n    this.#unsubscribeOnline?.()\n    this.#unsubscribeOnline = undefined\n  }\n\n  isFetching<TQueryFilters extends QueryFilters<any> = QueryFilters>(\n    filters?: TQueryFilters,\n  ): number {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: 'fetching' })\n      .length\n  }\n\n  isMutating<\n    TMutationFilters extends MutationFilters<any, any> = MutationFilters,\n  >(filters?: TMutationFilters): number {\n    return this.#mutationCache.findAll({ ...filters, status: 'pending' }).length\n  }\n\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(queryKey: TTaggedQueryKey): TInferredQueryFnData | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n\n    return this.#queryCache.get<TInferredQueryFnData>(options.queryHash)?.state\n      .data\n  }\n\n  ensureQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: EnsureQueryDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n    const query = this.#queryCache.build(this, defaultedOptions)\n    const cachedData = query.state.data\n\n    if (cachedData === undefined) {\n      return this.fetchQuery(options)\n    }\n\n    if (\n      options.revalidateIfStale &&\n      query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))\n    ) {\n      void this.prefetchQuery(defaultedOptions)\n    }\n\n    return Promise.resolve(cachedData)\n  }\n\n  getQueriesData<\n    TQueryFnData = unknown,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(filters: TQueryFilters): Array<[QueryKey, TQueryFnData | undefined]> {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data as TQueryFnData | undefined\n      return [queryKey, data]\n    })\n  }\n\n  setQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n    updater: Updater<\n      NoInfer<TInferredQueryFnData> | undefined,\n      NoInfer<TInferredQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): NoInfer<TInferredQueryFnData> | undefined {\n    const defaultedOptions = this.defaultQueryOptions<\n      any,\n      any,\n      unknown,\n      any,\n      QueryKey\n    >({ queryKey })\n\n    const query = this.#queryCache.get<TInferredQueryFnData>(\n      defaultedOptions.queryHash,\n    )\n    const prevData = query?.state.data\n    const data = functionalUpdate(updater, prevData)\n\n    if (data === undefined) {\n      return undefined\n    }\n\n    return this.#queryCache\n      .build(this, defaultedOptions)\n      .setData(data, { ...options, manual: true })\n  }\n\n  setQueriesData<\n    TQueryFnData,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(\n    filters: TQueryFilters,\n    updater: Updater<\n      NoInfer<TQueryFnData> | undefined,\n      NoInfer<TQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): Array<[QueryKey, TQueryFnData | undefined]> {\n    return notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map(({ queryKey }) => [\n          queryKey,\n          this.setQueryData<TQueryFnData>(queryKey, updater, options),\n        ]),\n    )\n  }\n\n  getQueryState<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n    TInferredError = InferErrorFromTag<TError, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n  ): QueryState<TInferredQueryFnData, TInferredError> | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n    return this.#queryCache.get<TInferredQueryFnData, TInferredError>(\n      options.queryHash,\n    )?.state\n  }\n\n  removeQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n  ): void {\n    const queryCache = this.#queryCache\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query)\n      })\n    })\n  }\n\n  resetQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    options?: ResetOptions,\n  ): Promise<void> {\n    const queryCache = this.#queryCache\n\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset()\n      })\n      return this.refetchQueries(\n        {\n          type: 'active',\n          ...filters,\n        },\n        options,\n      )\n    })\n  }\n\n  cancelQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    cancelOptions: CancelOptions = {},\n  ): Promise<void> {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions }\n\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map((query) => query.cancel(defaultedCancelOptions)),\n    )\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  invalidateQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: InvalidateQueryFilters<TTaggedQueryKey>,\n    options: InvalidateOptions = {},\n  ): Promise<void> {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate()\n      })\n\n      if (filters?.refetchType === 'none') {\n        return Promise.resolve()\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? 'active',\n        },\n        options,\n      )\n    })\n  }\n\n  refetchQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: RefetchQueryFilters<TTaggedQueryKey>,\n    options: RefetchOptions = {},\n  ): Promise<void> {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true,\n    }\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .filter((query) => !query.isDisabled() && !query.isStatic())\n        .map((query) => {\n          let promise = query.fetch(undefined, fetchOptions)\n          if (!fetchOptions.throwOnError) {\n            promise = promise.catch(noop)\n          }\n          return query.state.fetchStatus === 'paused'\n            ? Promise.resolve()\n            : promise\n        }),\n    )\n\n    return Promise.all(promises).then(noop)\n  }\n\n  fetchQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options: FetchQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n\n    // https://github.com/tannerlinsley/react-query/issues/652\n    if (defaultedOptions.retry === undefined) {\n      defaultedOptions.retry = false\n    }\n\n    const query = this.#queryCache.build(this, defaultedOptions)\n\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query),\n    )\n      ? query.fetch(defaultedOptions)\n      : Promise.resolve(query.state.data as TData)\n  }\n\n  prefetchQuery<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: FetchQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<void> {\n    return this.fetchQuery(options).then(noop).catch(noop)\n  }\n\n  fetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n    return this.fetchQuery(options as any)\n  }\n\n  prefetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<void> {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop)\n  }\n\n  ensureInfiniteQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: EnsureInfiniteQueryDataOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n\n    return this.ensureQueryData(options as any)\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations()\n    }\n    return Promise.resolve()\n  }\n\n  getQueryCache(): QueryCache {\n    return this.#queryCache\n  }\n\n  getMutationCache(): MutationCache {\n    return this.#mutationCache\n  }\n\n  getDefaultOptions(): DefaultOptions {\n    return this.#defaultOptions\n  }\n\n  setDefaultOptions(options: DefaultOptions): void {\n    this.#defaultOptions = options\n  }\n\n  setQueryDefaults<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n  >(\n    queryKey: QueryKey,\n    options: Partial<\n      OmitKeyof<\n        QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>,\n        'queryKey'\n      >\n    >,\n  ): void {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options,\n    })\n  }\n\n  getQueryDefaults(\n    queryKey: QueryKey,\n  ): OmitKeyof<QueryObserverOptions<any, any, any, any, any>, 'queryKey'> {\n    const defaults = [...this.#queryDefaults.values()]\n\n    const result: OmitKeyof<\n      QueryObserverOptions<any, any, any, any, any>,\n      'queryKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n    return result\n  }\n\n  setMutationDefaults<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = void,\n    TContext = unknown,\n  >(\n    mutationKey: MutationKey,\n    options: OmitKeyof<\n      MutationObserverOptions<TData, TError, TVariables, TContext>,\n      'mutationKey'\n    >,\n  ): void {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options,\n    })\n  }\n\n  getMutationDefaults(\n    mutationKey: MutationKey,\n  ): OmitKeyof<MutationObserverOptions<any, any, any, any>, 'mutationKey'> {\n    const defaults = [...this.#mutationDefaults.values()]\n\n    const result: OmitKeyof<\n      MutationObserverOptions<any, any, any, any>,\n      'mutationKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n\n    return result\n  }\n\n  defaultQueryOptions<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options:\n      | QueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey,\n          TPageParam\n        >\n      | DefaultedQueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey\n        >,\n  ): DefaultedQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  > {\n    if (options._defaulted) {\n      return options as DefaultedQueryObserverOptions<\n        TQueryFnData,\n        TError,\n        TData,\n        TQueryData,\n        TQueryKey\n      >\n    }\n\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true,\n    }\n\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions,\n      )\n    }\n\n    // dependent default values\n    if (defaultedOptions.refetchOnReconnect === undefined) {\n      defaultedOptions.refetchOnReconnect =\n        defaultedOptions.networkMode !== 'always'\n    }\n    if (defaultedOptions.throwOnError === undefined) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense\n    }\n\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = 'offlineFirst'\n    }\n\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false\n    }\n\n    return defaultedOptions as DefaultedQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >\n  }\n\n  defaultMutationOptions<T extends MutationOptions<any, any, any, any>>(\n    options?: T,\n  ): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...(options?.mutationKey &&\n        this.getMutationDefaults(options.mutationKey)),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  clear(): void {\n    this.#queryCache.clear()\n    this.#mutationCache.clear()\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}